"use strict";(()=>{var e={};e.id=811,e.ids=[811],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1493:(e,t,s)=>{let n,i,r,a,o,l,c,u,p,d,m;s.r(t),s.d(t,{originalPathname:()=>RM,patchFetch:()=>RL,requestAsyncStorage:()=>RF,routeModule:()=>RA,serverHooks:()=>RC,staticGenerationAsyncStorage:()=>Rj});var h,f,g,b,x,y,v={};s.r(v),s.d(v,{GET:()=>RN,POST:()=>RR});var _=s(9303),w=s(8716),S=s(3131);let k=function(e,t){if("function"==typeof e)return function(){return e(arguments)?t.apply(this,arguments):e=>t(e,...arguments)};switch(e){case 0:case 1:throw RangeError(`Invalid arity ${e}`);case 2:return function(e,s){return arguments.length>=2?t(e,s):function(s){return t(s,e)}};case 3:return function(e,s,n){return arguments.length>=3?t(e,s,n):function(n){return t(n,e,s)}};case 4:return function(e,s,n,i){return arguments.length>=4?t(e,s,n,i):function(i){return t(i,e,s,n)}};case 5:return function(e,s,n,i,r){return arguments.length>=5?t(e,s,n,i,r):function(r){return t(r,e,s,n,i)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let s=arguments;return function(e){return t(e,...s)}}}},O=e=>e,T=e=>()=>e,E=T(!0),I=T(!1),N=T(void 0);function R(e,t,s,n,i,r,a,o,l){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return s(t(e));case 4:return n(s(t(e)));case 5:return i(n(s(t(e))));case 6:return r(i(n(s(t(e)))));case 7:return a(r(i(n(s(t(e))))));case 8:return o(a(r(i(n(s(t(e)))))));case 9:return l(o(a(r(i(n(s(t(e))))))));default:{let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return e}}}let A=()=>"3.4.8",F=Symbol.for(`effect/GlobalValue/globalStoreId/${A()}`);F in globalThis||(globalThis[F]=new Map);let j=globalThis[F],C=(e,t)=>(j.has(e)||j.set(e,t()),j.get(e)),M=e=>!!e,L=e=>"string"==typeof e,$=e=>"number"==typeof e,P=e=>"boolean"==typeof e,U=e=>"bigint"==typeof e,D=e=>"symbol"==typeof e,z=e=>"function"==typeof e,B=e=>void 0===e,Z=e=>void 0!==e,q=e=>null!==e,K=e=>!1,J=e=>"object"==typeof e&&null!==e,V=e=>J(e)||z(e),G=k(2,(e,t)=>V(e)&&t in e),W=k(2,(e,t)=>G(e,"_tag")&&e._tag===t),H=e=>null==e,Y=e=>null!=e,Q=e=>e instanceof Date,X=e=>G(e,Symbol.iterator),ee=e=>J(e)&&!Array.isArray(e),et=e=>G(e,"then")&&z(e.then),es=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;Symbol.iterator;class en{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new en(this.self)}}class ei{_state;constructor(e,t,s,n){return H(t)&&H(e)?(t=4294967295*Math.random()>>>0,e=0):H(t)&&(t=e,e=0),H(n)&&H(s)?(n=this._state?this._state[3]:4150755663,s=this._state?this._state[2]:335903614):H(n)&&(n=s,s=0),this._state=new Int32Array([0,0,s>>>0,(1|(n||0))>>>0]),this._next(),er(this._state,this._state[0],this._state[1],e>>>0,t>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(e){this._state[0]=e[0],this._state[1]=e[1],this._state[2]=e[2],this._state[3]=1|e[3]}integer(e){if(!e)return this._next();if(((e>>>=0)&e-1)==0)return this._next()&e-1;let t=0,s=(-e>>>0)%e>>>0;for(t=this._next();t<s;t=this._next());return t%e}number(){return((67108863&this._next())*134217728+(134217727&this._next())*1)/9007199254740992}_next(){var e;let t,s,n,i;let r=this._state[0]>>>0,a=this._state[1]>>>0;e=this._state,t=(a>>>16)*32557>>>0,s=(65535&a)*19605>>>0,n=(65535&a)*32557>>>0,i=(a>>>16)*19605+((s>>>16)+(t>>>16))>>>0,(n=n+(s=s<<16>>>0)>>>0)>>>0<s>>>0&&(i=i+1>>>0),(n=n+(t=t<<16>>>0)>>>0)>>>0<t>>>0&&(i=i+1>>>0),i=(i=i+Math.imul(a,1481765933)>>>0)+Math.imul(r,1284865837)>>>0,e[0]=i,e[1]=n,er(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let o=r>>>18,l=(a>>>18|r<<14)>>>0;o=(o^r)>>>0;let c=((l=(l^a)>>>0)>>>27|o<<5)>>>0,u=r>>>27;return(c>>>u|c<<((-u>>>0&31)>>>0))>>>0}}function er(e,t,s,n,i){let r=t+n>>>0,a=s+i>>>0;a>>>0<s>>>0&&(r=r+1|0),e[0]=r,e[1]=a}let ea=Symbol.for("effect/Utils/YieldWrap");class eo{#e;constructor(e){this.#e=e}[ea](){return this.#e}}function el(e){if("object"==typeof e&&null!==e&&ea in e)return e[ea]();throw Error(es("yieldWrapGet"))}let ec=C("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),eu=(e=>{let t={[e]:e=>e()};return function(s){return t[e](s)}})("effect_internal_function"),ep=C(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),ed=Symbol.for("effect/Hash"),em=e=>{if(!0===ec.enabled)return 0;switch(typeof e){case"number":return ex(e);case"bigint":return ey(e.toString(10));case"boolean":case"symbol":return ey(String(e));case"string":return ey(e);case"undefined":return ey("undefined");case"function":case"object":if(null===e)return ey("null");if(e instanceof Date)return em(e.toISOString());if(eb(e))return e[ed]();return eh(e);default:throw Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},eh=e=>(ep.has(e)||ep.set(e,ex(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),ep.get(e)),ef=e=>t=>53*t^e,eg=e=>3221225471&e|e>>>1&1073741824,eb=e=>G(e,ed),ex=e=>{if(e!=e||e===1/0)return 0;let t=0|e;for(t!==e&&(t^=4294967295*e);e>4294967295;)t^=e/=4294967295;return eg(e)},ey=e=>{let t=5381,s=e.length;for(;s;)t=33*t^e.charCodeAt(--s);return eg(t)},ev=(e,t)=>{let s=12289;for(let n=0;n<t.length;n++)s^=R(ey(t[n]),ef(em(e[t[n]])));return eg(s)},e_=e=>ev(e,Object.keys(e)),ew=e=>{let t=6151;for(let s=0;s<e.length;s++)t=R(t,ef(em(e[s])));return eg(t)},eS=function(){if(1==arguments.length){let e=arguments[0];return function(t){return Object.defineProperty(e,ed,{value:()=>t,enumerable:!1}),t}}let e=arguments[0],t=arguments[1];return Object.defineProperty(e,ed,{value:()=>t,enumerable:!1}),t},ek=Symbol.for("effect/Equal");function eO(){return 1==arguments.length?e=>eT(e,arguments[0]):eT(arguments[0],arguments[1])}function eT(e,t){if(e===t)return!0;let s=typeof e;if(s!==typeof t)return!1;if("object"===s||"function"===s){if(null!==e&&null!==t){if(eE(e)&&eE(t))return!!(em(e)===em(t)&&e[ek](t))||!!ec.enabled&&!!ec.tester&&ec.tester(e,t);if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(ec.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((e,s)=>eT(e,t[s]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){let s=Object.keys(e),n=Object.keys(t);if(s.length===n.length){for(let n of s)if(!(n in t&&eT(e[n],t[n])))return!!ec.tester&&ec.tester(e,t);return!0}}return!!ec.tester&&ec.tester(e,t)}}return!!ec.enabled&&!!ec.tester&&ec.tester(e,t)}let eE=e=>G(e,ek),eI=()=>eO,eN=Symbol.for("nodejs.util.inspect.custom"),eR=e=>G(e,"toJSON")&&z(e.toJSON)&&0===e.toJSON.length?e.toJSON():Array.isArray(e)?e.map(eR):e,eA=e=>JSON.stringify(e,null,2),eF=(e,t=2)=>{try{return"object"==typeof e?ej(e,t):String(e)}catch(t){return String(e)}},ej=(e,t)=>{let s=[],n=JSON.stringify(e,(e,t)=>"object"==typeof t&&null!==t?s.includes(t)?void 0:s.push(t)&&t:t,t);return s=void 0,n},eC=(e,t)=>{switch(t.length){case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let s=e;for(let e=0,n=t.length;e<n;e++)s=t[e](s);return s}}},eM="Async",eL="Commit",e$="Failure",eP="OnFailure",eU="OnSuccess",eD="OnSuccessAndFailure",ez="Success",eB="Sync",eZ="UpdateRuntimeFlags",eq="While",eK="WithRuntime",eJ="Yield",eV="RevertFlags",eG=Symbol.for("effect/Effect"),eW=Symbol.for("effect/Stream"),eH=Symbol.for("effect/Sink"),eY=Symbol.for("effect/Channel"),eQ={_R:e=>e,_E:e=>e,_A:e=>e,_V:A()},eX={[eG]:eQ,[eW]:eQ,[eH]:{_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},[eY]:{_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},[ek](e){return this===e},[ed](){return eS(this,eh(this))},[Symbol.iterator](){return new en(new eo(this))},pipe(){return eC(this,arguments)}},e0={[ed](){return eS(this,e_(this))},[ek](e){let t=Object.keys(this),s=Object.keys(e);if(t.length!==s.length)return!1;for(let s of t)if(!(s in e&&eO(this[s],e[s])))return!1;return!0}},e1={...{...eX,_op:eL},...e0},e2=Symbol.for("effect/Option"),e5={...eX,[e2]:{_A:e=>e},[eN](){return this.toJSON()},toString(){return eA(this.toJSON())}},e3=Object.assign(Object.create(e5),{_tag:"Some",_op:"Some",[ek](e){return e6(e)&&e7(e)&&eO(this.value,e.value)},[ed](){return eS(this,ef(em(this._tag))(em(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:eR(this.value)}}}),e4=em("None"),e9=Object.assign(Object.create(e5),{_tag:"None",_op:"None",[ek]:e=>e6(e)&&e8(e),[ed]:()=>e4,toJSON(){return{_id:"Option",_tag:this._tag}}}),e6=e=>G(e,e2),e8=e=>"None"===e._tag,e7=e=>"Some"===e._tag,te=Object.create(e9),tt=e=>{let t=Object.create(e3);return t.value=e,t},ts=Symbol.for("effect/Context/Tag"),tn=Symbol.for("effect/STM"),ti={...eX,_tag:"Tag",_op:"Tag",[tn]:eQ,[ts]:{_Service:e=>e,_Identifier:e=>e},toString(){return eA(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[eN](){return this.toJSON()},of:e=>e,context(e){return tp(this,e)}},tr=Symbol.for("effect/Context"),ta={[tr]:{_Services:e=>e},[ek](e){if(tc(e)&&this.unsafeMap.size===e.unsafeMap.size){for(let t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!eO(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[ed](){return eS(this,ex(this.unsafeMap.size))},pipe(){return eC(this,arguments)},toString(){return eA(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(eR)}},[eN](){return this.toJSON()}},to=e=>{let t=Object.create(ta);return t.unsafeMap=e,t},tl=e=>{let t=Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){let s=e.stack.split("\n");if(s.length>2){let e=s[2].match(/at (.*)/);e&&(t.message=t.message+` (defined at ${e[1]})`)}}if(t.stack){let e=t.stack.split("\n");e.splice(1,3),t.stack=e.join("\n")}return t},tc=e=>G(e,tr),tu=to(new Map),tp=(e,t)=>to(new Map([[e.key,t]])),td=k(3,(e,t,s)=>{let n=new Map(e.unsafeMap);return n.set(t.key,s),to(n)}),tm=k(2,(e,t)=>{if(!e.unsafeMap.has(t.key))throw tl(t);return e.unsafeMap.get(t.key)}),th=k(2,(e,t)=>e.unsafeMap.has(t.key)?tt(e.unsafeMap.get(t.key)):te),tf=k(2,(e,t)=>{let s=new Map(e.unsafeMap);for(let[e,n]of t.unsafeMap)s.set(e,n);return to(s)}),tg=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let s=Error();Error.stackTraceLimit=t;let n=Object.create(ti);return Object.defineProperty(n,"stack",{get:()=>s.stack}),n.key=e,n},tb=e=>G(e,ts),tx=()=>tu,ty=e=>()=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let s=Error();function n(){}return Error.stackTraceLimit=t,Object.setPrototypeOf(n,ti),n.key=e,Object.defineProperty(n,"stack",{get:()=>s.stack}),n},tv=Symbol.for("effect/Either"),t_={...eX,[tv]:{_R:e=>e},[eN](){return this.toJSON()},toString(){return eA(this.toJSON())}},tw=Object.assign(Object.create(t_),{_tag:"Right",_op:"Right",[ek](e){return tk(e)&&tT(e)&&eO(this.right,e.right)},[ed](){return ef(em(this._tag))(em(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:eR(this.right)}}}),tS=Object.assign(Object.create(t_),{_tag:"Left",_op:"Left",[ek](e){return tk(e)&&tO(e)&&eO(this.left,e.left)},[ed](){return ef(em(this._tag))(em(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:eR(this.left)}}}),tk=e=>G(e,tv),tO=e=>"Left"===e._tag,tT=e=>"Right"===e._tag,tE=e=>{let t=Object.create(tS);return t.left=e,t},tI=e=>{let t=Object.create(tw);return t.right=e,t},tN=k(2,(e,t)=>e8(e)?tE(t()):tI(e.value)),tR=k(2,(e,{onLeft:t,onRight:s})=>tO(e)?t(e.left):s(e.right))({onLeft:O,onRight:O}),tA=k(2,(e,t)=>{if(tT(e))return e.right;throw t(e.left)}),tF=tA(()=>Error("getOrThrow called on a Left"));class tj{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new tj(this.self)}}let tC=Symbol.for("effect/Micro"),tM=Symbol.for("effect/Micro/runSymbol"),tL=e=>"object"==typeof e&&null!==e&&tC in e,t$=Symbol.for("effect/Micro/MicroCause"),tP={_E:O};class tU extends globalThis.Error{_tag;traces;[t$];constructor(e,t,s){let n,i,r;let a=`MicroCause.${e}`;if(t instanceof globalThis.Error){n=`(${a}) ${t.name}`;let e=(i=t.message).split("\n").length;r=t.stack?`(${a}) ${t.stack.split("\n").slice(0,e+3).join("\n")}`:`${n}: ${i}`}else n=a,i=eF(t,0),r=`${n}: ${i}`;s.length>0&&(r+=`
    ${s.join("\n    ")}`),super(i),this._tag=e,this.traces=s,this[t$]=tP,this.name=n,this.stack=r}pipe(){return eC(this,arguments)}toString(){return this.stack}[eN](){return this.stack}}class tD extends tU{error;constructor(e,t=[]){super("Fail",e,t),this.error=e}}let tz=(e,t=[])=>new tD(e,t);class tB extends tU{defect;constructor(e,t=[]){super("Die",e,t),this.defect=e}}let tZ=(e,t=[])=>new tB(e,t);class tq extends tU{constructor(e=[]){super("Interrupt","interrupted",e)}}let tK=(e=[])=>new tq(e),tJ=k(2,(e,t)=>{let s=[...e.traces,t];switch(e._tag){case"Die":return tZ(e.defect,s);case"Interrupt":return tK(s);case"Fail":return tz(e.error,s)}}),tV=tE(tK()),tG=e=>tE(tz(e)),tW=e=>tE(tZ(e)),tH=Symbol.for("effect/Micro/Env"),tY=Symbol.for("effect/Micro/EnvRef"),tQ={[tH]:{_R:O},pipe(){return eC(this,arguments)}},tX=e=>{let t=Object.create(tQ);return t.refs=e,t},t0=()=>{let e=new AbortController,t=Object.create(null);return t[t6.key]=e,t[t8.key]=e.signal,tX(t)},t1=k(2,(e,t)=>t.key in e.refs?e.refs[t.key]:t.initial),t2=k(3,(e,t,s)=>{let n=Object.assign(Object.create(null),e.refs);return n[t.key]=s,tX(n)}),t5=k(2,(e,t)=>tX(t(Object.assign(Object.create(null),e.refs)))),t3=e=>sa(function(t,s){s(tI(tm(t1(t,t7),e)))}),t4={[tY]:tY},t9=(e,t)=>C(e,()=>{let s=Object.create(t4);return s.key=e,s.initial=t(),s}),t6=t9("effect/Micro/currentAbortController",()=>void 0),t8=t9("effect/Micro/currentAbortSignal",()=>void 0),t7=t9("effect/Micro/currentContext",()=>tx()),se=t9("effect/Micro/currentMaxDepthBeforeYield",()=>2048),st=t9("effect/Micro/currentInterruptible",()=>!0),ss={...eX,_op:"Micro",[tC]:{_A:O,_E:O,_R:O},[Symbol.iterator](){return new tj(new eo(this))}},sn=C("effect/Micro/microDepthState",()=>({depth:0,maxDepthBeforeYield:se.initial})),si=e=>{let t=Object.create(ss);return t[tM]=e,t},sr=(e,t)=>si(function s(n,i){if(t&&!1!==n.refs[st.key]&&n.refs[t8.key].aborted)return i(tV);if(sn.depth++,1===sn.depth&&(sn.maxDepthBeforeYield=t1(n,se)),sn.depth>=sn.maxDepthBeforeYield)sy(()=>s(n,i));else try{e(n,i)}catch(e){i(tW(e))}sn.depth--}),sa=e=>sr(e,!0),so=e=>sa(function(t,s){s(e)}),sl=e=>so(tI(e)),sc=e=>so(tG(e)),su=e=>sa(function(t,s){s(tI(e()))}),sp=e=>sa(function(t,s){e()[tM](t,s)}),sd=sl(void 0),sm=e=>sa(function(t,s){let n,i=!1,r=e.length>1?new AbortController:void 0,a=t1(t,t8);function o(){n?l(sR(sS(n,so(tV)))):l(so(tV)),void 0!==r&&r.abort()}function l(e){i||(i=!0,a.removeEventListener("abort",o),e[tM](t,s))}n=void 0===r?e(l):e(l,r.signal),i||a.addEventListener("abort",o)}),sh=e=>sa(function(t,s){try{s(tI(e.try()))}catch(t){s(tG(e.catch(t)))}}),sf=e=>sm(function(t,s){try{e.try(s).then(e=>t(sl(e)),s=>t(sc(e.catch(s))))}catch(s){t(sc(e.catch(s)))}}),sg=C("effect/Micro/yieldState",()=>({tasks:[],working:!1})),sb=()=>{let e=sg.tasks;sg.tasks=[];for(let t=0,s=e.length;t<s;t++)e[t]()},sx="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0),sy=e=>{sg.tasks.push(e),sg.working||(sg.working=!0,sx(()=>{sg.working=!1,sb()}))},sv=(...e)=>sa(function(t,s){let n;let i=1===e.length?e[0]():e[1].call(e[0]),r=!1;!function e(){r=!0;try{let a=!0;for(;a;){let o=i.next(n);if(o.done)return s(tI(o.value));a=!1,el(o.value)[tM](t,function(t){"Left"===t._tag?s(t):(a=!0,n=t.right,r||e())})}}catch(e){s(tW(e))}r=!1}()}),s_=k(2,(e,t)=>sa(function(s,n){e[tM](s,function(e){n("Left"===e._tag?e:tI(t(e.right)))})})),sw=k(2,(e,t)=>sa(function(s,n){e[tM](s,function(e){if("Left"===e._tag)return n(e);t(e.right)[tM](s,n)})})),sS=k(2,(e,t)=>sa(function(s,n){e[tM](s,function(e){if("Left"===e._tag)return n(e);if(t1(s,t8).aborted)return n(tV);let i=tL(t)?t:"function"==typeof t?t(e.right):t;tL(i)?i[tM](s,n):n(tI(i))})})),sk=e=>s_(e,e=>void 0),sO=e=>sa(function(t,s){e[tM](t,function(e){s(tI(e))})}),sT=k(e=>tL(e[0]),(e,t,s)=>sw(e,e=>t(e)?sl(e):sc(s(e)))),sE=function(){let e=globalThis.Error.stackTraceLimit;globalThis.Error.stackTraceLimit=2;let t=new globalThis.Error;globalThis.Error.stackTraceLimit=e;let s=e=>s=>sr(function(n,i){s[tM](n,function(s){i("Left"===s._tag?tE(function(e,s){let n=t.stack;if(!n)return s;let i=n.split("\n")[2]?.trim().replace(/^at /,"");if(!i)return s;let r=i.match(/\((.*)\)$/);return tJ(s,`at ${e} (${r?r[1]:i})`)}(e,s.left)):s)})},!1);return 2==arguments.length?s(arguments[1])(arguments[0]):s(arguments[0])},sI=Symbol.for("effect/Micro/MicroScope");class sN{[sI];state={_tag:"Open",finalizers:new Set};constructor(){this[sI]=sI}unsafeAddFinalizer(e){"Open"===this.state._tag&&this.state.finalizers.add(e)}addFinalizer(e){return sp(()=>"Open"===this.state._tag?(this.state.finalizers.add(e),sd):e(this.state.exit))}unsafeRemoveFinalizer(e){"Open"===this.state._tag&&this.state.finalizers.delete(e)}close(e){return sp(()=>{if("Open"===this.state._tag){let t=Array.from(this.state.finalizers).reverse();return this.state={_tag:"Closed",exit:e},sw(sA(t,t=>sO(t(e))),e=>sk(so(Either.all(e))))}return sd})}get fork(){return su(()=>{let e=new sN;if("Closed"===this.state._tag)return e.state=this.state,e;function t(t){return e.close(t)}return this.state.finalizers.add(t),e.unsafeAddFinalizer(e=>su(()=>this.unsafeRemoveFinalizer(t))),e})}}let sR=e=>sr(function(t,s){let n=t5(t,function(e){return e[st.key]=!1,e[t8.key]=new AbortController().signal,e});e[tM](n,s)},!1),sA=(e,t,s)=>sa(function(n,i){let r;let a=s?.concurrency==="inherit"?t1(n,null):s?.concurrency??1,o="unbounded"===a?Number.POSITIVE_INFINITY:Math.max(1,a),[l,c]=function(e){let t=new AbortController,s=t1(e,t8);function n(){t.abort(),s.removeEventListener("abort",n)}return s.addEventListener("abort",n),[t5(e,function(e){return e[t6.key]=t,e[t8.key]=t.signal,e}),n]}(n),u=Array.from(e),p=u.length,d=s?.discard?void 0:Array(p),m=0,h=0,f=0,g=!1;!function e(){for(g=!0;h<o&&m<p;){let s=m,n=u[s];m++,h++;try{t(n,s)[tM](l,function(t){"Left"===t._tag?void 0===r&&(r=t,p=m,c()):void 0!==d&&(d[s]=t.right),f++,h--,f===p?i(r??Either.right(d)):!g&&h<o&&e()})}catch(e){r=tW(e),p=m,c()}}g=!1}()}),sF=function(){class e extends globalThis.Error{[tM](e,t){t(tG(this))}toString(){return this.message?`${this.name}: ${this.message}`:this.name}toJSON(){return{...this}}[eN](){let e=this.stack;return e?`${this.toString()}
${e.split("\n").slice(1).join("\n")}`:this.toString()}}return Object.assign(e.prototype,ss,e0),e}(),sj=class extends sF{constructor(e){super(),e&&Object.assign(this,e)}},sC=e=>{class t extends sj{_tag=e}return t.prototype.name=e,t};sC("TimeoutException");let sM=Object.create(null),sL=e=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(e?sM:globalThis),s$=new Proxy(sM,{get:(e,t)=>sL()[t]??sM[t],has:(e,t)=>t in sL()||t in sM,set:(e,t,s)=>(sL(!0)[t]=s,!0),deleteProperty(e,t){if(!t)return!1;let s=sL(!0);return delete s[t],!0},ownKeys:()=>Object.keys(sL(!0))}),sP="u">typeof process&&process.env&&"production"||"",sU=[["APPVEYOR"],["AWS_AMPLIFY","AWS_APP_ID",{ci:!0}],["AZURE_PIPELINES","SYSTEM_TEAMFOUNDATIONCOLLECTIONURI"],["AZURE_STATIC","INPUT_AZURE_STATIC_WEB_APPS_API_TOKEN"],["APPCIRCLE","AC_APPCIRCLE"],["BAMBOO","bamboo_planKey"],["BITBUCKET","BITBUCKET_COMMIT"],["BITRISE","BITRISE_IO"],["BUDDY","BUDDY_WORKSPACE_ID"],["BUILDKITE"],["CIRCLE","CIRCLECI"],["CIRRUS","CIRRUS_CI"],["CLOUDFLARE_PAGES","CF_PAGES",{ci:!0}],["CODEBUILD","CODEBUILD_BUILD_ARN"],["CODEFRESH","CF_BUILD_ID"],["DRONE"],["DRONE","DRONE_BUILD_EVENT"],["DSARI"],["GITHUB_ACTIONS"],["GITLAB","GITLAB_CI"],["GITLAB","CI_MERGE_REQUEST_ID"],["GOCD","GO_PIPELINE_LABEL"],["LAYERCI"],["HUDSON","HUDSON_URL"],["JENKINS","JENKINS_URL"],["MAGNUM"],["NETLIFY"],["NETLIFY","NETLIFY_LOCAL",{ci:!1}],["NEVERCODE"],["RENDER"],["SAIL","SAILCI"],["SEMAPHORE"],["SCREWDRIVER"],["SHIPPABLE"],["SOLANO","TDDIUM"],["STRIDER"],["TEAMCITY","TEAMCITY_VERSION"],["TRAVIS"],["VERCEL","NOW_BUILDER"],["VERCEL","VERCEL",{ci:!1}],["VERCEL","VERCEL_ENV",{ci:!1}],["APPCENTER","APPCENTER_BUILD_ID"],["CODESANDBOX","CODESANDBOX_SSE",{ci:!1}],["CODESANDBOX","CODESANDBOX_HOST",{ci:!1}],["STACKBLITZ"],["STORMKIT"],["CLEAVR"],["ZEABUR"],["CODESPHERE","CODESPHERE_APP_ID",{ci:!0}],["RAILWAY","RAILWAY_PROJECT_ID"],["RAILWAY","RAILWAY_SERVICE_ID"],["DENO-DEPLOY","DENO_DEPLOYMENT_ID"],["FIREBASE_APP_HOSTING","FIREBASE_APP_HOSTING",{ci:!0}]],sD=function(){if(globalThis.process?.env)for(let e of sU){let t=e[1]||e[0];if(globalThis.process?.env[t])return{name:e[0].toLowerCase(),...e[2]}}return globalThis.process?.env?.SHELL==="/bin/jsh"&&globalThis.process?.versions?.webcontainer?{name:"stackblitz",ci:!1}:{name:"",ci:!1}}();function sz(e){return!!e&&"false"!==e}sD.name;let sB=globalThis.process?.platform||"",sZ=(sz(s$.CI)||sD.ci,sz(globalThis.process?.stdout&&globalThis.process?.stdout.isTTY)),sq=(sz(s$.DEBUG),"test"===sP||sz(s$.TEST),"dev"===sP||"development"===sP),sK=(sz(s$.MINIMAL),/^win/i.test(sB)),sJ=(/^linux/i.test(sB),/^darwin/i.test(sB),!sz(s$.NO_COLOR)&&(sz(s$.FORCE_COLOR)||(sZ||sK)&&s$.TERM),(globalThis.process?.versions?.node||"").replace(/^v/,"")||null),sV=(sJ?.split(".")[0],globalThis.process||Object.create(null)),sG={versions:{}},sW=new Proxy(sV,{get:(e,t)=>"env"===t?s$:t in e?e[t]:t in sG?sG[t]:void 0}),sH=globalThis.process?.release?.name==="node",sY=!!globalThis.Bun||!!globalThis.process?.versions?.bun,sQ=!!globalThis.Deno,sX=!!globalThis.fastly,s0=[[!!globalThis.Netlify,"netlify"],[!!globalThis.EdgeRuntime,"edge-light"],[globalThis.navigator?.userAgent==="Cloudflare-Workers","workerd"],[sX,"fastly"],[sQ,"deno"],[sY,"bun"],[sH,"node"]],s1=function(){let e=s0.find(e=>e[0]);if(e)return{name:e[1]}}();s1?.name;let s2={"application/andrew-inset":{source:"iana",extensions:["ez"],compressible:null},"application/applixware":{source:"apache",extensions:["aw"],compressible:null},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"],compressible:null},"application/cdmi-container":{source:"iana",extensions:["cdmic"],compressible:null},"application/cdmi-domain":{source:"iana",extensions:["cdmid"],compressible:null},"application/cdmi-object":{source:"iana",extensions:["cdmio"],compressible:null},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"],compressible:null},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/cu-seeme":{source:"apache",extensions:["cu"],compressible:null},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dicom":{source:"iana",compressible:!1,extensions:["dcm"]},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dssc+der":{source:"iana",extensions:["dssc"],compressible:null},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/exi":{source:"iana",extensions:["exi"],compressible:null},"application/express":{source:"iana",extensions:["exp"],compressible:null},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/font-tdpfr":{source:"iana",extensions:["pfr"],compressible:null},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"],compressible:null},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/hyperstudio":{source:"iana",extensions:["stk"],compressible:null},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/ipfix":{source:"iana",extensions:["ipfix"],compressible:null},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/mac-binhex40":{source:"iana",extensions:["hqx"],compressible:null},"application/mac-compactpro":{source:"apache",extensions:["cpt"],compressible:null},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"],compressible:null},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"],compressible:null},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mbox":{source:"iana",extensions:["mbox"],compressible:null},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/mp21":{source:"iana",extensions:["m21","mp21"],compressible:null},"application/mp4":{source:"iana",extensions:["mp4s","m4p"],compressible:null},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mxf":{source:"iana",extensions:["mxf"],compressible:null},"application/n-quads":{source:"iana",extensions:["nq"],compressible:null},"application/n-triples":{source:"iana",extensions:["nt"],compressible:null},"application/node":{source:"iana",extensions:["cjs"],compressible:null},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"],compressible:null},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"],compressible:null},"application/oxps":{source:"iana",extensions:["oxps"],compressible:null},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"],compressible:null},"application/pgp-signature":{source:"iana",extensions:["asc","sig"],compressible:null},"application/pics-rules":{source:"apache",extensions:["prf"],compressible:null},"application/pkcs10":{source:"iana",extensions:["p10"],compressible:null},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"],compressible:null},"application/pkcs7-signature":{source:"iana",extensions:["p7s"],compressible:null},"application/pkcs8":{source:"iana",extensions:["p8"],compressible:null},"application/pkix-attr-cert":{source:"iana",extensions:["ac"],compressible:null},"application/pkix-cert":{source:"iana",extensions:["cer"],compressible:null},"application/pkix-crl":{source:"iana",extensions:["crl"],compressible:null},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"],compressible:null},"application/pkixcmp":{source:"iana",extensions:["pki"],compressible:null},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.cww":{source:"iana",extensions:["cww"],compressible:null},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"],compressible:null},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"],compressible:null},"application/rpki-manifest":{source:"iana",extensions:["mft"],compressible:null},"application/rpki-roa":{source:"iana",extensions:["roa"],compressible:null},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scvp-cv-request":{source:"iana",extensions:["scq"],compressible:null},"application/scvp-cv-response":{source:"iana",extensions:["scs"],compressible:null},"application/scvp-vp-request":{source:"iana",extensions:["spq"],compressible:null},"application/scvp-vp-response":{source:"iana",extensions:["spp"],compressible:null},"application/sdp":{source:"iana",extensions:["sdp"],compressible:null},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/set-payment-initiation":{source:"iana",extensions:["setpay"],compressible:null},"application/set-registration-initiation":{source:"iana",extensions:["setreg"],compressible:null},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"],compressible:null},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/sparql-query":{source:"iana",extensions:["rq"],compressible:null},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/srgs":{source:"iana",extensions:["gram"],compressible:null},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamped-data":{source:"iana",extensions:["tsd"],compressible:null},"application/trig":{source:"iana",extensions:["trig"],compressible:null},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"],compressible:null},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"],compressible:null},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"],compressible:null},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"],compressible:null},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"],compressible:null},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"],compressible:null},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"],compressible:null},"application/vnd.acucobol":{source:"iana",extensions:["acu"],compressible:null},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"],compressible:null},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"],compressible:null},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"],compressible:null},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"],compressible:null},"application/vnd.age":{source:"iana",extensions:["age"],compressible:null},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"],compressible:null},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"],compressible:null},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"],compressible:null},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"],compressible:null},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"],compressible:null},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"],compressible:null},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"],compressible:null},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"],compressible:null},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"],compressible:null},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"],compressible:null},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"],compressible:null},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"],compressible:null},"application/vnd.apple.pages":{source:"iana",extensions:["pages"],compressible:null},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"],compressible:null},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"],compressible:null},"application/vnd.audiograph":{source:"iana",extensions:["aep"],compressible:null},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"],compressible:null},"application/vnd.bmi":{source:"iana",extensions:["bmi"],compressible:null},"application/vnd.businessobjects":{source:"iana",extensions:["rep"],compressible:null},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"],compressible:null},"application/vnd.cinderella":{source:"iana",extensions:["cdy"],compressible:null},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"],compressible:null},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"],compressible:null},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"],compressible:null},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"],compressible:null},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"],compressible:null},"application/vnd.commonspace":{source:"iana",extensions:["csp"],compressible:null},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"],compressible:null},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"],compressible:null},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"],compressible:null},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"],compressible:null},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"],compressible:null},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"],compressible:null},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"],compressible:null},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"],compressible:null},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"],compressible:null},"application/vnd.curl.car":{source:"apache",extensions:["car"],compressible:null},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"],compressible:null},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"],compressible:null},"application/vnd.dbf":{source:"iana",extensions:["dbf"],compressible:null},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"],compressible:null},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"],compressible:null},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"],compressible:null},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"],compressible:null},"application/vnd.dna":{source:"iana",extensions:["dna"],compressible:null},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"],compressible:null},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"],compressible:null},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"],compressible:null},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"],compressible:null},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"],compressible:null},"application/vnd.dvb.service":{source:"iana",extensions:["svc"],compressible:null},"application/vnd.dynageo":{source:"iana",extensions:["geo"],compressible:null},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"],compressible:null},"application/vnd.enliven":{source:"iana",extensions:["nml"],compressible:null},"application/vnd.epson.esf":{source:"iana",extensions:["esf"],compressible:null},"application/vnd.epson.msf":{source:"iana",extensions:["msf"],compressible:null},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"],compressible:null},"application/vnd.epson.salt":{source:"iana",extensions:["slt"],compressible:null},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"],compressible:null},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"],compressible:null},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"],compressible:null},"application/vnd.fdf":{source:"iana",extensions:["fdf"],compressible:null},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"],compressible:null},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"],compressible:null},"application/vnd.flographit":{source:"iana",extensions:["gph"],compressible:null},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"],compressible:null},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"],compressible:null},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"],compressible:null},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"],compressible:null},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"],compressible:null},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"],compressible:null},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"],compressible:null},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"],compressible:null},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"],compressible:null},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"],compressible:null},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"],compressible:null},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"],compressible:null},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"],compressible:null},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"],compressible:null},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"],compressible:null},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"],compressible:null},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"],compressible:null},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"],compressible:null},"application/vnd.geonext":{source:"iana",extensions:["gxt"],compressible:null},"application/vnd.geoplan":{source:"iana",extensions:["g2w"],compressible:null},"application/vnd.geospace":{source:"iana",extensions:["g3w"],compressible:null},"application/vnd.gmx":{source:"iana",extensions:["gmx"],compressible:null},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"],compressible:null},"application/vnd.groove-account":{source:"iana",extensions:["gac"],compressible:null},"application/vnd.groove-help":{source:"iana",extensions:["ghf"],compressible:null},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"],compressible:null},"application/vnd.groove-injector":{source:"iana",extensions:["grv"],compressible:null},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"],compressible:null},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"],compressible:null},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"],compressible:null},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"],compressible:null},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"],compressible:null},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"],compressible:null},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"],compressible:null},"application/vnd.hp-hps":{source:"iana",extensions:["hps"],compressible:null},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"],compressible:null},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"],compressible:null},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"],compressible:null},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"],compressible:null},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"],compressible:null},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"],compressible:null},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"],compressible:null},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"],compressible:null},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"],compressible:null},"application/vnd.igloader":{source:"iana",extensions:["igl"],compressible:null},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"],compressible:null},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"],compressible:null},"application/vnd.insors.igm":{source:"iana",extensions:["igm"],compressible:null},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"],compressible:null},"application/vnd.intergeo":{source:"iana",extensions:["i2g"],compressible:null},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"],compressible:null},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"],compressible:null},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"],compressible:null},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"],compressible:null},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"],compressible:null},"application/vnd.jam":{source:"iana",extensions:["jam"],compressible:null},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"],compressible:null},"application/vnd.jisp":{source:"iana",extensions:["jisp"],compressible:null},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"],compressible:null},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"],compressible:null},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"],compressible:null},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"],compressible:null},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"],compressible:null},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"],compressible:null},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"],compressible:null},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"],compressible:null},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"],compressible:null},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"],compressible:null},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"],compressible:null},"application/vnd.kidspiration":{source:"iana",extensions:["kia"],compressible:null},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"],compressible:null},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"],compressible:null},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"],compressible:null},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"],compressible:null},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"],compressible:null},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"],compressible:null},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"],compressible:null},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"],compressible:null},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"],compressible:null},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"],compressible:null},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"],compressible:null},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"],compressible:null},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"],compressible:null},"application/vnd.mcd":{source:"iana",extensions:["mcd"],compressible:null},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"],compressible:null},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"],compressible:null},"application/vnd.mfer":{source:"iana",extensions:["mwf"],compressible:null},"application/vnd.mfmp":{source:"iana",extensions:["mfm"],compressible:null},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"],compressible:null},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"],compressible:null},"application/vnd.mif":{source:"iana",extensions:["mif"],compressible:null},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"],compressible:null},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"],compressible:null},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"],compressible:null},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"],compressible:null},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"],compressible:null},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"],compressible:null},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"],compressible:null},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"],compressible:null},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"],compressible:null},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"],compressible:null},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"],compressible:null},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"],compressible:null},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"],compressible:null},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"],compressible:null},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"],compressible:null},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"],compressible:null},"application/vnd.ms-ims":{source:"iana",extensions:["ims"],compressible:null},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"],compressible:null},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"],compressible:null},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"],compressible:null},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"],compressible:null},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"],compressible:null},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"],compressible:null},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"],compressible:null},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"],compressible:null},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"],compressible:null},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"],compressible:null},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"],compressible:null},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"],compressible:null},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"],compressible:null},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"],compressible:null},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.mseq":{source:"iana",extensions:["mseq"],compressible:null},"application/vnd.musician":{source:"iana",extensions:["mus"],compressible:null},"application/vnd.muvee.style":{source:"iana",extensions:["msty"],compressible:null},"application/vnd.mynfc":{source:"iana",extensions:["taglet"],compressible:null},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"],compressible:null},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"],compressible:null},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"],compressible:null},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"],compressible:null},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"],compressible:null},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"],compressible:null},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"],compressible:null},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"],compressible:null},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"],compressible:null},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"],compressible:null},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"],compressible:null},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"],compressible:null},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"],compressible:null},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"],compressible:null},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"],compressible:null},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"],compressible:null},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"],compressible:null},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"],compressible:null},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"],compressible:null},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"],compressible:null},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"],compressible:null},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"],compressible:null},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"],compressible:null},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"],compressible:null},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"],compressible:null},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"],compressible:null},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"],compressible:null},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"],compressible:null},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"],compressible:null},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"],compressible:null},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"],compressible:null},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"],compressible:null},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"],compressible:null},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"],compressible:null},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"],compressible:null},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"],compressible:null},"application/vnd.pawaafile":{source:"iana",extensions:["paw"],compressible:null},"application/vnd.pg.format":{source:"iana",extensions:["str"],compressible:null},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"],compressible:null},"application/vnd.picsel":{source:"iana",extensions:["efif"],compressible:null},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"],compressible:null},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"],compressible:null},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"],compressible:null},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"],compressible:null},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"],compressible:null},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"],compressible:null},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"],compressible:null},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"],compressible:null},"application/vnd.rar":{source:"iana",extensions:["rar"],compressible:null},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"],compressible:null},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"],compressible:null},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"],compressible:null},"application/vnd.rim.cod":{source:"apache",extensions:["cod"],compressible:null},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"],compressible:null},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"],compressible:null},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"],compressible:null},"application/vnd.seemail":{source:"iana",extensions:["see"],compressible:null},"application/vnd.sema":{source:"iana",extensions:["sema"],compressible:null},"application/vnd.semd":{source:"iana",extensions:["semd"],compressible:null},"application/vnd.semf":{source:"iana",extensions:["semf"],compressible:null},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"],compressible:null},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"],compressible:null},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"],compressible:null},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"],compressible:null},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"],compressible:null},"application/vnd.smaf":{source:"iana",extensions:["mmf"],compressible:null},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"],compressible:null},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"],compressible:null},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"],compressible:null},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"],compressible:null},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"],compressible:null},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"],compressible:null},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"],compressible:null},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"],compressible:null},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"],compressible:null},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"],compressible:null},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"],compressible:null},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"],compressible:null},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"],compressible:null},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"],compressible:null},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"],compressible:null},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"],compressible:null},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"],compressible:null},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"],compressible:null},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"],compressible:null},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"],compressible:null},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"],compressible:null},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"],compressible:null},"application/vnd.svd":{source:"iana",extensions:["svd"],compressible:null},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"],compressible:null},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"],compressible:null},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"],compressible:null},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"],compressible:null},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"],compressible:null},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"],compressible:null},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"],compressible:null},"application/vnd.trueapp":{source:"iana",extensions:["tra"],compressible:null},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"],compressible:null},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"],compressible:null},"application/vnd.umajin":{source:"iana",extensions:["umj"],compressible:null},"application/vnd.unity":{source:"iana",extensions:["unityweb"],compressible:null},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.vcx":{source:"iana",extensions:["vcx"],compressible:null},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"],compressible:null},"application/vnd.visionary":{source:"iana",extensions:["vis"],compressible:null},"application/vnd.vsf":{source:"iana",extensions:["vsf"],compressible:null},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"],compressible:null},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"],compressible:null},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"],compressible:null},"application/vnd.webturbo":{source:"iana",extensions:["wtb"],compressible:null},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"],compressible:null},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"],compressible:null},"application/vnd.wqd":{source:"iana",extensions:["wqd"],compressible:null},"application/vnd.wt.stf":{source:"iana",extensions:["stf"],compressible:null},"application/vnd.xara":{source:"iana",extensions:["xar"],compressible:null},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"],compressible:null},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"],compressible:null},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"],compressible:null},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"],compressible:null},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"],compressible:null},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"],compressible:null},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"],compressible:null},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"],compressible:null},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"],compressible:null},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/widget":{source:"iana",extensions:["wgt"],compressible:null},"application/winhlp":{source:"apache",extensions:["hlp"],compressible:null},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"],compressible:null},"application/x-ace-compressed":{source:"apache",extensions:["ace"],compressible:null},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"],compressible:null},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"],compressible:null},"application/x-authorware-map":{source:"apache",extensions:["aam"],compressible:null},"application/x-authorware-seg":{source:"apache",extensions:["aas"],compressible:null},"application/x-bcpio":{source:"apache",extensions:["bcpio"],compressible:null},"application/x-bittorrent":{source:"apache",extensions:["torrent"],compressible:null},"application/x-blorb":{source:"apache",extensions:["blb","blorb"],compressible:null},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"],compressible:null},"application/x-cdlink":{source:"apache",extensions:["vcd"],compressible:null},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"],compressible:null},"application/x-chat":{source:"apache",extensions:["chat"],compressible:null},"application/x-chess-pgn":{source:"apache",extensions:["pgn"],compressible:null},"application/x-cocoa":{source:"nginx",extensions:["cco"],compressible:null},"application/x-conference":{source:"apache",extensions:["nsc"],compressible:null},"application/x-cpio":{source:"apache",extensions:["cpio"],compressible:null},"application/x-csh":{source:"apache",extensions:["csh"],compressible:null},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"],compressible:null},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"],compressible:null},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],compressible:null},"application/x-doom":{source:"apache",extensions:["wad"],compressible:null},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"],compressible:null},"application/x-eva":{source:"apache",extensions:["eva"],compressible:null},"application/x-font-bdf":{source:"apache",extensions:["bdf"],compressible:null},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"],compressible:null},"application/x-font-linux-psf":{source:"apache",extensions:["psf"],compressible:null},"application/x-font-pcf":{source:"apache",extensions:["pcf"],compressible:null},"application/x-font-snf":{source:"apache",extensions:["snf"],compressible:null},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"],compressible:null},"application/x-freearc":{source:"apache",extensions:["arc"],compressible:null},"application/x-futuresplash":{source:"apache",extensions:["spl"],compressible:null},"application/x-gca-compressed":{source:"apache",extensions:["gca"],compressible:null},"application/x-glulx":{source:"apache",extensions:["ulx"],compressible:null},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"],compressible:null},"application/x-gramps-xml":{source:"apache",extensions:["gramps"],compressible:null},"application/x-gtar":{source:"apache",extensions:["gtar"],compressible:null},"application/x-hdf":{source:"apache",extensions:["hdf"],compressible:null},"application/x-install-instructions":{source:"apache",extensions:["install"],compressible:null},"application/x-iso9660-image":{source:"apache",extensions:["iso"],compressible:null},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"],compressible:null},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"],compressible:null},"application/x-makeself":{source:"nginx",extensions:["run"],compressible:null},"application/x-mie":{source:"apache",extensions:["mie"],compressible:null},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"],compressible:null},"application/x-ms-application":{source:"apache",extensions:["application"],compressible:null},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"],compressible:null},"application/x-ms-wmd":{source:"apache",extensions:["wmd"],compressible:null},"application/x-ms-wmz":{source:"apache",extensions:["wmz"],compressible:null},"application/x-ms-xbap":{source:"apache",extensions:["xbap"],compressible:null},"application/x-msaccess":{source:"apache",extensions:["mdb"],compressible:null},"application/x-msbinder":{source:"apache",extensions:["obd"],compressible:null},"application/x-mscardfile":{source:"apache",extensions:["crd"],compressible:null},"application/x-msclip":{source:"apache",extensions:["clp"],compressible:null},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"],compressible:null},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"],compressible:null},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"],compressible:null},"application/x-msmoney":{source:"apache",extensions:["mny"],compressible:null},"application/x-mspublisher":{source:"apache",extensions:["pub"],compressible:null},"application/x-msschedule":{source:"apache",extensions:["scd"],compressible:null},"application/x-msterminal":{source:"apache",extensions:["trm"],compressible:null},"application/x-mswrite":{source:"apache",extensions:["wri"],compressible:null},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"],compressible:null},"application/x-nzb":{source:"apache",extensions:["nzb"],compressible:null},"application/x-perl":{source:"nginx",extensions:["pl","pm"],compressible:null},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"],compressible:null},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"],compressible:null},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"],compressible:null},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"],compressible:null},"application/x-research-info-systems":{source:"apache",extensions:["ris"],compressible:null},"application/x-sea":{source:"nginx",extensions:["sea"],compressible:null},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"],compressible:null},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"],compressible:null},"application/x-sql":{source:"apache",extensions:["sql"],compressible:null},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"],compressible:null},"application/x-subrip":{source:"apache",extensions:["srt"],compressible:null},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"],compressible:null},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"],compressible:null},"application/x-t3vm-image":{source:"apache",extensions:["t3"],compressible:null},"application/x-tads":{source:"apache",extensions:["gam"],compressible:null},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"],compressible:null},"application/x-tex":{source:"apache",extensions:["tex"],compressible:null},"application/x-tex-tfm":{source:"apache",extensions:["tfm"],compressible:null},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"],compressible:null},"application/x-tgif":{source:"apache",extensions:["obj"],compressible:null},"application/x-ustar":{source:"apache",extensions:["ustar"],compressible:null},"application/x-wais-source":{source:"apache",extensions:["src"],compressible:null},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"],compressible:null},"application/x-xfig":{source:"apache",extensions:["fig"],compressible:null},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"],compressible:null},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"],compressible:null},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"],compressible:null},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/adpcm":{source:"apache",extensions:["adp"],compressible:null},"audio/amr":{source:"iana",extensions:["amr"],compressible:null},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"],compressible:null},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"],compressible:null},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/s3m":{source:"apache",extensions:["s3m"],compressible:null},"audio/silk":{source:"apache",extensions:["sil"],compressible:null},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"],compressible:null},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"],compressible:null},"audio/vnd.dra":{source:"iana",extensions:["dra"],compressible:null},"audio/vnd.dts":{source:"iana",extensions:["dts"],compressible:null},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"],compressible:null},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"],compressible:null},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"],compressible:null},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"],compressible:null},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"],compressible:null},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"],compressible:null},"audio/vnd.rip":{source:"iana",extensions:["rip"],compressible:null},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"],compressible:null},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"],compressible:null},"audio/x-m4a":{source:"nginx",extensions:["m4a"],compressible:null},"audio/x-matroska":{source:"apache",extensions:["mka"],compressible:null},"audio/x-mpegurl":{source:"apache",extensions:["m3u"],compressible:null},"audio/x-ms-wax":{source:"apache",extensions:["wax"],compressible:null},"audio/x-ms-wma":{source:"apache",extensions:["wma"],compressible:null},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"],compressible:null},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"],compressible:null},"audio/x-realaudio":{source:"nginx",extensions:["ra"],compressible:null},"audio/x-wav":{source:"apache",extensions:["wav"],compressible:null},"audio/x-gsm":{source:"apache",extensions:["gsm"],compressible:null},"audio/xm":{source:"apache",extensions:["xm"],compressible:null},"chemical/x-cdx":{source:"apache",extensions:["cdx"],compressible:null},"chemical/x-cif":{source:"apache",extensions:["cif"],compressible:null},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"],compressible:null},"chemical/x-cml":{source:"apache",extensions:["cml"],compressible:null},"chemical/x-csml":{source:"apache",extensions:["csml"],compressible:null},"chemical/x-xyz":{source:"apache",extensions:["xyz"],compressible:null},"font/collection":{source:"iana",extensions:["ttc"],compressible:null},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"],compressible:null},"font/woff2":{source:"iana",extensions:["woff2"],compressible:null},"image/aces":{source:"iana",extensions:["exr"],compressible:null},"image/avci":{source:"iana",extensions:["avci"],compressible:null},"image/avcs":{source:"iana",extensions:["avcs"],compressible:null},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"],compressible:null},"image/dicom-rle":{source:"iana",extensions:["drle"],compressible:null},"image/emf":{source:"iana",extensions:["emf"],compressible:null},"image/fits":{source:"iana",extensions:["fits"],compressible:null},"image/g3fax":{source:"iana",extensions:["g3"],compressible:null},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"],compressible:null},"image/heic-sequence":{source:"iana",extensions:["heics"],compressible:null},"image/heif":{source:"iana",extensions:["heif"],compressible:null},"image/heif-sequence":{source:"iana",extensions:["heifs"],compressible:null},"image/hej2k":{source:"iana",extensions:["hej2"],compressible:null},"image/hsj2":{source:"iana",extensions:["hsj2"],compressible:null},"image/ief":{source:"iana",extensions:["ief"],compressible:null},"image/jls":{source:"iana",extensions:["jls"],compressible:null},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe","jfif","pjpeg","pjp"]},"image/jph":{source:"iana",extensions:["jph"],compressible:null},"image/jphc":{source:"iana",extensions:["jhc"],compressible:null},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"],compressible:null},"image/jxra":{source:"iana",extensions:["jxra"],compressible:null},"image/jxrs":{source:"iana",extensions:["jxrs"],compressible:null},"image/jxs":{source:"iana",extensions:["jxs"],compressible:null},"image/jxsc":{source:"iana",extensions:["jxsc"],compressible:null},"image/jxsi":{source:"iana",extensions:["jxsi"],compressible:null},"image/jxss":{source:"iana",extensions:["jxss"],compressible:null},"image/ktx":{source:"iana",extensions:["ktx"],compressible:null},"image/ktx2":{source:"iana",extensions:["ktx2"],compressible:null},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"],compressible:null},"image/prs.pti":{source:"iana",extensions:["pti"],compressible:null},"image/sgi":{source:"apache",extensions:["sgi"],compressible:null},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"],compressible:null},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"],compressible:null},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"],compressible:null},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"],compressible:null},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"],compressible:null},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"],compressible:null},"image/vnd.dwg":{source:"iana",extensions:["dwg"],compressible:null},"image/vnd.dxf":{source:"iana",extensions:["dxf"],compressible:null},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"],compressible:null},"image/vnd.fpx":{source:"iana",extensions:["fpx"],compressible:null},"image/vnd.fst":{source:"iana",extensions:["fst"],compressible:null},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"],compressible:null},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"],compressible:null},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"],compressible:null},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"],compressible:null},"image/vnd.net-fpx":{source:"iana",extensions:["npx"],compressible:null},"image/vnd.pco.b16":{source:"iana",extensions:["b16"],compressible:null},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"],compressible:null},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"],compressible:null},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"],compressible:null},"image/vnd.xiff":{source:"iana",extensions:["xif"],compressible:null},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"],compressible:null},"image/webp":{source:"apache",extensions:["webp"],compressible:null},"image/wmf":{source:"iana",extensions:["wmf"],compressible:null},"image/x-3ds":{source:"apache",extensions:["3ds"],compressible:null},"image/x-cmu-raster":{source:"apache",extensions:["ras"],compressible:null},"image/x-cmx":{source:"apache",extensions:["cmx"],compressible:null},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"],compressible:null},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"],compressible:null},"image/x-mrsid-image":{source:"apache",extensions:["sid"],compressible:null},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"],compressible:null},"image/x-pict":{source:"apache",extensions:["pic","pct"],compressible:null},"image/x-portable-anymap":{source:"apache",extensions:["pnm"],compressible:null},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"],compressible:null},"image/x-portable-graymap":{source:"apache",extensions:["pgm"],compressible:null},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"],compressible:null},"image/x-rgb":{source:"apache",extensions:["rgb"],compressible:null},"image/x-tga":{source:"apache",extensions:["tga"],compressible:null},"image/x-xbitmap":{source:"apache",extensions:["xbm"],compressible:null},"image/x-xpixmap":{source:"apache",extensions:["xpm"],compressible:null},"image/x-xwindowdump":{source:"apache",extensions:["xwd"],compressible:null},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"],compressible:null},"message/global":{source:"iana",extensions:["u8msg"],compressible:null},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"],compressible:null},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"],compressible:null},"message/global-headers":{source:"iana",extensions:["u8hdr"],compressible:null},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"],compressible:null},"model/3mf":{source:"iana",extensions:["3mf"],compressible:null},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"],compressible:null},"model/obj":{source:"iana",extensions:["obj"],compressible:null},"model/step":{source:"iana",compressible:!1,extensions:[".p21",".stp",".step",".stpnc",".210"]},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"],compressible:null},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"],compressible:null},"model/vnd.gdl":{source:"iana",extensions:["gdl"],compressible:null},"model/vnd.gtw":{source:"iana",extensions:["gtw"],compressible:null},"model/vnd.mts":{source:"iana",extensions:["mts"],compressible:null},"model/vnd.opengex":{source:"iana",extensions:["ogex"],compressible:null},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"],compressible:null},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"],compressible:null},"model/vnd.sap.vds":{source:"iana",extensions:["vds"],compressible:null},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"],compressible:null},"model/vnd.vtu":{source:"iana",extensions:["vtu"],compressible:null},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"],compressible:null},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"],compressible:null},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"],compressible:null},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"],compressible:null},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/prs.lines.tag":{source:"iana",extensions:["dsc"],compressible:null},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/sgml":{source:"iana",extensions:["sgml","sgm"],compressible:null},"text/shex":{source:"iana",extensions:["shex"],compressible:null},"text/spdx":{source:"iana",extensions:["spdx"],compressible:null},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"],compressible:null},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"],compressible:null},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.curl":{source:"iana",extensions:["curl"],compressible:null},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"],compressible:null},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"],compressible:null},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"],compressible:null},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"],compressible:null},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"],compressible:null},"text/vnd.fly":{source:"iana",extensions:["fly"],compressible:null},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"],compressible:null},"text/vnd.graphviz":{source:"iana",extensions:["gv"],compressible:null},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"],compressible:null},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"],compressible:null},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"],compressible:null},"text/vnd.wap.wml":{source:"iana",extensions:["wml"],compressible:null},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"],compressible:null},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"],compressible:null},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"],compressible:null},"text/x-component":{source:"nginx",extensions:["htc"],compressible:null},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"],compressible:null},"text/x-java-source":{source:"apache",extensions:["java"],compressible:null},"text/x-nfo":{source:"apache",extensions:["nfo"],compressible:null},"text/x-opml":{source:"apache",extensions:["opml"],compressible:null},"text/x-pascal":{source:"apache",extensions:["p","pas"],compressible:null},"text/x-setext":{source:"apache",extensions:["etx"],compressible:null},"text/x-sfv":{source:"apache",extensions:["sfv"],compressible:null},"text/x-uuencode":{source:"apache",extensions:["uu"],compressible:null},"text/x-vcalendar":{source:"apache",extensions:["vcs"],compressible:null},"text/x-vcard":{source:"apache",extensions:["vcf"],compressible:null},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"],compressible:null},"video/3gpp2":{source:"iana",extensions:["3g2"],compressible:null},"video/h261":{source:"iana",extensions:["h261"],compressible:null},"video/h263":{source:"iana",extensions:["h263"],compressible:null},"video/h264":{source:"iana",extensions:["h264"],compressible:null},"video/iso.segment":{source:"iana",extensions:["m4s"],compressible:null},"video/jpeg":{source:"iana",extensions:["jpgv"],compressible:null},"video/jpm":{source:"apache",extensions:["jpm","jpgm"],compressible:null},"video/mj2":{source:"iana",extensions:["mj2","mjp2"],compressible:null},"video/mp2t":{source:"iana",extensions:["ts"],compressible:null},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"],compressible:null},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"],compressible:null},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"],compressible:null},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"],compressible:null},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"],compressible:null},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"],compressible:null},"video/vnd.fvt":{source:"iana",extensions:["fvt"],compressible:null},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"],compressible:null},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"],compressible:null},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"],compressible:null},"video/vnd.vivo":{source:"iana",extensions:["viv"],compressible:null},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"],compressible:null},"video/x-fli":{source:"apache",extensions:["fli"],compressible:null},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"],compressible:null},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"],compressible:null},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"],compressible:null},"video/x-ms-vob":{source:"apache",extensions:["vob"],compressible:null},"video/x-ms-wm":{source:"apache",extensions:["wm"],compressible:null},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"],compressible:null},"video/x-ms-wvx":{source:"apache",extensions:["wvx"],compressible:null},"video/x-msvideo":{source:"apache",extensions:["avi"],compressible:null},"video/x-sgi-movie":{source:"apache",extensions:["movie"],compressible:null},"video/x-smv":{source:"apache",extensions:["smv"],compressible:null},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"],compressible:null}},s5={},s3={},s4=!1,s9=Symbol.for("effect/Encoding/errors/Decode"),s6=(e,t)=>{let s={_tag:"DecodeException",[s9]:s9,input:e};return L(t)&&(s.message=t),s},s8=new TextEncoder;function s7(e){if(e>=nt.length)throw TypeError(`Invalid character ${String.fromCharCode(e)}`);let t=nt[e];if(255===t)throw TypeError(`Invalid character ${String.fromCharCode(e)}`);return t}let ne=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],nt=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],ns=e=>{let t="";for(let s=0;s<e.length;++s)t+=ni[e[s]];return t},nn=e=>{let t=new TextEncoder().encode(e);if(t.length%2!=0)return tE(s6(e,`Length must be a multiple of 2, but is ${t.length}`));try{let e=t.length/2,s=new Uint8Array(e);for(let n=0;n<e;n++){let e=nr(t[2*n]),i=nr(t[2*n+1]);s[n]=e<<4|i}return tI(s)}catch(t){return tE(s6(e,t instanceof Error?t.message:"Invalid input"))}},ni=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],nr=e=>{if(48<=e&&e<=57)return e-48;if(97<=e&&e<=102)return e-97+10;if(65<=e&&e<=70)return e-65+10;throw TypeError("Invalid input")},na=e=>"string"==typeof e?ns(s8.encode(e)):ns(e),no=e=>nn(e);class nl extends sC("InvalidRouteConfig"){constructor(e,t){super({reason:t?`Expected route config to have a ${t} for key ${e} but none was found.`:`Encountered an invalid route config during backfilling. ${e} was not found.`})}}class nc extends sC("UnknownFileType"){constructor(e){super({reason:`Could not determine type for ${e}`})}}class nu extends sC("InvalidFileType"){constructor(e,t){super({reason:`File type ${e} not allowed for ${t}`})}}class np extends sC("InvalidFileSize"){constructor(e){super({reason:`Invalid file size: ${e}`})}}class nd extends sC("InvalidURL"){constructor(e){super({reason:`Failed to parse '${e}' as a URL.`})}}class nm extends sC("RetryError"){}class nh extends sC("FetchError"){}class nf extends sC("InvalidJson"){}class ng extends sC("BadRequestError"){getMessage(){return ee(this.json)&&"string"==typeof this.json.message?this.json.message:this.message}}function nb(e){return"image"===e?"4MB":"video"===e?"16MB":"audio"===e||"blob"===e?"8MB":"pdf"===e?"4MB":"text"===e?"64KB":"4MB"}let nx=e=>{if(Array.isArray(e))return sl(e.reduce((e,t)=>(e[t]={maxFileSize:nb(t),maxFileCount:1,minFileCount:1,contentDisposition:"inline"},e),{}));let t={};for(let s of nk(e)){let n=e[s];if(!n)return sc(new nl(s));let i={maxFileSize:nb(s),maxFileCount:1,minFileCount:1,contentDisposition:"inline"};t[s]={...i,...n}}return sl(JSON.parse(JSON.stringify(t,nE)))},ny=(e,t)=>{let s=function(e){if(!e||"string"!=typeof e)return!1;let t=(function(e){let t=e.lastIndexOf(".");return t<0?"":e.substring(t)})("x."+e).toLowerCase().substring(1);return!!t&&((function(e,t){if(s4)return;s4=!0;let s=["nginx","apache",void 0,"iana"];Object.keys(s2).forEach(n=>{let i=s2[n],r=i.extensions;if(r?.length)for(let a of(e[n]=r,r)){if(t[a]){let e=s.indexOf(s2[t[a]].source),n=s.indexOf(i.source);if("application/octet-stream"!==t[a]&&(e>n||e===n&&t[a].startsWith("application/")))continue}t[a]=n}})}(s5,s3),s3)[t]||!1)}(e);if(!s)return t.includes("blob")?sl("blob"):sc(new nc(e));if(t.some(e=>e.includes("/"))&&t.includes(s))return sl(s);let n="application/pdf"===s.toLowerCase()?"pdf":s.split("/")[0];return t.includes(n)?sl(n):t.includes("blob")?sl("blob"):sc(new nu(n,e))};function nv(e){let t="https://api.uploadthing.com";return sW.env.CUSTOM_INFRA_URL&&(t=sW.env.CUSTOM_INFRA_URL),`${t}${e}`}let n_=["B","KB","MB","GB"],nw=e=>{let t=RegExp(`^(\\d+)(\\.\\d+)?\\s*(${n_.join("|")})$`,"i"),s=e.match(t);if(!s)return sc(new np(e));let n=parseFloat(s[1]),i=s[3].toUpperCase();return sl(Math.floor(n*Math.pow(1024,n_.indexOf(i))))},nS=e=>{if(0===e||-1===e)return"0B";let t=Math.floor(Math.log(e)/Math.log(1e3));return`${(e/Math.pow(1e3,t)).toFixed(2)}${n_[t]}`};function nk(e){return Object.keys(e)}function nO(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let nT=e=>sv(function*(){let t="undefined"!=typeof window?window.location.origin:sW.env?.VERCEL_URL?`https://${sW.env.VERCEL_URL}`:"http://localhost:3000",s=yield*sh({try:()=>new URL(e??"/api/uploadthing",t),catch:()=>new nd(e??"/api/uploadthing")});return"/"===s.pathname&&(s.pathname="/api/uploadthing"),s}),nE=(e,t)=>"number"!=typeof t||Number.isSafeInteger(t)||t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER?t:t===1/0?Number.MAX_SAFE_INTEGER:t===-1/0?Number.MIN_SAFE_INTEGER:Number.isNaN(t)?0:void 0,nI={BAD_REQUEST:400,NOT_FOUND:404,FORBIDDEN:403,INTERNAL_SERVER_ERROR:500,INTERNAL_CLIENT_ERROR:500,TOO_LARGE:413,TOO_SMALL:400,TOO_MANY_FILES:400,KEY_TOO_LONG:400,URL_GENERATION_FAILED:500,UPLOAD_FAILED:500,MISSING_ENV:500,FILE_LIMIT_EXCEEDED:500};class nN extends sj{constructor(e){let t="string"==typeof e?{code:"INTERNAL_SERVER_ERROR",message:e}:e;super({message:t.message??function(e,t){return"string"==typeof e?e:e instanceof Error||e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:t??"An unknown error occurred"}(t.cause,t.code)}),this._tag="UploadThingError",this.name="UploadThingError",this.code=t.code,this.data=t.data,t.cause instanceof Error?this.cause=t.cause:nO(t.cause)&&"number"==typeof t.cause.status&&"string"==typeof t.cause.statusText?this.cause=Error(`Response ${t.cause.status} ${t.cause.statusText}`):"string"==typeof t.cause?this.cause=Error(t.cause):this.cause=t.cause}static toObject(e){return{code:e.code,message:e.message,data:e.data}}static serialize(e){return JSON.stringify(nN.toObject(e))}}class nR extends ty("uploadthing/FetchContext")(){}let nA=(e,t)=>sw(t3(nR),({fetch:s,baseHeaders:n})=>{let i=new Headers(t?.headers??[]);for(let[e,t]of Object.entries(n))"string"==typeof t&&i.set(e,t);let r={url:e.toString(),method:t?.method,body:t?.body,headers:Object.fromEntries(i)};return sf({try:n=>s(e,{...t,headers:i,signal:n}),catch:e=>new nh({error:e instanceof Error?{...e,name:e.name,message:e.message,stack:e.stack}:e,input:r})}).pipe(s_(e=>Object.assign(e,{requestUrl:r.url})),sE("fetch"))}),nF=e=>sf({try:async()=>({json:await e.json(),ok:e.ok,status:e.status}),catch:t=>new nf({error:t,input:e.requestUrl})}).pipe(sT(({ok:e})=>e,({json:t,status:s})=>new ng({status:s,message:`Request to ${e.requestUrl} failed with status ${s}`,json:t})),s_(({json:e})=>e),sE("parseJson")),nj=e=>sf({try:()=>e.json(),catch:t=>new nf({error:t,input:e.url})}).pipe(sE("parseRequestJson")),nC="hmac-sha256=",nM={name:"HMAC",hash:"SHA-256"},nL=async(e,t)=>{let s=new TextEncoder,n=await crypto.subtle.importKey("raw",s.encode(t),nM,!1,["sign"]),i=await crypto.subtle.sign(nM,n,s.encode(e)).then(e=>na(new Uint8Array(e)));return`${nC}${i}`},n$=async(e,t,s)=>{let n=t?.slice(nC.length);if(!n)return!1;let i=new TextEncoder,r=await crypto.subtle.importKey("raw",i.encode(s),nM,!1,["verify"]);return await crypto.subtle.verify(nM,r,tF(no(n)),i.encode(e))},nP=e=>(t,s)=>t===s||e(t,s),nU=(e,t)=>e===t,nD=k(2,(e,t)=>nP((s,n)=>e(t(s),t(n)))),nz=nD(nU,e=>e.getTime()),nB=e=>nP((t,s)=>{if(t.length!==s.length)return!1;for(let n=0;n<t.length;n++)if(!e(t[n],s[n]))return!1;return!0}),nZ=e=>e.length>0,nq=()=>te,nK=k(2,(e,{onNone:t,onSome:s})=>e8(e)?t():s(e.value)),nJ=k(2,(e,t)=>e8(e)?t():e.value),nV=k(2,(e,t)=>e8(e)?t():e),nG=k(2,(e,t)=>e8(e)?tt(t()):e),nW=e=>null==e?nq():tt(e),nH=nJ(N),nY=e=>(...t)=>{try{return tt(e(...t))}catch(e){return nq()}},nQ=k(2,(e,t)=>{if(e7(e))return e.value;throw t()})(()=>Error("getOrThrow called on a None")),nX=k(2,(e,t)=>e8(e)?nq():tt(t(e.value))),n0=k(2,(e,t)=>e8(e)?nq():t(e.value)),n1=k(2,(e,t)=>e8(e)?nq():t(e.value)),n2=k(2,(e,t)=>n1(e,e=>t(e)?tt(e):te)),n5=e=>nP((t,s)=>e8(t)?e8(s):!e8(s)&&e(t.value,s.value)),n3=(i=eI(),k(2,(e,t)=>!e8(e)&&i(e.value,t)));Symbol.iterator,()=>n4;let n4={next:()=>({done:!0,value:void 0})},n9=e=>(t,s)=>t===s?0:e(t,s),n6=n9((e,t)=>e<t?-1:1),n8=((e,t)=>e<t?-1:1,k(2,(e,t)=>n9((s,n)=>e(t(s),t(n)))));Object.fromEntries,(e,t)=>{let s=[];for(let n of n7(e))s.push(t(n,e[n]));return s};let n7=e=>Object.keys(e),ie=(...e)=>e,it=e=>Array(e),is=e=>Array.isArray(e)?e:Array.from(e),ii=k(2,(e,{onEmpty:t,onNonEmpty:s})=>iu(e)?s(ib(e),iv(e)):t()),ir=k(2,(e,t)=>[t,...e]),ia=k(2,(e,t)=>[...e,t]),io=k(2,(e,t)=>is(e).concat(is(t))),il=Array.isArray,ic=e=>0===e.length,iu=nZ,ip=(e,t)=>e<0||e>=t.length,id=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),im=k(2,(e,t)=>{let s=Math.floor(t);return ip(s,e)?nq():tt(e[s])}),ih=k(2,(e,t)=>{let s=Math.floor(t);if(ip(s,e))throw Error(`Index ${s} out of bounds`);return e[s]}),ig=im(0),ib=ih(0),ix=e=>iu(e)?tt(iy(e)):nq(),iy=e=>e[e.length-1],iv=e=>e.slice(1),i_=(e,t)=>{let s=0;for(let n of e){if(!t(n,s))break;s++}return s},iw=k(2,(e,t)=>iN(e,i_(e,t))),iS=k(2,(e,t)=>{let s=is(e);return s.slice(id(t,s),s.length)}),ik=e=>Array.from(e).reverse(),iO=k(2,(e,t)=>{let s=Array.from(e);return s.sort(t),s}),iT=k(2,(e,t)=>iE(e,t,ie)),iE=k(3,(e,t,s)=>{let n=is(e),i=is(t);if(iu(n)&&iu(i)){let e=[s(ib(n),ib(i))],t=Math.min(n.length,i.length);for(let r=1;r<t;r++)e[r]=s(n[r],i[r]);return e}return[]}),iI=eI(),iN=k(2,(e,t)=>{let s=Array.from(e),n=Math.floor(t);return iu(s)?n>=1?iR(s,n):[[],s]:[s,[]]}),iR=k(2,(e,t)=>{let s=Math.max(1,Math.floor(t));return s>=e.length?[iA(e),[]]:[ir(e.slice(1,s),ib(e)),e.slice(s)]}),iA=e=>e.slice(),iF=k(3,(e,t,s)=>{let n=is(e),i=is(t);return iu(n)?iu(i)?iB(s)(io(n,i)):n:i}),ij=k(2,(e,t)=>iF(e,t,iI)),iC=()=>[],iM=e=>[e],iL=k(2,(e,t)=>e.map(t)),i$=k(2,(e,t)=>{if(ic(e))return[];let s=[];for(let n=0;n<e.length;n++){let i=t(e[n],n);for(let e=0;e<i.length;e++)s.push(i[e])}return s}),iP=i$(O),iU=k(2,(e,t)=>{let s=is(e),n=[];for(let e=0;e<s.length;e++){let i=t(s[e],e);e7(i)&&n.push(i.value)}return n}),iD=k(3,(e,t,s)=>is(e).reduce((e,t,n)=>s(e,t,n),t)),iz=((e,t,s)=>is(e).reduceRight((e,t,n)=>s(e,t,n),t),(e,t)=>{let s;let n=[],i=e;for(;e7(s=t(i));){let[e,t]=s.value;n.push(e),i=t}return n}),iB=k(2,(e,t)=>{let s=is(e);if(iu(s)){let e=[ib(s)];for(let n of iv(s))e.every(e=>!t(n,e))&&e.push(n);return e}return[]}),iZ=e=>iB(e,eI()),iq=k(2,(e,t)=>is(e).join(t)),iK=Symbol.for("effect/BigDecimal"),iJ={[iK]:iK,[ed](){let e=iX(this);return R(em(e.value),ef(ex(e.scale)),eS(this))},[ek](e){return iV(e)&&i2(this,e)},toString(){return`BigDecimal(${i4(this)})`},toJSON(){return{_id:"BigDecimal",value:String(this.value),scale:this.scale}},[eN](){return this.toJSON()},pipe(){return eC(this,arguments)}},iV=e=>G(e,iK),iG=(e,t)=>{let s=Object.create(iJ);return s.value=e,s.scale=t,s},iW=(e,t)=>{if(e!==iH&&e%iY===iH)throw RangeError("Value must be normalized");let s=iG(e,t);return s.normalized=s,s},iH=BigInt(0),iY=BigInt(10),iQ=iW(iH,0),iX=e=>{if(void 0===e.normalized){if(e.value===iH)e.normalized=iQ;else{let t=`${e.value}`,s=0;for(let e=t.length-1;e>=0;e--)if("0"===t[e])s++;else break;0===s&&(e.normalized=e);let n=BigInt(t.substring(0,t.length-s)),i=e.scale-s;e.normalized=iW(n,i)}}return e.normalized},i0=(e,t)=>t>e.scale?iG(e.value*iY**BigInt(t-e.scale),t):t<e.scale?iG(e.value/iY**BigInt(e.scale-t),t):e,i1=nP((e,t)=>e.scale>t.scale?i0(t,e.scale).value===e.value:e.scale<t.scale?i0(e,t.scale).value===t.value:e.value===t.value),i2=k(2,(e,t)=>i1(e,t)),i5=e=>{let[t,s=""]=`${e}`.split(".");return iG(BigInt(`${t}${s}`),s.length)},i3=e=>{let t,s;let n=e.search(/\./);if(-1!==n){let i=e.slice(0,n),r=e.slice(n+1);t=`${i}${r}`,s=r.length}else t=e,s=0;return""===t?tt(iQ):/^(?:\+|-)?\d+$/.test(t)?tt(iG(BigInt(t),s)):nq()},i4=e=>{let t,s;let n=e.value<iH,i=n?`${e.value}`.substring(1):`${e.value}`;if(e.scale>=i.length)t="0",s="0".repeat(e.scale-i.length)+i;else{let n=i.length-e.scale;if(n>i.length){let e=n-i.length;t=`${i}${"0".repeat(e)}`,s=""}else s=i.slice(n),t=i.slice(0,n)}let r=""===s?t:`${t}.${s}`;return n?`-${r}`:r},i9=e=>Number(i4(e)),i6=e=>e>BigInt(Number.MAX_SAFE_INTEGER)||e<BigInt(Number.MIN_SAFE_INTEGER)?nq():tt(Number(e)),i8=e=>{try{return""===e.trim()?nq():tt(BigInt(e))}catch(e){return nq()}},i7=e=>{if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)return nq();try{return tt(BigInt(e))}catch(e){return nq()}},re=e=>!e,rt=Symbol.for("effect/Chunk"),rs=[],rn=nP((e,t)=>e.length===t.length&&rm(e).every((e,s)=>eO(e,rx(t,s)))),ri={[rt]:{_A:e=>e},toString(){return eA(this.toJSON())},toJSON(){return{_id:"Chunk",values:rm(this).map(eR)}},[eN](){return this.toJSON()},[ek](e){return ra(e)&&rn(this,e)},[ed](){return eS(this,ew(rm(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return rs[Symbol.iterator]();default:return rm(this)[Symbol.iterator]()}},pipe(){return eC(this,arguments)}},rr=e=>{let t=Object.create(ri);switch(t.backing=e,e._tag){case"IEmpty":t.length=0,t.depth=0,t.left=t,t.right=t;break;case"IConcat":t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break;case"IArray":t.length=e.array.length,t.depth=0,t.left=ro,t.right=ro;break;case"ISingleton":t.length=1,t.depth=0,t.left=ro,t.right=ro;break;case"ISlice":t.length=e.length,t.depth=e.chunk.depth+1,t.left=ro,t.right=ro}return t},ra=e=>G(e,rt),ro=rr({_tag:"IEmpty"}),rl=()=>ro,rc=(...e)=>1===e.length?ru(e[0]):rb(e),ru=e=>rr({_tag:"ISingleton",a:e}),rp=e=>ra(e)?e:rr({_tag:"IArray",array:is(e)}),rd=(e,t,s)=>{switch(e.backing._tag){case"IArray":!function(e,t,s,n,i){for(let t=0;t<Math.min(e.length,0+i);t++)s[n+t-0]=e[t]}(e.backing.array,0,t,s,e.length);break;case"IConcat":rd(e.left,t,s),rd(e.right,t,s+e.left.length);break;case"ISingleton":t[s]=e.backing.a;break;case"ISlice":{let n=0,i=s;for(;n<e.length;)t[i]=rx(e,n),n+=1,i+=1}}},rm=e=>{switch(e.backing._tag){case"IEmpty":return rs;case"IArray":return e.backing.array;default:{let t=Array(e.length);return rd(e,t,0),e.backing={_tag:"IArray",array:t},e.left=ro,e.right=ro,e.depth=0,t}}},rh=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return rr({_tag:"IArray",array:ik(e.backing.array)});case"IConcat":return rr({_tag:"IConcat",left:rh(e.backing.right),right:rh(e.backing.left)});case"ISlice":return rg(ik(rm(e)))}},rf=k(2,(e,t)=>t<0||t>=e.length?nq():tt(rx(e,t))),rg=e=>rr({_tag:"IArray",array:e}),rb=e=>rg(e),rx=k(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw Error("Index out of bounds");case"ISingleton":if(0!==t)throw Error("Index out of bounds");return e.backing.a;case"IArray":if(t>=e.length||t<0)throw Error("Index out of bounds");return e.backing.array[t];case"IConcat":return t<e.left.length?rx(e.left,t):rx(e.right,t-e.left.length);case"ISlice":return rx(e.backing.chunk,t+e.backing.offset)}}),ry=k(2,(e,t)=>rw(e,ru(t))),rv=k(2,(e,t)=>rw(ru(t),e)),r_=k(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return ro;switch(e.backing._tag){case"ISlice":return rr({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":if(t>e.left.length)return r_(e.right,t-e.left.length);return rr({_tag:"IConcat",left:r_(e.left,t),right:e.right});default:return rr({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}}),rw=k(2,(e,t)=>{if("IEmpty"===e.backing._tag)return t;if("IEmpty"===t.backing._tag)return e;let s=t.depth-e.depth;if(1>=Math.abs(s))return rr({_tag:"IConcat",left:e,right:t});if(s<-1){if(e.left.depth>=e.right.depth){let s=rw(e.right,t);return rr({_tag:"IConcat",left:e.left,right:s})}{let s=rw(e.right.right,t);if(s.depth===e.depth-3){let t=rr({_tag:"IConcat",left:e.right.left,right:s});return rr({_tag:"IConcat",left:e.left,right:t})}{let t=rr({_tag:"IConcat",left:e.left,right:e.right.left});return rr({_tag:"IConcat",left:t,right:s})}}}if(t.right.depth>=t.left.depth)return rr({_tag:"IConcat",left:rw(e,t.left),right:t.right});{let s=rw(e,t.left.left);if(s.depth===t.depth-3){let e=rr({_tag:"IConcat",left:s,right:t.left.right});return rr({_tag:"IConcat",left:e,right:t.right})}{let e=rr({_tag:"IConcat",left:t.left.right,right:t.right});return rr({_tag:"IConcat",left:s,right:e})}}}),rS=e=>0===e.length,rk=e=>e.length>0,rO=rf(0),rT=e=>rx(e,0),rE=e=>r_(e,1);function rI(e,t){var s;return s=e&t-1,s-=s>>1&1431655765,s=(s=(858993459&s)+(s>>2&858993459))+(s>>4)&252645135,s+=s>>8,127&(s+=s>>16)}let rN=(e,t)=>({value:e,previous:t});function rR(e,t,s,n){let i=n;if(!e){let e=n.length;i=Array(e);for(let t=0;t<e;++t)i[t]=n[t]}return i[t]=s,i}function rA(e,t,s){let n=s.length-1,i=0,r=0,a=s;if(e)i=r=t;else for(a=Array(n);i<t;)a[r++]=s[i++];for(++i;i<=n;)a[r++]=s[i++];return e&&(a.length=n),a}class rF{_tag="EmptyNode";modify(e,t,s,n,i,r){let a=s(nq());return e8(a)?new rF:(++r.value,new rM(e,n,i,a))}}function rj(e){return W(e,"EmptyNode")}function rC(e,t){return!rj(e)&&t===e.edit}class rM{edit;hash;key;value;_tag="LeafNode";constructor(e,t,s,n){this.edit=e,this.hash=t,this.key=s,this.value=n}modify(e,t,s,n,i,r){if(eO(i,this.key)){let t=s(this.value);return t===this.value?this:e8(t)?(--r.value,new rF):rC(this,e)?(this.value=t,this):new rM(e,n,i,t)}let a=s(nq());return e8(a)?this:(++r.value,rU(e,t,this.hash,this,n,new rM(e,n,i,a)))}}class rL{edit;hash;children;_tag="CollisionNode";constructor(e,t,s){this.edit=e,this.hash=t,this.children=s}modify(e,t,s,n,i,r){if(n===this.hash){let t=rC(this,e),n=this.updateCollisionList(t,e,this.hash,this.children,s,i,r);return n===this.children?this:n.length>1?new rL(e,this.hash,n):n[0]}let a=s(nq());return e8(a)?this:(++r.value,rU(e,t,this.hash,this,n,new rM(e,n,i,a)))}updateCollisionList(e,t,s,n,i,r,a){let o=n.length;for(let l=0;l<o;++l){let o=n[l];if("key"in o&&eO(r,o.key)){let c=o.value,u=i(c);if(u===c)return n;if(e8(u))return--a.value,rA(e,l,n);return rR(e,l,new rM(t,s,r,u),n)}}let l=i(nq());return e8(l)?n:(++a.value,rR(e,o,new rM(t,s,r,l),n))}}class r${edit;mask;children;_tag="IndexedNode";constructor(e,t,s){this.edit=e,this.mask=t,this.children=s}modify(e,t,s,n,i,r){let a;let o=this.mask,l=this.children,c=n>>>t&31,u=1<<c,p=rI(o,u),d=o&u,m=rC(this,e);if(!d){let a=new rF().modify(e,t+5,s,n,i,r);return a?l.length>=16?function(e,t,s,n,i){let r=[],a=n,o=0;for(let e=0;a;++e)1&a&&(r[e]=i[o++]),a>>>=1;return r[t]=s,new rP(e,o+1,r)}(e,c,a,o,l):new r$(e,o|u,function(e,t,s,n){let i=n.length;if(e){let e=i;for(;e>=t;)n[e--]=n[e];return n[t]=s,n}let r=0,a=0,o=Array(i+1);for(;r<t;)o[a++]=n[r++];for(o[t]=s;r<i;)o[++a]=n[r++];return o}(m,p,a,l)):this}let h=l[p],f=h.modify(e,t+5,s,n,i,r);if(h===f)return this;let g=o;if(rj(f)){var b;if(!(g&=~u))return new rF;if(l.length<=2&&(rj(b=l[1^p])||"LeafNode"===b._tag||"CollisionNode"===b._tag))return l[1^p];a=rA(m,p,l)}else a=rR(m,p,f,l);return m?(this.mask=g,this.children=a,this):new r$(e,g,a)}}class rP{edit;size;children;_tag="ArrayNode";constructor(e,t,s){this.edit=e,this.size=t,this.children=s}modify(e,t,s,n,i,r){let a,o=this.size,l=this.children,c=n>>>t&31,u=l[c],p=(u||new rF).modify(e,t+5,s,n,i,r);if(u===p)return this;let d=rC(this,e);if(rj(u)&&!rj(p))++o,a=rR(d,c,p,l);else if(!rj(u)&&rj(p)){if(--o<=8)return function(e,t,s,n){let i=Array(t-1),r=0,a=0;for(let e=0,t=n.length;e<t;++e)if(e!==s){let t=n[e];t&&!rj(t)&&(i[r++]=t,a|=1<<e)}return new r$(e,a,i)}(e,o,c,l);a=rR(d,c,new rF,l)}else a=rR(d,c,p,l);return d?(this.size=o,this.children=a,this):new rP(e,o,a)}}function rU(e,t,s,n,i,r){let a;let o=t;for(;;){let t=function(e,t,s,n,i,r){if(s===i)return new rL(e,s,[r,n]);let a=s>>>t&31,o=i>>>t&31;return a===o?t=>new r$(e,1<<a|1<<o,[t]):new r$(e,1<<a|1<<o,a<o?[n,r]:[r,n])}(e,o,s,n,i,r);if("function"==typeof t)a=rN(t,a),o+=5;else{let e=t;for(;null!=a;)e=a.value(e),a=a.previous;return e}}}let rD="effect/HashMap",rz=Symbol.for(rD),rB={[rz]:rz,[Symbol.iterator](){return new rq(this,(e,t)=>[e,t])},[ed](){let e=em(rD);for(let t of this)e^=R(em(t[0]),ef(em(t[1])));return eS(this,e)},[ek](e){if(rH(e)){if(e._size!==this._size)return!1;for(let t of this){let s=R(e,rQ(t[0],em(t[0])));if(e8(s)||!eO(t[1],s.value))return!1}return!0}return!1},toString(){return eA(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(eR)}},[eN](){return this.toJSON()},pipe(){return eC(this,arguments)}},rZ=(e,t,s,n)=>{let i=Object.create(rB);return i._editable=e,i._edit=t,i._root=s,i._size=n,i};class rq{map;f;v;constructor(e,t){this.map=e,this.f=t,this.v=rJ(this.map._root,this.f,void 0)}next(){if(e8(this.v))return{done:!0,value:void 0};let e=this.v.value;return this.v=rK(e.cont),{done:!1,value:e.value}}[Symbol.iterator](){return new rq(this.map,this.f)}}let rK=e=>e?rV(e[0],e[1],e[2],e[3],e[4]):nq(),rJ=(e,t,s)=>{switch(e._tag){case"LeafNode":if(e7(e.value))return tt({value:t(e.key,e.value.value),cont:s});return rK(s);case"CollisionNode":case"ArrayNode":case"IndexedNode":{let n=e.children;return rV(n.length,n,0,t,s)}default:return rK(s)}},rV=(e,t,s,n,i)=>{for(;s<e;){let r=t[s++];if(r&&!rj(r))return rJ(r,n,[e,t,s,n,i])}return rK(i)},rG=rZ(!1,0,new rF,0),rW=()=>rG,rH=e=>G(e,rz),rY=k(2,(e,t)=>rQ(e,t,em(t))),rQ=k(3,(e,t,s)=>{let n=e._root,i=0;for(;;)switch(n._tag){case"LeafNode":return eO(t,n.key)?n.value:nq();case"CollisionNode":if(s===n.hash){let e=n.children;for(let s=0,n=e.length;s<n;++s){let n=e[s];if("key"in n&&eO(t,n.key))return n.value}}return nq();case"IndexedNode":{let e=1<<(s>>>i&31);if(n.mask&e){n=n.children[rI(n.mask,e)],i+=5;break}return nq()}case"ArrayNode":if(n=n.children[s>>>i&31]){i+=5;break}return nq();default:return nq()}}),rX=k(2,(e,t)=>e7(rQ(e,t,em(t)))),r0=k(3,(e,t,s)=>r9(e,t,()=>tt(s))),r1=k(3,(e,t,s)=>e._editable?(e._root=t,e._size=s,e):t===e._root?e:rZ(e._editable,e._edit,t,s)),r2=e=>new rq(e,e=>e),r5=e=>e._size,r3=e=>rZ(!0,e._edit+1,e._root,e._size),r4=e=>(e._editable=!1,e),r9=((e,t)=>{let s=r3(e);return t(s),r4(s)},k(3,(e,t,s)=>r6(e,t,em(t),s))),r6=k(4,(e,t,s,n)=>{let i={value:e._size},r=e._root.modify(e._editable?e._edit:NaN,0,n,s,t,i);return R(e,r1(r,i.value))}),r8=k(2,(e,t)=>r9(e,t,nq)),r7=k(2,(e,t)=>at(e,rW(),(e,s,n)=>r0(e,n,t(s,n)))),ae=k(2,(e,t)=>at(e,void 0,(e,s,n)=>t(s,n))),at=k(3,(e,t,s)=>{let n;let i=e._root;if("LeafNode"===i._tag)return e7(i.value)?s(t,i.value.value,i.key):t;if("EmptyNode"===i._tag)return t;let r=[i.children];for(;n=r.pop();)for(let e=0,i=n.length;e<i;){let i=n[e++];i&&!rj(i)&&("LeafNode"===i._tag?e7(i.value)&&(t=s(t,i.value.value,i.key)):r.push(i.children))}return t}),as="effect/HashSet",an=Symbol.for(as),ai={[an]:an,[Symbol.iterator](){return r2(this._keyMap)},[ed](){return eS(this,ef(em(this._keyMap))(em(as)))},[ek](e){return!!aa(e)&&r5(this._keyMap)===r5(e._keyMap)&&eO(this._keyMap,e._keyMap)},toString(){return eA(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(eR)}},[eN](){return this.toJSON()},pipe(){return eC(this,arguments)}},ar=e=>{let t=Object.create(ai);return t._keyMap=e,t},aa=e=>G(e,an),ao=ar(rW()),al=()=>ao,ac=k(2,(e,t)=>rX(e._keyMap,t)),au=k(2,(e,t)=>{let s=!1;for(let n of e)if(s=t(n))break;return s}),ap=k(2,(e,t)=>!au(e,e=>!t(e))),ad=e=>ar(r3(e._keyMap)),am=e=>(e._keyMap._editable=!1,e),ah=k(2,(e,t)=>{let s=ad(e);return t(s),am(s)}),af=k(2,(e,t)=>e._keyMap._editable?(r0(t,!0)(e._keyMap),e):ar(r0(t,!0)(e._keyMap))),ag=k(2,(e,t)=>e._keyMap._editable?(r8(t)(e._keyMap),e):ar(r8(t)(e._keyMap))),ab=k(2,(e,t)=>ah(e,e=>{for(let s of t)ag(e,s)})),ax=k(2,(e,t)=>ah(al(),s=>{for(let n of(ay(e,e=>af(s,e)),t))af(s,n)})),ay=k(2,(e,t)=>ae(e._keyMap,(e,s)=>t(s))),av=k(3,(e,t,s)=>at(e._keyMap,t,(e,t,n)=>s(e,n))),a_=e=>{let t=ad(al());for(let s of e)af(t,s);return am(t)},aw=(...e)=>{let t=ad(al());for(let s of e)af(t,s);return am(t)},aS=e=>r5(e._keyMap),ak=Symbol.for("effect/MutableRef"),aO={[ak]:ak,toString(){return eA(this.toJSON())},toJSON(){return{_id:"MutableRef",current:eR(this.current)}},[eN](){return this.toJSON()},pipe(){return eC(this,arguments)}},aT=e=>{let t=Object.create(aO);return t.current=e,t},aE=k(3,(e,t,s)=>!!eO(t,e.current)&&(e.current=s,!0)),aI=e=>e.current,aN=k(2,(e,t)=>(e.current=t,e)),aR="effect/FiberId",aA=Symbol.for(aR),aF="None",aj="Runtime",aC="Composite",aM=ey(`${aR}-${aF}`);class aL{[aA]=aA;_tag=aF;id=-1;startTimeMillis=-1;[ed](){return aM}[ek](e){return aD(e)&&e._tag===aF}toString(){return eA(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[eN](){return this.toJSON()}}class a${id;startTimeMillis;[aA]=aA;_tag=aj;constructor(e,t){this.id=e,this.startTimeMillis=t}[ed](){return eS(this,ey(`${aR}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[ek](e){return aD(e)&&e._tag===aj&&this.id===e.id&&this.startTimeMillis===e.startTimeMillis}toString(){return eA(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[eN](){return this.toJSON()}}class aP{left;right;[aA]=aA;_tag=aC;constructor(e,t){this.left=e,this.right=t}_hash;[ed](){return R(ey(`${aR}-${this._tag}`),ef(em(this.left)),ef(em(this.right)),eS(this))}[ek](e){return aD(e)&&e._tag===aC&&eO(this.left,e.left)&&eO(this.right,e.right)}toString(){return eA(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:eR(this.left),right:eR(this.right)}}[eN](){return this.toJSON()}}let aU=new aL,aD=e=>G(e,aA),az=e=>e._tag===aF||R(aV(e),ap(e=>az(e))),aB=k(2,(e,t)=>e._tag===aF?t:t._tag===aF?e:new aP(e,t)),aZ=k(2,(e,t)=>az(e)?t:e),aq=e=>{switch(e._tag){case aF:return al();case aj:return aw(e.id);case aC:return R(aq(e.left),ax(aq(e.right)))}},aK=C(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>aT(0)),aJ=e=>Array.from(aq(e)).map(e=>`#${e}`).join(","),aV=e=>{switch(e._tag){case aF:return al();case aj:return aw(e);case aC:return R(aV(e.left),ax(aV(e.right)))}},aG=aU,aW=(e,t)=>new a$(e,t),aH=(e,t)=>new aP(e,t),aY=aD,aQ=()=>{let e=aI(aK);return R(aK,aN(e+1)),new a$(e,Date.now())},aX=e=>{let t=r3(rW());for(let s of e)r0(t,s[0],s[1]);return r4(t)},a0=e=>e&&rj(e._root),a1=Symbol.for("effect/List"),a2=e=>is(e),a5=nD(nB(eO),a2),a3={[a1]:a1,_tag:"Cons",toString(){return eA(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:a2(this).map(eR)}},[eN](){return this.toJSON()},[ek](e){return a8(e)&&this._tag===e._tag&&a5(this,e)},[ed](){return eS(this,ew(a2(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if("Nil"===t._tag)return e=!0,this.return();let s=t.head;return t=t.tail,{done:e,value:s}},return:t=>(e||(e=!0),{done:!0,value:t})}},pipe(){return eC(this,arguments)}},a4=(e,t)=>{let s=Object.create(a3);return s.head=e,s.tail=t,s},a9=ey("Nil"),a6=Object.create({[a1]:a1,_tag:"Nil",toString(){return eA(this.toJSON())},toJSON:()=>({_id:"List",_tag:"Nil"}),[eN](){return this.toJSON()},[ed]:()=>a9,[ek](e){return a8(e)&&this._tag===e._tag},[Symbol.iterator]:()=>({next:()=>({done:!0,value:void 0})}),pipe(){return eC(this,arguments)}}),a8=e=>G(e,a1),a7=e=>"Nil"===e._tag,oe=e=>"Cons"===e._tag,ot=(e,t)=>a4(e,t),os=()=>a6,on=e=>a4(e,a6),oi=k(2,(e,t)=>oa(t,e)),or=k(2,(e,t)=>ot(t,e)),oa=k(2,(e,t)=>{if(a7(e))return t;if(a7(t))return e;{let s=a4(t.head,e),n=s,i=t.tail;for(;!a7(i);){let t=a4(i.head,e);n.tail=t,n=t,i=i.tail}return s}}),oo=k(3,(e,t,s)=>{let n=t,i=e;for(;!a7(i);)n=s(n,i.head),i=i.tail;return n}),ol=e=>{let t=os(),s=e;for(;!a7(s);)t=or(t,s.head),s=s.tail;return t},oc="Expected List to be non-empty",ou=e=>{if(a7(e))throw Error(oc);return e.head},op=e=>{if(a7(e))throw Error(oc);return e.tail};Array.prototype;let od=function(){function e(e){e&&Object.assign(this,e)}return e.prototype=e0,e}(),om=e=>Object.assign(Object.create(e0),e),oh=Symbol.for("effect/DifferChunkPatch");function of(e){return e}({...od.prototype,[oh]:{_Value:of,_Patch:of}});let og=Symbol.for("effect/DifferContextPatch");function ob(e){return e}let ox={...od.prototype,[og]:{_Value:ob,_Patch:ob}},oy=Object.create(Object.assign(Object.create(ox),{_tag:"Empty"})),ov=()=>oy,o_=Object.assign(Object.create(ox),{_tag:"AndThen"}),ow=(e,t)=>{let s=Object.create(o_);return s.first=e,s.second=t,s},oS=Object.assign(Object.create(ox),{_tag:"AddService"}),ok=(e,t)=>{let s=Object.create(oS);return s.key=e,s.service=t,s},oO=Object.assign(Object.create(ox),{_tag:"RemoveService"}),oT=e=>{let t=Object.create(oO);return t.key=e,t},oE=Object.assign(Object.create(ox),{_tag:"UpdateService"}),oI=(e,t)=>{let s=Object.create(oE);return s.key=e,s.update=t,s},oN=(e,t)=>{let s=new Map(e.unsafeMap),n=ov();for(let[e,i]of t.unsafeMap.entries())if(s.has(e)){let t=s.get(e);s.delete(e),eO(t,i)||(n=oR(oI(e,()=>i))(n))}else s.delete(e),n=oR(ok(e,i))(n);for(let[e]of s.entries())n=oR(oT(e))(n);return n},oR=k(2,(e,t)=>ow(e,t)),oA=k(2,(e,t)=>{if("Empty"===e._tag)return t;let s=!1,n=ru(e),i=new Map(t.unsafeMap);for(;rk(n);){let e=rT(n),t=rE(n);switch(e._tag){case"Empty":n=t;break;case"AddService":i.set(e.key,e.service),n=t;break;case"AndThen":n=rv(rv(t,e.second),e.first);break;case"RemoveService":i.delete(e.key),n=t;break;case"UpdateService":i.set(e.key,e.update(i.get(e.key))),s=!0,n=t}}if(!s)return to(i);let r=new Map;for(let[e]of t.unsafeMap)i.has(e)&&(r.set(e,i.get(e)),i.delete(e));for(let[e,t]of i)r.set(e,t);return to(r)}),oF=Symbol.for("effect/DifferHashMapPatch");function oj(e){return e}({...od.prototype,[oF]:{_Value:oj,_Key:oj,_Patch:oj}});let oC=Symbol.for("effect/DifferHashSetPatch");function oM(e){return e}let oL={...od.prototype,[oC]:{_Value:oM,_Key:oM,_Patch:oM}},o$=Object.create(Object.assign(Object.create(oL),{_tag:"Empty"})),oP=()=>o$,oU=Object.assign(Object.create(oL),{_tag:"AndThen"}),oD=(e,t)=>{let s=Object.create(oU);return s.first=e,s.second=t,s},oz=Object.assign(Object.create(oL),{_tag:"Add"}),oB=e=>{let t=Object.create(oz);return t.value=e,t},oZ=Object.assign(Object.create(oL),{_tag:"Remove"}),oq=e=>{let t=Object.create(oZ);return t.value=e,t},oK=(e,t)=>{let[s,n]=av([e,oP()],([e,t],s)=>ac(s)(e)?[ag(s)(e),t]:[e,oJ(oB(s))(t)])(t);return av(n,(e,t)=>oJ(oq(t))(e))(s)},oJ=k(2,(e,t)=>oD(e,t)),oV=k(2,(e,t)=>{if("Empty"===e._tag)return t;let s=t,n=ru(e);for(;rk(n);){let e=rT(n),t=rE(n);switch(e._tag){case"Empty":n=t;break;case"AndThen":n=rv(e.first)(rv(e.second)(t));break;case"Add":s=af(e.value)(s),n=t;break;case"Remove":s=ag(e.value)(s),n=t}}return s}),oG=Symbol.for("effect/DifferOrPatch");function oW(e){return e}let oH={...od.prototype,[oG]:{_Value:oW,_Key:oW,_Patch:oW}},oY=Object.create(Object.assign(Object.create(oH),{_tag:"Empty"})),oQ=Object.assign(Object.create(oH),{_tag:"AndThen"}),oX=(e,t)=>{let s=Object.create(oQ);return s.first=e,s.second=t,s},o0=Object.assign(Object.create(oH),{_tag:"SetLeft"}),o1=Object.assign(Object.create(oH),{_tag:"SetRight"}),o2=Object.assign(Object.create(oH),{_tag:"UpdateLeft"}),o5=Object.assign(Object.create(oH),{_tag:"UpdateRight"}),o3=((e,t)=>oX(e,t),Symbol.for("effect/DifferReadonlyArrayPatch"));function o4(e){return e}let o9={...od.prototype,[o3]:{_Value:o4,_Patch:o4}},o6=Object.create(Object.assign(Object.create(o9),{_tag:"Empty"})),o8=()=>o6,o7=Object.assign(Object.create(o9),{_tag:"AndThen"}),le=(e,t)=>{let s=Object.create(o7);return s.first=e,s.second=t,s},lt=Object.assign(Object.create(o9),{_tag:"Append"}),ls=e=>{let t=Object.create(lt);return t.values=e,t},ln=Object.assign(Object.create(o9),{_tag:"Slice"}),li=(e,t)=>{let s=Object.create(ln);return s.from=e,s.until=t,s},lr=Object.assign(Object.create(o9),{_tag:"Update"}),la=(e,t)=>{let s=Object.create(lr);return s.index=e,s.patch=t,s},lo=e=>{let t=0,s=o8();for(;t<e.oldValue.length&&t<e.newValue.length;){let n=e.oldValue[t],i=e.newValue[t],r=e.differ.diff(n,i);eO(r,e.differ.empty)||(s=ll(s,la(t,r))),t+=1}return t<e.oldValue.length&&(s=ll(s,li(0,t))),t<e.newValue.length&&(s=ll(s,ls(iS(t)(e.newValue)))),s},ll=k(2,(e,t)=>le(e,t)),lc=k(3,(e,t,s)=>{if("Empty"===e._tag)return t;let n=t.slice(),i=iM(e);for(;nZ(i);){let e=ib(i),t=iv(i);switch(e._tag){case"Empty":i=t;break;case"AndThen":t.unshift(e.first,e.second),i=t;break;case"Append":for(let t of e.values)n.push(t);i=t;break;case"Slice":n=n.slice(e.from,e.until),i=t;break;case"Update":n[e.index]=s.patch(e.patch,n[e.index]),i=t}}return n}),lu={[Symbol.for("effect/Differ")]:{_P:O,_V:O}},lp=e=>{let t=Object.create(lu);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},ld=()=>lp({empty:ov(),combine:(e,t)=>oR(t)(e),diff:(e,t)=>oN(e,t),patch:(e,t)=>oA(t)(e)}),lm=()=>lp({empty:oP(),combine:(e,t)=>oJ(t)(e),diff:(e,t)=>oK(e,t),patch:(e,t)=>oV(t)(e)}),lh=e=>lp({empty:o8(),combine:(e,t)=>ll(e,t),diff:(t,s)=>lo({oldValue:t,newValue:s,differ:e}),patch:(t,s)=>lc(t,s,e)}),lf=()=>lg((e,t)=>t),lg=e=>lp({empty:O,combine:(e,t)=>e===O?t:t===O?e:s=>t(e(s)),diff:(e,t)=>eO(e,t)?O:T(t),patch:(t,s)=>e(s,t(s))}),lb=e=>255&e,lx=e=>e>>8&255,ly=(e,t)=>(255&e)+((t&e&255)<<8),lv=ly(0,0),l_=k(2,(e,t)=>ly(lb(e)&~t,lx(e))),lw=k(2,(e,t)=>e|t),lS=e=>~e>>>0&255,lk=e=>lI(e,32),lO=k(2,(e,t)=>e|t),lT=e=>lE(e)&&!lF(e),lE=e=>lI(e,1),lI=k(2,(e,t)=>(e&t)!=0),lN=(...e)=>e.reduce((e,t)=>e|t,0),lR=lN(0),lA=e=>lI(e,4),lF=e=>lI(e,16),lj=k(2,(e,t)=>ly(e^t,t)),lC=k(2,(e,t)=>e&(lS(lb(t))|lx(t))|lb(t)&lx(t)),lM=lp({empty:lv,diff:(e,t)=>lj(e,t),combine:(e,t)=>lw(t)(e),patch:(e,t)=>lC(t,e)}),lL=e=>ly(e,e),l$=e=>ly(e,0),lP="Empty",lU="Fail",lD="Interrupt",lz="Parallel",lB="Sequential",lZ="effect/Cause",lq=Symbol.for(lZ),lK={[lq]:{_E:e=>e},[ed](){return R(em(lZ),ef(em(ci(this))),eS(this))},[ek](e){return lQ(e)&&cn(this,e)},pipe(){return eC(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:eR(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:eR(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:eR(this.left),right:eR(this.right)}}},toString(){return ch(this)},[eN](){return this.toJSON()}},lJ=(()=>{let e=Object.create(lK);return e._tag=lP,e})(),lV=e=>{let t=Object.create(lK);return t._tag=lU,t.error=e,t},lG=e=>{let t=Object.create(lK);return t._tag="Die",t.defect=e,t},lW=e=>{let t=Object.create(lK);return t._tag=lD,t.fiberId=e,t},lH=(e,t)=>{let s=Object.create(lK);return s._tag=lz,s.left=e,s.right=t,s},lY=(e,t)=>{let s=Object.create(lK);return s._tag=lB,s.left=e,s.right=t,s},lQ=e=>G(e,lq),lX=e=>"Die"===e._tag,l0=e=>e._tag===lP||cd(e,!0,(e,t)=>{switch(t._tag){case lP:return tt(e);case"Die":case lU:case lD:return tt(!1);default:return nq()}}),l1=e=>e7(l8(e)),l2=e=>cm(void 0,cl)(e),l5=e=>rh(cd(e,rl(),(e,t)=>t._tag===lU?tt(R(e,rv(t.error))):nq())),l3=e=>rh(cd(e,rl(),(e,t)=>"Die"===t._tag?tt(R(e,rv(t.defect))):nq())),l4=e=>cd(e,al(),(e,t)=>t._tag===lD?tt(R(e,af(t.fiberId))):nq()),l9=e=>ca(e,e=>e._tag===lU?tt(e.error):nq()),l6=e=>{let t=l9(e);switch(t._tag){case"None":return tI(e);case"Some":return tE(t.value)}},l8=e=>ca(e,e=>e._tag===lD?tt(e.fiberId):nq()),l7=e=>cp(e,{onEmpty:nq(),onFail:e=>tt(lG(e)),onDie:e=>tt(lG(e)),onInterrupt:()=>nq(),onSequential:(e,t)=>e7(e)&&e7(t)?tt(lY(e.value,t.value)):e7(e)&&e8(t)?tt(e.value):e8(e)&&e7(t)?tt(t.value):nq(),onParallel:(e,t)=>e7(e)&&e7(t)?tt(lH(e.value,t.value)):e7(e)&&e8(t)?tt(e.value):e8(e)&&e7(t)?tt(t.value):nq()}),ce=e=>cp(e,{onEmpty:lJ,onFail:()=>lJ,onDie:e=>lG(e),onInterrupt:e=>lW(e),onSequential:lY,onParallel:lH}),ct=e=>cp(e,{onEmpty:lJ,onFail:e=>lG(e),onDie:e=>lG(e),onInterrupt:e=>lW(e),onSequential:(e,t)=>lY(e,t),onParallel:(e,t)=>lH(e,t)}),cs=((e,t)=>cs(e,e=>lV(t(e))),k(2,(e,t)=>cp(e,{onEmpty:lJ,onFail:e=>t(e),onDie:e=>lG(e),onInterrupt:e=>lW(e),onSequential:(e,t)=>lY(e,t),onParallel:(e,t)=>lH(e,t)}))),cn=(e,t)=>{let s=ru(e),n=ru(t);for(;rk(s)&&rk(n);){let[e,t]=R(rT(s),cd([al(),rl()],([e,t],s)=>{let[n,i]=co(s);return tt([R(e,ax(n)),R(t,rw(i))])})),[i,r]=R(rT(n),cd([al(),rl()],([e,t],s)=>{let[n,i]=co(s);return tt([R(e,ax(n)),R(t,rw(i))])}));if(!eO(e,i))return!1;s=t,n=r}return!0},ci=e=>cr(ru(e),rl()),cr=(e,t)=>{for(;;){let[s,n]=R(e,iD([al(),rl()],([e,t],s)=>{let[n,i]=co(s);return[R(e,ax(n)),R(t,rw(i))]})),i=aS(s)>0?R(t,rv(s)):t;if(rS(n))return rh(i);e=n,t=i}throw Error(es("Cause.flattenCauseLoop"))},ca=k(2,(e,t)=>{let s=[e];for(;s.length>0;){let e=s.pop(),n=t(e);switch(n._tag){case"None":switch(e._tag){case lB:case lz:s.push(e.right),s.push(e.left)}break;case"Some":return n}}return nq()}),co=e=>{let t=e,s=[],n=al(),i=rl();for(;void 0!==t;)switch(t._tag){case lP:if(0===s.length)return[n,i];t=s.pop();break;case lU:if(n=af(n,rc(t._tag,t.error)),0===s.length)return[n,i];t=s.pop();break;case"Die":if(n=af(n,rc(t._tag,t.defect)),0===s.length)return[n,i];t=s.pop();break;case lD:if(n=af(n,rc(t._tag,t.fiberId)),0===s.length)return[n,i];t=s.pop();break;case lB:switch(t.left._tag){case lP:t=t.right;break;case lB:t=lY(t.left.left,lY(t.left.right,t.right));break;case lz:t=lH(lY(t.left.left,t.right),lY(t.left.right,t.right));break;default:i=rv(i,t.right),t=t.left}break;case lz:s.push(t.right),t=t.left}throw Error(es("Cause.evaluateCauseLoop"))},cl={emptyCase:E,failCase:I,dieCase:I,interruptCase:E,sequentialCase:(e,t,s)=>t&&s,parallelCase:(e,t,s)=>t&&s},cc="SequentialCase",cu="ParallelCase",cp=k(2,(e,{onDie:t,onEmpty:s,onFail:n,onInterrupt:i,onParallel:r,onSequential:a})=>cm(e,void 0,{emptyCase:()=>s,failCase:(e,t)=>n(t),dieCase:(e,s)=>t(s),interruptCase:(e,t)=>i(t),sequentialCase:(e,t,s)=>a(t,s),parallelCase:(e,t,s)=>r(t,s)})),cd=k(3,(e,t,s)=>{let n=t,i=e,r=[];for(;void 0!==i;){let e=s(n,i);switch(n=e7(e)?e.value:n,i._tag){case lB:case lz:r.push(i.right),i=i.left;break;default:i=void 0}void 0===i&&r.length>0&&(i=r.pop())}return n}),cm=k(3,(e,t,s)=>{let n=[e],i=[];for(;n.length>0;){let e=n.pop();switch(e._tag){case lP:i.push(tI(s.emptyCase(t)));break;case lU:i.push(tI(s.failCase(t,e.error)));break;case"Die":i.push(tI(s.dieCase(t,e.defect)));break;case lD:i.push(tI(s.interruptCase(t,e.fiberId)));break;case lB:n.push(e.right),n.push(e.left),i.push(tE({_tag:cc}));break;case lz:n.push(e.right),n.push(e.left),i.push(tE({_tag:cu}))}}let r=[];for(;i.length>0;){let e=i.pop();switch(e._tag){case"Left":switch(e.left._tag){case cc:{let e=r.pop(),n=r.pop(),i=s.sequentialCase(t,e,n);r.push(i);break}case cu:{let e=r.pop(),n=r.pop(),i=s.parallelCase(t,e,n);r.push(i)}}break;case"Right":r.push(e.right)}}if(0===r.length)throw Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return r.pop()}),ch=e=>l2(e)?"All fibers interrupted without errors.":c_(e).map(e=>e.stack).join("\n");class cf extends globalThis.Error{span=void 0;constructor(e){let t=Error.stackTraceLimit;Error.stackTraceLimit=0,super(cg(e)),""===this.message&&(this.message="An error has occurred"),Error.stackTraceLimit=t,this.name=e instanceof Error?e.name:"Error","object"==typeof e&&null!==e&&(cv in e&&(this.span=e[cv]),Object.keys(e).forEach(t=>{t in this||(this[t]=e[t])})),this.stack=cy(`${this.name}: ${this.message}`,e instanceof Error&&e.stack?e.stack:"",this.span)}}let cg=e=>{if("string"==typeof e)return e;if("object"==typeof e&&null!==e&&e instanceof Error)return e.message;try{if(G(e,"toString")&&z(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return JSON.stringify(e)},cb=/\((.*)\)/,cx=C("effect/Tracer/spanToTrace",()=>new WeakMap),cy=(e,t,s)=>{let n=[e],i=t.startsWith(e)?t.slice(e.length).split("\n"):t.split("\n");for(let e=1;e<i.length&&!i[e].includes("Generator.next");e++){if(i[e].includes("effect_internal_function")){n.pop();break}n.push(i[e].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(s){let e=s,t=0;for(;e&&"Span"===e._tag&&t<10;){let s=cx.get(e);if("function"==typeof s){let t=s(),i=t.match(cb),r=i?i[1]:t.replace(/^at /,"");n.push(`    at ${e.name} (${r})`)}else n.push(`    at ${e.name}`);e=nH(e.parent),t++}}return n.join("\n")},cv=Symbol.for("effect/SpanAnnotation"),c_=e=>cm(e,void 0,{emptyCase:()=>[],dieCase:(e,t)=>[new cf(t)],failCase:(e,t)=>[new cf(t)],interruptCase:()=>[],parallelCase:(e,t,s)=>[...t,...s],sequentialCase:(e,t,s)=>[...t,...s]}),cw="Pending",cS="Done",ck=Symbol.for("effect/Deferred"),cO={_E:e=>e,_A:e=>e},cT=e=>({_tag:cw,joiners:e}),cE=e=>({_tag:cS,effect:e}),cI=Symbol.for("effect/Tracer"),cN=tg("effect/Tracer"),cR=tg("effect/ParentSpan"),cA=function(){let e="abcdef0123456789",t=e.length;return function(s){let n="";for(let i=0;i<s;i++)n+=e.charAt(Math.floor(Math.random()*t));return n}}();class cF{name;parent;context;links;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];constructor(e,t,s,n,i,r){this.name=e,this.parent=t,this.context=s,this.links=n,this.startTime=i,this.kind=r,this.status={_tag:"Started",startTime:i},this.attributes=new Map,this.traceId="Some"===t._tag?t.value.traceId:cA(32),this.spanId=cA(16)}end(e,t){this.status={_tag:"Ended",endTime:e,exit:t,startTime:this.status.startTime}}attribute(e,t){this.attributes.set(e,t)}event(e,t,s){this.events.push([e,t,s??{}])}}let cj=e=>{if(e?.captureStackTrace===!1||e?.captureStackTrace!==void 0&&"boolean"!=typeof e.captureStackTrace)return e;let t=Error.stackTraceLimit;Error.stackTraceLimit=3;let s=Error();Error.stackTraceLimit=t;let n=!1;return{...e,captureStackTrace:()=>{if(!1!==n)return n;if(void 0!==s.stack){let e=s.stack.split("\n");if(void 0!==e[3])return n=e[3].trim()}}}},cC=Symbol.for("effect/EffectError"),cM=e=>G(e,cC),cL=e=>({[cC]:cC,_tag:"EffectError",cause:e}),c$=(e,t)=>{let s=new cz("Blocked");return s.effect_instruction_i0=e,s.effect_instruction_i1=t,s},cP=e=>{let t=new cz("RunBlocked");return t.effect_instruction_i0=e,t},cU=Symbol.for("effect/Effect");class cD{patch;op;_op=eV;constructor(e,t){this.patch=e,this.op=t}}class cz{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[cU]=eQ;constructor(e){this._op=e}[ek](e){return this===e}[ed](){return eS(this,eh(this))}pipe(){return eC(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:eR(this.effect_instruction_i0),effect_instruction_i1:eR(this.effect_instruction_i1),effect_instruction_i2:eR(this.effect_instruction_i2)}}toString(){return eA(this.toJSON())}[eN](){return this.toJSON()}[Symbol.iterator](){return new tj(new eo(this))}}class cB{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[cU]=eQ;constructor(e){this._op=e,this._tag=e}[ek](e){return pM(e)&&"Failure"===e._op&&eO(this.effect_instruction_i0,e.effect_instruction_i0)}[ed](){return R(ey(this._tag),ef(em(this.effect_instruction_i0)),eS(this))}get cause(){return this.effect_instruction_i0}pipe(){return eC(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return eA(this.toJSON())}[eN](){return this.toJSON()}[Symbol.iterator](){return new tj(new eo(this))}}class cZ{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[cU]=eQ;constructor(e){this._op=e,this._tag=e}[ek](e){return pM(e)&&"Success"===e._op&&eO(this.effect_instruction_i0,e.effect_instruction_i0)}[ed](){return R(ey(this._tag),ef(em(this.effect_instruction_i0)),eS(this))}get value(){return this.effect_instruction_i0}pipe(){return eC(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:eR(this.value)}}toString(){return eA(this.toJSON())}[eN](){return this.toJSON()}[Symbol.iterator](){return new tj(new eo(this))}}let cq=e=>G(e,cU),cK=e=>{let t=new cz(eK);return t.effect_instruction_i0=e,t},cJ=k(3,(e,t,s)=>uF(n=>ui(e,e=>ui(c6(uT(()=>n(t(e)))),t=>uT(()=>s(e,t)).pipe(uc({onFailure:e=>{switch(t._tag){case e$:return ue(lH(t.effect_instruction_i0,e));case ez:return ue(e)}},onSuccess:()=>t})))))),cV=k(2,(e,t)=>ui(e,()=>uO(t))),cG=e=>cV(e,void 0),cW=function(){let e=new cz(eL);switch(arguments.length){case 2:e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break;case 3:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break;case 4:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break;default:throw Error(es("you're not supposed to end up here"))}return e},cH=(e,t=aG)=>{let s;let n=new cz(eM);return n.effect_instruction_i0=t=>{s=e(t)},n.effect_instruction_i1=t,void 0!==s?uv(n,e=>s):n},cY=(e,t=aG)=>cW(e,function(){let e,s,n,i;function r(t){e?e(t):void 0===s&&(s=t)}let a=new cz(eM);return a.effect_instruction_i0=t=>{e=t,s&&t(s)},a.effect_instruction_i1=t,1!==this.effect_instruction_i0.length?(i=new AbortController,n=eu(()=>this.effect_instruction_i0(r,i.signal))):n=eu(()=>this.effect_instruction_i0(r)),n||i?uv(a,e=>(i&&i.abort(),n??uj)):a}),cQ=k(2,(e,t)=>{let s=new cz(eP);return s.effect_instruction_i0=e,s.effect_instruction_i1=t,s}),cX=k(2,(e,t)=>uu(e,{onFailure:t,onSuccess:uO})),c0=k(3,(e,t,s)=>cQ(e,e=>{let n=l6(e);switch(n._tag){case"Left":return t(n.left)?s(n.left):ue(e);case"Right":return ue(n.right)}})),c1=Symbol.for("effect/SpanAnnotation"),c2=Symbol.for("effect/OriginalAnnotation"),c5=(e,t)=>e7(t)?new Proxy(e,{has:(e,t)=>t===c1||t===c2||t in e,get:(s,n)=>n===c1?t.value:n===c2?e:s[n]}):e,c3=e=>!V(e)||c1 in e?ue(lG(e)):cK(t=>ue(lG(c5(e,di(t))))),c4=e=>ut(()=>lG(new pI(e))),c9=e=>uu(e,{onFailure:e=>uO(tE(e)),onSuccess:e=>uO(tI(e))}),c6=e=>ul(e,{onFailure:pB,onSuccess:pG}),c8=e=>!V(e)||c1 in e?ue(lV(e)):cK(t=>ue(lV(c5(e,di(t))))),c7=e=>ui(uE(e),c8),ue=e=>{let t=new cB(e$);return t.effect_instruction_i0=e,t},ut=e=>ui(uE(e),ue),us=cK(e=>uO(e.id())),un=e=>cK(t=>e(t.id())),ui=k(2,(e,t)=>{let s=new cz(eU);return s.effect_instruction_i0=e,s.effect_instruction_i1=t,s}),ur=k(2,(e,t)=>ui(e,e=>{let s="function"==typeof t?t(e):t;return cq(s)?s:et(s)?cY(e=>{s.then(t=>e(uO(t)),t=>e(c8(new pC(t))))}):uO(s)})),ua=e=>{let t=new cz("OnStep");return t.effect_instruction_i0=e,t},uo=e=>ui(e,O),ul=k(2,(e,t)=>uc(e,{onFailure:e=>uO(t.onFailure(e)),onSuccess:e=>uO(t.onSuccess(e))})),uc=k(2,(e,t)=>{let s=new cz(eD);return s.effect_instruction_i0=e,s.effect_instruction_i1=t.onFailure,s.effect_instruction_i2=t.onSuccess,s}),uu=k(2,(e,t)=>uc(e,{onFailure:e=>{if(l3(e).length>0)return ue(ct(e));let s=l5(e);return s.length>0?t.onFailure(rT(s)):ue(e)},onSuccess:t.onSuccess})),up=k(2,(e,t)=>uT(()=>{let s=is(e),n=it(s.length),i=0;return cV(uL({while:()=>i<s.length,body:()=>t(s[i],i),step:e=>{n[i++]=e}}),n)})),ud=k(2,(e,t)=>uT(()=>{let s=is(e),n=0;return uL({while:()=>n<s.length,body:()=>t(s[n],n),step:()=>{n++}})})),um=(e=>"boolean"==typeof e[0]||cq(e[0]),e=>ue(lW(e))),uh=e=>{let t=new cz(eZ);return t.effect_instruction_i0=lL(1),t.effect_instruction_i1=()=>e,t},uf=k(2,(e,t)=>uF(s=>ui(c6(s(e)),e=>p5(t,e)))),ug=k(2,(e,t)=>ui(e,e=>uE(()=>t(e)))),ub=k(2,(e,t)=>uu(e,{onFailure:e=>c7(()=>t.onFailure(e)),onSuccess:e=>uE(()=>t.onSuccess(e))})),ux=k(2,(e,t)=>uc(e,{onFailure:e=>{let s=l6(e);switch(s._tag){case"Left":return c7(()=>t(s.left));case"Right":return ue(s.right)}},onSuccess:uO})),uy=((e,t)=>uy(e,e=>p$(e)?uj:t(e.effect_instruction_i0)),k(2,(e,t)=>uF(s=>uc(s(e),{onFailure:e=>{let s=pB(e);return uc(t(s),{onFailure:t=>pB(lY(e,t)),onSuccess:()=>s})},onSuccess:e=>{let s=pG(e);return uz(t(s),s)}})))),uv=k(2,(e,t)=>uy(e,pJ({onFailure:e=>l2(e)?cG(t(l4(e))):uj,onSuccess:()=>uj}))),u_=k(2,(e,t)=>uR(e,t,uO)),uw=e=>uS(e,O),uS=k(2,(e,t)=>uu(e,{onFailure:e=>c3(t(e)),onSuccess:uO})),uk=(e,t)=>is(e).reduceRight(([e,s],n)=>{let i=t(n);switch(i._tag){case"Left":return[[i.left,...e],s];case"Right":return[e,[i.right,...s]]}},[iC(),iC()]),uO=((e,t)=>uO(t.runtimeFlags),e=>{let t=new cZ(ez);return t.effect_instruction_i0=e,t}),uT=e=>ui(uE(e),O),uE=e=>{let t=new cz(eB);return t.effect_instruction_i0=e,t},uI=k(2,(e,t)=>ui(e,e=>{let s="function"==typeof t?t(e):t;return cq(s)?cV(s,e):et(s)?cY(t=>{s.then(s=>t(uO(e)),e=>t(c8(new pC(e))))}):uO(e)})),uN=e=>cK(t=>{let s=R(t.getFiberRef(pm),nJ(()=>t.scope()));return e(u4(pm,tt(s)))}),uR=k(3,(e,t,s)=>uc(e,{onFailure:e=>l3(e).length>0?ue(nQ(l7(e))):t(),onSuccess:s})),uA=e=>{let t=new cz(eZ);return t.effect_instruction_i0=l$(1),t.effect_instruction_i1=()=>e,t},uF=e=>cW(e,function(){let e=new cz(eZ);return e.effect_instruction_i0=l$(1),e.effect_instruction_i1=e=>lE(e)?eu(()=>this.effect_instruction_i0(uh)):eu(()=>this.effect_instruction_i0(uA)),e}),uj=uO(void 0),uC=e=>{let t=new cz(eZ);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},uM=k(2,(e,t)=>ui(t,t=>t?R(e,ug(tt)):uO(nq()))),uL=e=>{let t=new cz(eq);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},u$=k(2,(e,t)=>{let s=new cz(eZ);return s.effect_instruction_i0=t,s.effect_instruction_i1=()=>e,s}),uP=e=>{let t=new cz(eJ);return void 0!==e?.priority?pl(t,e.priority):t},uU=k(2,(e,t)=>ui(e,e=>ug(t,t=>[e,t]))),uD=k(2,(e,t)=>ui(e,e=>cV(t,e))),uz=k(2,(e,t)=>ui(e,()=>t)),uB=k(3,(e,t,s)=>ui(e,e=>ug(t,t=>s(e,t)))),uZ=(()=>{let e=setInterval(()=>{},2147483648-1);return uE(()=>clearInterval(e))},e=>ui(us,t=>R(e,uq(t)))),uq=k(2,(e,t)=>ui(e.interruptAsFork(t),()=>e.await)),uK={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return eC(this,arguments)}},uJ={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return eC(this,arguments)}},uV={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return eC(this,arguments)}},uG={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return eC(this,arguments)}},uW=Symbol.for("effect/FiberRef"),uH={_A:e=>e},uY=e=>u0(e,e=>[e,e]),uQ=k(2,(e,t)=>ui(uY(e),t)),uX=k(2,(e,t)=>u0(e,()=>[void 0,t])),u0=k(2,(e,t)=>cK(s=>{let[n,i]=t(s.getFiberRef(e));return s.setFiberRef(e,i),uO(n)})),u1=Symbol.for("effect/RequestResolver"),u2={_A:e=>e,_R:e=>e};class u5{runAll;target;[u1]=u2;constructor(e,t){this.runAll=e,this.target=t}[ed](){return eS(this,this.target?em(this.target):eh(this))}[ek](e){return this.target?u3(e)&&eO(this.target,e.target):this===e}identified(...e){return new u5(this.runAll,rp(e))}pipe(){return eC(this,arguments)}}let u3=e=>G(e,u1),u4=k(3,(e,t,s)=>cJ(uD(uY(t),uX(t,s)),()=>e,e=>uX(t,e))),u9=k(3,(e,t,s)=>uQ(t,n=>u4(e,t,s(n)))),u6=(e,t)=>pt(e,{differ:lf(),fork:t?.fork??O,join:t?.join}),u8=e=>{let t=lm();return pt(e,{differ:t,fork:t.empty})},u7=e=>{let t=lh(lf());return pt(e,{differ:t,fork:t.empty})},pe=e=>{let t=ld();return pt(e,{differ:t,fork:t.empty})},pt=(e,t)=>({[uW]:uH,initial:e,diff:(e,s)=>t.differ.diff(e,s),combine:(e,s)=>t.differ.combine(e,s),patch:e=>s=>t.differ.patch(e,s),fork:t.fork,join:t.join??((e,t)=>t),pipe(){return eC(this,arguments)}}),ps=C(Symbol.for("effect/FiberRef/currentContext"),()=>pe(tx())),pn=C(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>u6(0)),pi=C(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>u6(2048)),pr=C(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>u6(rW())),pa=C(Symbol.for("effect/FiberRef/currentLogLevel"),()=>u6(uJ)),po=C(Symbol.for("effect/FiberRef/currentLogSpan"),()=>u6(os())),pl=k(2,(e,t)=>u4(e,pn,t)),pc=C(Symbol.for("effect/FiberRef/currentConcurrency"),()=>u6("unbounded")),pu=C(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>u6(!0)),pp=C(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>u6(tt(uV))),pd=C(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>u7(iC())),pm=C(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>u6(nq(),{fork:()=>nq(),join:(e,t)=>e})),ph=C(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>u6(lJ,{fork:()=>lJ,join:(e,t)=>e})),pf=C(Symbol.for("effect/FiberRef/currentTracerEnabled"),()=>u6(!0)),pg=C(Symbol.for("effect/FiberRef/currentTracerTiming"),()=>u6(!0)),pb=C(Symbol.for("effect/FiberRef/currentTracerSpanAnnotations"),()=>u6(rW())),px=C(Symbol.for("effect/FiberRef/currentTracerSpanLinks"),()=>u6(rl())),py=Symbol.for("effect/Scope"),pv=Symbol.for("effect/CloseableScope"),p_=(e,t)=>e.addFinalizer(()=>cG(t)),pw=(e,t)=>e.addFinalizer(t),pS=(e,t)=>e.close(t),pk=(e,t)=>e.fork(t),pO=function(){class e extends globalThis.Error{commit(){return c8(this)}toString(){return this.message?`${this.name}: ${this.message}`:this.name}toJSON(){return{...this}}[eN](){let e=this.stack;return e?`${this.toString()}
${e.split("\n").slice(1).join("\n")}`:this.toString()}}return Object.assign(e.prototype,e1),e}(),pT=(e,t)=>{class s extends pO{_tag=t}return Object.assign(s.prototype,e),s.prototype.name=t,s},pE=Symbol.for("effect/Cause/errors/RuntimeException"),pI=pT({[pE]:pE},"RuntimeException"),pN=Symbol.for("effect/Cause/errors/InterruptedException"),pR=e=>G(e,pN),pA=Symbol.for("effect/Cause/errors/NoSuchElement"),pF=pT({[pA]:pA},"NoSuchElementException"),pj=Symbol.for("effect/Cause/errors/UnknownException"),pC=function(){class e extends pO{error;_tag="UnknownException";constructor(e,t){super(t??(G(e,"message")&&L(e.message)?e.message:void 0)),this.error=e}}return Object.assign(e.prototype,{[pj]:pj,name:"UnknownException"}),e}(),pM=e=>cq(e)&&"_tag"in e&&("Success"===e._tag||"Failure"===e._tag),pL=e=>"Failure"===e._tag,p$=e=>"Success"===e._tag,pP=k(2,(e,t)=>{switch(e._tag){case e$:return pB(e.effect_instruction_i0);case ez:return pG(t)}}),pU=e=>pP(e,void 0),pD=(e,t)=>pY(e,t?.parallel?lH:lY),pz=e=>pB(lV(e)),pB=e=>{let t=new cB(e$);return t.effect_instruction_i0=e,t},pZ=((e,t)=>{switch(e._tag){case e$:return pB(e.effect_instruction_i0);case ez:return t(e.effect_instruction_i0)}},k(2,(e,t)=>{switch(e._tag){case e$:return uO(pB(e.effect_instruction_i0));case ez:return c6(t(e.effect_instruction_i0))}})),pq=e=>pB(lW(e)),pK=k(2,(e,t)=>{switch(e._tag){case e$:return pB(e.effect_instruction_i0);case ez:return pG(t(e.effect_instruction_i0))}}),pJ=k(2,(e,{onFailure:t,onSuccess:s})=>{switch(e._tag){case e$:return t(e.effect_instruction_i0);case ez:return s(e.effect_instruction_i0)}}),pV=k(2,(e,{onFailure:t,onSuccess:s})=>{switch(e._tag){case e$:return t(e.effect_instruction_i0);case ez:return s(e.effect_instruction_i0)}}),pG=e=>{let t=new cZ(ez);return t.effect_instruction_i0=e,t},pW=pG(void 0),pH=k(3,(e,t,{onFailure:s,onSuccess:n})=>{switch(e._tag){case e$:switch(t._tag){case ez:return pB(e.effect_instruction_i0);case e$:return pB(s(e.effect_instruction_i0,t.effect_instruction_i0))}case ez:switch(t._tag){case ez:return pG(n(e.effect_instruction_i0,t.effect_instruction_i0));case e$:return pB(t.effect_instruction_i0)}}}),pY=(e,t)=>{let s=rp(e);return rk(s)?R(rE(s),iD(R(rT(s),pK(ru)),(e,s)=>R(e,pH(s,{onSuccess:(e,t)=>R(e,rv(t)),onFailure:t}))),pK(rh),pK(e=>rm(e)),tt):nq()},pQ=e=>({[ck]:cO,state:aT(cT([])),blockingOn:e,pipe(){return eC(this,arguments)}}),pX=()=>ui(us,e=>p0(e)),p0=e=>uE(()=>pQ(e)),p1=e=>cY(t=>{let s=aI(e.state);switch(s._tag){case cS:return t(s.effect);case cw:return s.joiners.push(t),p6(e,t)}},e.blockingOn),p2=k(2,(e,t)=>uE(()=>{let s=aI(e.state);switch(s._tag){case cS:return!1;case cw:aN(e.state,cE(t));for(let e=0,n=s.joiners.length;e<n;e++)s.joiners[e](t);return!0}})),p5=k(2,(e,t)=>p2(e,t)),p3=k(2,(e,t)=>p2(e,ue(t))),p4=k(2,(e,t)=>p2(e,uO(t))),p9=(e,t)=>{let s=aI(e.state);if(s._tag===cw){aN(e.state,cE(t));for(let e=0,n=s.joiners.length;e<n;e++)s.joiners[e](t)}},p6=(e,t)=>uE(()=>{let s=aI(e.state);if(s._tag===cw){let e=s.joiners.indexOf(t);e>=0&&s.joiners.splice(e,1)}}),p8=uY(ps),p7=()=>p8,de=e=>ui(p7(),e),dt=k(2,(e,t)=>u4(ps,t)(e)),ds=k(2,(e,t)=>u9(ps,e=>tf(e,t))(e)),dn=k(2,(e,t)=>de(s=>dt(e,t(s)))),di=e=>{let t=e.getFiberRef(ps).unsafeMap.get(cR.key);return void 0!==t&&"Span"===t._tag?tt(t):nq()},dr={_tag:"Span",spanId:"noop",traceId:"noop",name:"noop",sampled:!1,parent:nq(),context:tx(),status:{_tag:"Ended",startTime:BigInt(0),endTime:BigInt(0),exit:pW},attributes:new Map,links:[],kind:"internal",attribute(){},event(){},end(){}},da=e=>{let t=Object.create(dr);return t.name=e,t},dl=class extends pO{constructor(e){super(),e&&Object.assign(this,e)}},dc=e=>{class t extends dl{_tag=e}return t.prototype.name=e,t},du=Symbol.for("effect/Duration"),dp=BigInt(0),dd=BigInt(24),dm=BigInt(60),dh=BigInt(1e3),df=BigInt(1e6),dg=BigInt(1e9),db=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,dx=e=>{if(dS(e))return e;if($(e))return dI(e);if(U(e))return dT(e);if(Array.isArray(e)){if(2===e.length&&$(e[0])&&$(e[1]))return dT(BigInt(e[0])*dg+BigInt(e[1]))}else if(L(e)){db.lastIndex=0;let t=db.exec(e);if(t){let[e,s,n]=t,i=Number(s);switch(n){case"nano":case"nanos":return dT(BigInt(s));case"micro":case"micros":return dE(BigInt(s));case"milli":case"millis":return dI(i);case"second":case"seconds":return dN(i);case"minute":case"minutes":return dR(i);case"hour":case"hours":return dA(i);case"day":case"days":return dF(i);case"week":case"weeks":return dj(i)}}}throw Error("Invalid DurationInput")},dy={_tag:"Millis",millis:0},dv={_tag:"Infinity"},d_={[du]:du,[ed](){return eS(this,e_(this.value))},[ek](e){return dS(e)&&dK(this,e)},toString(){return`Duration(${dJ(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:d$(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[eN](){return this.toJSON()},pipe(){return eC(this,arguments)}},dw=e=>{let t=Object.create(d_);return $(e)?isNaN(e)||e<=0?t.value=dy:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(1e6*e))}:t.value=dv:e<=dp?t.value=dy:t.value={_tag:"Nanos",nanos:e},t},dS=e=>G(e,du),dk=dw(0),dO=dw(1/0),dT=e=>dw(e),dE=e=>dw(e*dh),dI=e=>dw(e),dN=e=>dw(1e3*e),dR=e=>dw(6e4*e),dA=e=>dw(36e5*e),dF=e=>dw(864e5*e),dj=e=>dw(6048e5*e),dC=e=>{let t=dx(e);switch(t.value._tag){case"Infinity":return 1/0;case"Nanos":return Number(t.value.nanos)/1e6;case"Millis":return t.value.millis}},dM=e=>{let t=dx(e);switch(t.value._tag){case"Infinity":return nq();case"Nanos":return tt(t.value.nanos);case"Millis":return tt(BigInt(Math.round(1e6*t.value.millis)))}},dL=e=>{let t=dx(e);switch(t.value._tag){case"Infinity":throw Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(1e6*t.value.millis))}},d$=e=>{let t=dx(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/dg),Number(t.value.nanos%dg)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},dP=k(2,(e,t)=>{let s=dx(e);switch(s.value._tag){case"Nanos":return t.onNanos(s.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(s.value.millis)}}),dU=k(3,(e,t,s)=>{let n=dx(e),i=dx(t);if("Infinity"===n.value._tag||"Infinity"===i.value._tag)return s.onMillis(dC(n),dC(i));if("Nanos"===n.value._tag||"Nanos"===i.value._tag){let e="Nanos"===n.value._tag?n.value.nanos:BigInt(Math.round(1e6*n.value.millis)),t="Nanos"===i.value._tag?i.value.nanos:BigInt(Math.round(1e6*i.value.millis));return s.onNanos(e,t)}return s.onMillis(n.value.millis,i.value.millis)}),dD=(e,t)=>dU(e,t,{onMillis:(e,t)=>e===t,onNanos:(e,t)=>e===t}),dz=k(2,(e,t)=>dP(e,{onMillis:e=>dw(e*t),onNanos:e=>dw(e*BigInt(t))})),dB=k(2,(e,t)=>dU(e,t,{onMillis:(e,t)=>dw(e+t),onNanos:(e,t)=>dw(e+t)})),dZ=((e,t)=>dU(e,t,{onMillis:(e,t)=>e<t,onNanos:(e,t)=>e<t}),k(2,(e,t)=>dU(e,t,{onMillis:(e,t)=>e<=t,onNanos:(e,t)=>e<=t}))),dq=k(2,(e,t)=>dU(e,t,{onMillis:(e,t)=>e>=t,onNanos:(e,t)=>e>=t})),dK=k(2,(e,t)=>dD(dx(e),dx(t))),dJ=e=>{let t=dx(e),s=[];if("Infinity"===t.value._tag)return"Infinity";let n=dL(t);n%df&&s.push(`${n%df}ns`);let i=n/df;i%dh!==dp&&s.push(`${i%dh}ms`);let r=i/dh;r%dm!==dp&&s.push(`${r%dm}s`);let a=r/dm;a%dm!==dp&&s.push(`${a%dm}m`);let o=a/dm;o%dd!==dp&&s.push(`${o%dd}h`);let l=o/dd;return l!==dp&&s.push(`${l}d`),s.reverse().join(" ")},dV=e=>{if("NaN"===e)return tt(NaN);if("Infinity"===e)return tt(1/0);if("-Infinity"===e)return tt(-1/0);if(""===e.trim())return te;let t=Number(e);return Number.isNaN(t)?te:tt(t)},dG=e=>e.toUpperCase(),dW=e=>e.toLowerCase(),dH=e=>0===e.length?e:dG(e[0])+e.slice(1),dY=e=>0===e.length?e:dW(e[0])+e.slice(1);class dQ{s;stripped;index;length;constructor(e,t=!1){this.s=e,this.stripped=t,this.index=0,this.length=e.length}next(){if(this.done)return{done:!0,value:void 0};let e=this.index;for(;!this.done&&!dX(this.s[this.index]);)this.index=this.index+1;let t=this.index;if(!this.done){let e=this.s[this.index];this.index=this.index+1,!this.done&&d0(e,this.s[this.index])&&(this.index=this.index+1),this.stripped||(t=this.index)}return{done:!1,value:this.s.substring(e,t)}}[Symbol.iterator](){return new dQ(this.s,this.stripped)}get done(){return this.index>=this.length}}let dX=e=>{let t=e.charCodeAt(0);return 13===t||10===t},d0=(e,t)=>13===e.charCodeAt(0)&&10===t.charCodeAt(0),d1=k(e=>V(e[0]),(e,...t)=>{let s={};for(let n of t)n in e&&(s[n]=e[n]);return s}),d2=k(e=>V(e[0]),(e,...t)=>{let s={...e};for(let e of t)delete s[e];return s}),d5=Symbol.for("@effect/schema/ArbitraryHookId"),d3=(e,t,s,n)=>(n.isSuspend?e.oneof({depthSize:1},e.constant([]),e.array(e.tuple(t,s),{minLength:1,maxLength:2})):e.array(e.tuple(t,s))).map(e=>{let t={};for(let[s,n]of e)t[s]=n;return t}),d4=(e,t,s)=>{let n=mn(t.constraints,ms(e));return d9(e.from,n?{...t,constraints:n}:t,s)},d9=(e,t,s)=>{let n=(null)(e);if(Option.isSome(n))switch(e._tag){case"Declaration":return n.value(...e.typeParameters.map(e=>d9(e,t,s)));case"Refinement":return n.value(d4(e,t,s));default:return n.value()}switch(e._tag){case"Declaration":throw Error(errors_.getArbitraryMissingAnnotationErrorMessage(s,e));case"Literal":return t=>t.constant(e.literal);case"UniqueSymbol":return t=>t.constant(e.symbol);case"UndefinedKeyword":case"VoidKeyword":return e=>e.constant(void 0);case"NeverKeyword":return()=>{throw Error(errors_.getArbitraryUnsupportedErrorMessage(s,e))};case"UnknownKeyword":case"AnyKeyword":return e=>e.anything();case"StringKeyword":return e=>t.constraints&&"StringConstraints"===t.constraints._tag?e.string(t.constraints.constraints):e.string();case"NumberKeyword":return e=>{if(t.constraints)switch(t.constraints._tag){case"NumberConstraints":return e.float(t.constraints.constraints);case"IntegerConstraints":return e.integer(t.constraints.constraints)}return e.float()};case"BooleanKeyword":return e=>e.boolean();case"BigIntKeyword":return e=>t.constraints&&"BigIntConstraints"===t.constraints._tag?e.bigInt(t.constraints.constraints):e.bigInt();case"SymbolKeyword":return e=>e.string().map(e=>Symbol.for(e));case"ObjectKeyword":return e=>e.oneof(e.object(),e.array(e.anything()));case"TemplateLiteral":return t=>{let s=t.string({maxLength:5}),n=t.float({noDefaultInfinity:!0}).filter(e=>!Number.isNaN(e)),i=[t.constant(e.head)];for(let r of e.spans)AST.isStringKeyword(r.type)?i.push(s):i.push(n),i.push(t.constant(r.literal));return t.tuple(...i).map(e=>e.join(""))};case"TupleType":{let n=[],i=!1,r=0;for(let a of e.elements)n.push(d9(a.type,t,s.concat(r++))),a.isOptional&&(i=!0);let a=e.rest.map(e=>d9(e.type,t,s));return s=>{let r=s.tuple(...n.map(e=>e(s)));if(i){let t=s.tuple(...e.elements.map(e=>e.isOptional?s.boolean():s.constant(!0)));r=r.chain(e=>t.map(t=>{for(let[s,n]of t.reverse().entries())n||e.splice(t.length-s,1);return e}))}if(Arr.isNonEmptyReadonlyArray(a)){let[e,...n]=a,i=e(s),o=t.constraints;r=r.chain(e=>{let n=s.array(i);return t.isSuspend?n=s.oneof({depthSize:1},s.constant([]),s.array(i,{minLength:1,maxLength:2})):o&&"ArrayConstraints"===o._tag&&(n=s.array(i,o.constraints)),n.map(t=>[...e,...t])});for(let e=0;e<n.length;e++)r=r.chain(t=>n[e](s).map(e=>[...t,e]))}return r}}case"TypeLiteral":{let n=e.propertySignatures.map(e=>d9(e.type,t,s.concat(e.name))),i=e.indexSignatures.map(e=>[d9(e.parameter,t,s),d9(e.type,t,s)]);return s=>{let r={},a=[];for(let t=0;t<n.length;t++){let i=e.propertySignatures[t],o=i.name;i.isOptional||a.push(o),r[o]=n[t](s)}let o=s.record(r,{requiredKeys:a});for(let e=0;e<i.length;e++){let n=i[e][0](s),r=i[e][1](s);o=o.chain(e=>d3(s,n,r,t).map(t=>({...t,...e})))}return o}}case"Union":{let n=e.types.map(e=>d9(e,t,s));return e=>e.oneof({depthSize:1},...n.map(t=>t(e)))}case"Enums":if(0===e.enums.length)throw Error(errors_.getArbitraryEmptyEnumErrorMessage(s));return t=>t.oneof(...e.enums.map(([e,s])=>t.constant(s)));case"Refinement":{let n=d4(e,t,s);return t=>n(t).filter(t=>Option.isNone(e.filter(t,AST.defaultParseOption,e)))}case"Suspend":{let n=util_.memoizeThunk(()=>d9(e.f(),{...t,isSuspend:!0},s));return e=>e.constant(null).chain(()=>n()(e))}case"Transformation":return d9(e.to,t,s)}};class d6{_tag="NumberConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.min)&&(this.constraints.min=Math.fround(e.min)),Predicate.isNumber(e.max)&&(this.constraints.max=Math.fround(e.max)),Predicate.isBoolean(e.noNaN)&&(this.constraints.noNaN=e.noNaN),Predicate.isBoolean(e.noDefaultInfinity)&&(this.constraints.noDefaultInfinity=e.noDefaultInfinity)}}class d8{_tag="StringConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.minLength)&&(this.constraints.minLength=e.minLength),Predicate.isNumber(e.maxLength)&&(this.constraints.maxLength=e.maxLength)}}class d7{_tag="IntegerConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.min)&&(this.constraints.min=e.min),Predicate.isNumber(e.max)&&(this.constraints.max=e.max)}}class me{_tag="ArrayConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.minLength)&&(this.constraints.minLength=e.minLength),Predicate.isNumber(e.maxLength)&&(this.constraints.maxLength=e.maxLength)}}class mt{_tag="BigIntConstraints";constraints;constructor(e){this.constraints={},Predicate.isBigInt(e.min)&&(this.constraints.min=e.min),Predicate.isBigInt(e.max)&&(this.constraints.max=e.max)}}let ms=e=>{let t=e.annotations[AST.TypeAnnotationId],s=e.annotations[AST.JSONSchemaAnnotationId];switch(t){case filters_.IntTypeId:return new d7({});case filters_.GreaterThanTypeId:case filters_.GreaterThanOrEqualToTypeId:case filters_.LessThanTypeId:case filters_.LessThanOrEqualToTypeId:case filters_.BetweenTypeId:return new d6({min:s.exclusiveMinimum??s.minimum,max:s.exclusiveMaximum??s.maximum});case filters_.GreaterThanBigintTypeId:case filters_.GreaterThanOrEqualToBigIntTypeId:case filters_.LessThanBigIntTypeId:case filters_.LessThanOrEqualToBigIntTypeId:case filters_.BetweenBigintTypeId:return new mt(e.annotations[t]);case filters_.MinLengthTypeId:case filters_.MaxLengthTypeId:case filters_.LengthTypeId:return new d8(s);case filters_.MinItemsTypeId:case filters_.MaxItemsTypeId:case filters_.ItemsCountTypeId:return new me({minLength:s.minItems,maxLength:s.maxItems})}},mn=(e,t)=>{if(void 0===e)return t;if(void 0===t)return e;switch(e._tag){case"ArrayConstraints":if("ArrayConstraints"===t._tag)return new me({minLength:mr(e.constraints.minLength,t.constraints.minLength),maxLength:ma(e.constraints.maxLength,t.constraints.maxLength)});break;case"NumberConstraints":switch(t._tag){case"NumberConstraints":return new d6({min:mr(e.constraints.min,t.constraints.min),max:ma(e.constraints.max,t.constraints.max),noNaN:mi(e.constraints.noNaN,t.constraints.noNaN),noDefaultInfinity:mi(e.constraints.noDefaultInfinity,t.constraints.noDefaultInfinity)});case"IntegerConstraints":return new d7({min:mr(e.constraints.min,t.constraints.min),max:ma(e.constraints.max,t.constraints.max)})}break;case"BigIntConstraints":if("BigIntConstraints"===t._tag)return new mt({min:mr(e.constraints.min,t.constraints.min),max:ma(e.constraints.max,t.constraints.max)});break;case"StringConstraints":if("StringConstraints"===t._tag)return new d8({minLength:mr(e.constraints.minLength,t.constraints.minLength),maxLength:ma(e.constraints.maxLength,t.constraints.maxLength)});break;case"IntegerConstraints":switch(t._tag){case"NumberConstraints":case"IntegerConstraints":return new d7({min:mr(e.constraints.min,t.constraints.min),max:ma(e.constraints.max,t.constraints.max)})}}},mi=(e,t)=>void 0===e?t:void 0===t?e:e||t;function mr(e,t){return void 0===e?t:void 0===t?e:e<=t?t:e}function ma(e,t){return void 0===e?t:void 0===t?e:e<=t?e:t}let mo=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),ml=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return ml(e,t.from)}},mc=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),mu=e=>{let t,s=!1;return()=>(s||(t=e(),s=!0),t)},mp=e=>{if(L(e))return JSON.stringify(e);if($(e)||null==e||P(e)||D(e)||Q(e))return String(e);if(U(e))return String(e)+"n";if(!il(e)&&G(e,"toString")&&z(e.toString)&&e.toString!==Object.prototype.toString)return e.toString();try{if(JSON.stringify(e),il(e))return`[${e.map(mp).join(",")}]`;return`{${mc(e).map(t=>`${L(t)?JSON.stringify(t):String(t)}:${mp(e[t])}`).join(",")}}`}catch(t){return String(e)}},md=e=>"string"==typeof e?JSON.stringify(e):String(e),mm=e=>Array.isArray(e),mh=e=>!Array.isArray(e),mf=e=>`[${md(e)}]`,mg=e=>mm(e)?e.map(mf).join(""):mf(e),mb=(e,t,s,n)=>{let i=e;return s&&iu(s)&&(i+=`
at path: ${mg(s)}`),void 0!==t&&(i+=`
details: ${t}`),n&&(i+=`
schema (${n._tag}): ${n}`),i},mx=(e,t,s)=>mb("Missing annotation",e,t,s),my=(e,t,s)=>mb("Unsupported schema or overlapping types",`cannot extend ${e} with ${t}`,s),mv=e=>mb("Unsupported key schema",void 0,void 0,e),m_=e=>mb("Unsupported literal",`literal value: ${mp(e)}`),mw=e=>mb("Duplicate index signature",`${e} index signature`),mS=mb("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),mk=mb("Invalid element","A required element cannot follow an optional element. ts(1257)"),mO=e=>mb("Duplicate property signature transformation",`Duplicate key ${mp(e)}`),mT=e=>mb("Duplicate property signature",`Duplicate key ${mp(e)}`),mE=Symbol.for("@effect/schema/annotation/Type"),mI=Symbol.for("@effect/schema/annotation/Message"),mN=Symbol.for("@effect/schema/annotation/MissingMessage"),mR=Symbol.for("@effect/schema/annotation/Identifier"),mA=Symbol.for("@effect/schema/annotation/Title"),mF=Symbol.for("@effect/schema/annotation/Description"),mj=Symbol.for("@effect/schema/annotation/Examples"),mC=Symbol.for("@effect/schema/annotation/Default"),mM=Symbol.for("@effect/schema/annotation/JSONSchema"),mL=Symbol.for("@effect/schema/annotation/Documentation"),m$=Symbol.for("@effect/schema/annotation/Concurrency"),mP=Symbol.for("@effect/schema/annotation/Batching"),mU=Symbol.for("@effect/schema/annotation/ParseIssueTitle"),mD=Symbol.for("@effect/schema/annotation/ParseOptions"),mz=Symbol.for("@effect/schema/annotation/Surrogate"),mB=Symbol.for("@effect/schema/annotation/StableFilter"),mZ=k(2,(e,t)=>Object.prototype.hasOwnProperty.call(e.annotations,t)?tt(e.annotations[t]):nq()),mq=mZ(mI),mK=mZ(mN),mJ=mZ(mA),mV=mZ(mR),mG=mZ(mF),mW=mZ(m$),mH=mZ(mP),mY=mZ(mU),mQ=mZ(mD),mX=mZ(mz),m0=mZ(mB),m1=Symbol.for("@effect/schema/annotation/JSONIdentifier"),m2=mZ(m1);class m5{typeParameters;decodeUnknown;encodeUnknown;annotations;_tag="Declaration";constructor(e,t,s,n={}){this.typeParameters=e,this.decodeUnknown=t,this.encodeUnknown=s,this.annotations=n}toString(){return nJ(fd(this),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(e=>e.toJSON()),annotations:fi(this.annotations)}}}let m3=e=>t=>t._tag===e;class m4{literal;annotations;_tag="Literal";constructor(e,t={}){this.literal=e,this.annotations=t}toString(){return nJ(fd(this),()=>mp(this.literal))}toJSON(){return{_tag:this._tag,literal:U(this.literal)?String(this.literal):this.literal,annotations:fi(this.annotations)}}}let m9=m3("Literal"),m6=new m4(null,{[mR]:"null"});class m8{symbol;annotations;_tag="UniqueSymbol";constructor(e,t={}){this.symbol=e,this.annotations=t}toString(){return nJ(fd(this),()=>mp(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:fi(this.annotations)}}}class m7{annotations;_tag="UndefinedKeyword";constructor(e={}){this.annotations=e}toString(){return fp(this)}toJSON(){return{_tag:this._tag,annotations:fi(this.annotations)}}}let he=new m7({[mA]:"undefined"});class ht{annotations;_tag="VoidKeyword";constructor(e={}){this.annotations=e}toString(){return fp(this)}toJSON(){return{_tag:this._tag,annotations:fi(this.annotations)}}}let hs=new ht({[mA]:"void"});class hn{annotations;_tag="NeverKeyword";constructor(e={}){this.annotations=e}toString(){return fp(this)}toJSON(){return{_tag:this._tag,annotations:fi(this.annotations)}}}let hi=new hn({[mA]:"never"});class hr{annotations;_tag="UnknownKeyword";constructor(e={}){this.annotations=e}toString(){return fp(this)}toJSON(){return{_tag:this._tag,annotations:fi(this.annotations)}}}let ha=new hr({[mA]:"unknown"});class ho{annotations;_tag="AnyKeyword";constructor(e={}){this.annotations=e}toString(){return fp(this)}toJSON(){return{_tag:this._tag,annotations:fi(this.annotations)}}}let hl=new ho({[mA]:"any"});class hc{annotations;_tag="StringKeyword";constructor(e={}){this.annotations=e}toString(){return fp(this)}toJSON(){return{_tag:this._tag,annotations:fi(this.annotations)}}}let hu=new hc({[mA]:"string",[mF]:"a string"}),hp=m3("StringKeyword");class hd{annotations;_tag="NumberKeyword";constructor(e={}){this.annotations=e}toString(){return fp(this)}toJSON(){return{_tag:this._tag,annotations:fi(this.annotations)}}}let hm=new hd({[mA]:"number",[mF]:"a number"}),hh=m3("NumberKeyword");class hf{annotations;_tag="BooleanKeyword";constructor(e={}){this.annotations=e}toString(){return fp(this)}toJSON(){return{_tag:this._tag,annotations:fi(this.annotations)}}}let hg=new hf({[mA]:"boolean",[mF]:"a boolean"});class hb{annotations;_tag="BigIntKeyword";constructor(e={}){this.annotations=e}toString(){return fp(this)}toJSON(){return{_tag:this._tag,annotations:fi(this.annotations)}}}let hx=new hb({[mA]:"bigint",[mF]:"a bigint"});class hy{annotations;_tag="SymbolKeyword";constructor(e={}){this.annotations=e}toString(){return fp(this)}toJSON(){return{_tag:this._tag,annotations:fi(this.annotations)}}}let hv=new hy({[mA]:"symbol",[mF]:"a symbol"}),h_=m3("SymbolKeyword");class hw{annotations;_tag="ObjectKeyword";constructor(e={}){this.annotations=e}toString(){return fp(this)}toJSON(){return{_tag:this._tag,annotations:fi(this.annotations)}}}let hS=new hw({[mR]:"object",[mA]:"object",[mF]:"an object in the TypeScript meaning, i.e. the `object` type"});class hk{type;annotations;constructor(e,t={}){this.type=e,this.annotations=t}toJSON(){return{type:this.type.toJSON(),annotations:fi(this.annotations)}}toString(){return String(this.type)}}class hO extends hk{isOptional;constructor(e,t,s={}){super(e,s),this.isOptional=t}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:fi(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}}let hT=e=>e.map(e=>e.type);class hE{elements;rest;isReadonly;annotations;_tag="TupleType";constructor(e,t,s,n={}){this.elements=e,this.rest=t,this.isReadonly=s,this.annotations=n;let i=!1,r=!1;for(let t of e)if(t.isOptional)i=!0;else if(i){r=!0;break}if(r||i&&t.length>1)throw Error(mk)}toString(){return nJ(fd(this),()=>hI(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(e=>e.toJSON()),rest:this.rest.map(e=>e.toJSON()),isReadonly:this.isReadonly,annotations:fi(this.annotations)}}}let hI=e=>{let t=e.elements.map(String).join(", ");return ii(e.rest,{onEmpty:()=>`readonly [${t}]`,onNonEmpty:(s,n)=>{let i=String(s),r=i.includes(" | ")?`(${i})`:i;if(n.length>0){let s=n.map(String).join(", ");return e.elements.length>0?`readonly [${t}, ...${r}[], ${s}]`:`readonly [...${r}[], ${s}]`}return e.elements.length>0?`readonly [${t}, ...${r}[]]`:`ReadonlyArray<${i}>`}})};class hN extends hO{name;isReadonly;constructor(e,t,s,n,i){super(t,s,i),this.name=e,this.isReadonly=n}toString(){return(this.isReadonly?"readonly ":"")+String(this.name)+(this.isOptional?"?":"")+": "+this.type}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:fi(this.annotations)}}}let hR=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return hR(e.from)}return!1};class hA{type;isReadonly;parameter;constructor(e,t,s){if(this.type=t,this.isReadonly=s,hR(e))this.parameter=e;else throw Error(mS)}toString(){return(this.isReadonly?"readonly ":"")+`[x: ${this.parameter}]: ${this.type}`}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}}class hF{annotations;_tag="TypeLiteral";propertySignatures;indexSignatures;constructor(e,t,s={}){this.annotations=s;let n={};for(let t=0;t<e.length;t++){let s=e[t].name;if(Object.prototype.hasOwnProperty.call(n,s))throw Error(mT(s));n[s]=null}let i={string:!1,symbol:!1};for(let e=0;e<t.length;e++){let s=fu(t[e].parameter);if(hp(s)){if(i.string)throw Error(mw("string"));i.string=!0}else if(h_(s)){if(i.symbol)throw Error(mw("symbol"));i.symbol=!0}}this.propertySignatures=fa(e),this.indexSignatures=fo(t)}toString(){return nJ(fd(this),()=>hC(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(e=>e.toJSON()),indexSignatures:this.indexSignatures.map(e=>e.toJSON()),annotations:fi(this.annotations)}}}let hj=e=>e.map(String).join("; "),hC=e=>{if(e.propertySignatures.length>0){let t=e.propertySignatures.map(String).join("; ");return e.indexSignatures.length>0?`{ ${t}; ${hj(e.indexSignatures)} }`:`{ ${t} }`}return e.indexSignatures.length>0?`{ ${hj(e.indexSignatures)} }`:"{}"},hM=m3("TypeLiteral"),hL=e=>e.filter(e=>e!==hi),h$=iO(n8(n6,e=>{switch(e._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),hP={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},hU=e=>i$(e,e=>hq(e)?hU(e.types):[e]),hD=e=>{let t=h$(e),s=[],n={},i=[];for(let e of t)switch(e._tag){case"NeverKeyword":break;case"AnyKeyword":return[hl];case"UnknownKeyword":return[ha];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":n[e._tag]||(n[e._tag]=e,s.push(e));break;case"Literal":{let t=typeof e.literal;switch(t){case"string":case"number":case"bigint":case"boolean":n[hP[t]]||i.includes(e.literal)||(i.push(e.literal),s.push(e));break;case"object":i.includes(e.literal)||(i.push(e.literal),s.push(e))}break}case"UniqueSymbol":n.SymbolKeyword||i.includes(e.symbol)||(i.push(e.symbol),s.push(e));break;case"TupleType":n.ObjectKeyword||s.push(e);break;case"TypeLiteral":0===e.propertySignatures.length&&0===e.indexSignatures.length?n["{}"]||(n["{}"]=e,s.push(e)):n.ObjectKeyword||s.push(e);break;default:s.push(e)}return s};class hz{types;annotations;static make=(e,t)=>{let s=[],n=new Set;for(let t=0;t<e.length;t++){let i=e[t];i===hi||n.has(i)||(n.add(i),s.push(i))}return hz.union(s,t)};static members=(e,t)=>hz.union(hL(e),t);static unify=(e,t)=>hz.union(hD(hU(e)),t);static union=(e,t)=>hZ(e)?new hz(e,t):1===e.length?e[0]:hi;_tag="Union";constructor(e,t={}){this.types=e,this.annotations=t}toString(){return nJ(fd(this),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(e=>e.toJSON()),annotations:fi(this.annotations)}}}let hB=(e,t)=>e.map(t),hZ=e=>e.length>1,hq=m3("Union"),hK=C(Symbol.for("@effect/schema/AST/toJSONMemoMap"),()=>new WeakMap);class hJ{f;annotations;_tag="Suspend";constructor(e,t={}){this.f=e,this.annotations=t,this.f=mu(e)}toString(){return fd(this).pipe(nV(()=>n0(nY(this.f)(),e=>fd(e))),nJ(()=>"<suspended schema>"))}toJSON(){let e=this.f(),t=hK.get(e);return t||(hK.set(e,{_tag:this._tag}),t={_tag:this._tag,ast:e.toJSON(),annotations:fi(this.annotations)},hK.set(e,t)),t}}class hV{from;filter;annotations;_tag="Refinement";constructor(e,t,s={}){this.from=e,this.filter=t,this.annotations=s}toString(){return nJ(fd(this),()=>`{ ${this.from} | filter }`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:fi(this.annotations)}}}let hG=m3("Refinement"),hW={};class hH{from;to;transformation;annotations;_tag="Transformation";constructor(e,t,s,n={}){this.from=e,this.to=t,this.transformation=s,this.annotations=n}toString(){return nJ(fd(this),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:fi(this.annotations)}}}let hY=m3("Transformation");class hQ{decode;encode;_tag="FinalTransformation";constructor(e,t){this.decode=e,this.encode=t}}class hX{_tag="ComposeTransformation"}class h0{from;to;decode;encode;constructor(e,t,s,n){this.from=e,this.to=t,this.decode=s,this.encode=n}}class h1{propertySignatureTransformations;_tag="TypeLiteralTransformation";constructor(e){this.propertySignatureTransformations=e;let t={},s={};for(let n of e){let e=n.from;if(t[e])throw Error(mO(e));t[e]=!0;let i=n.to;if(s[i])throw Error(mO(i));s[i]=!0}}}let h2=(r="TypeLiteralTransformation",e=>e._tag===r),h5=(e,t)=>{let s=Object.getOwnPropertyDescriptors(e);return s.annotations.value={...e.annotations,...t},Object.create(Object.getPrototypeOf(e),s)},h3=e=>{let t=`^${mo(e.head)}`;for(let s of e.spans)hp(s.type)?t+=".*":hh(s.type)&&(t+="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?"),t+=mo(s.literal);return new RegExp(t+="$")},h4=e=>{switch(e._tag){case"TupleType":{let t=!1,s=[];for(let n of e.elements)n.isOptional&&(t=!0),s.push(n.type);return t&&s.push(he),s=s.concat(hT(e.rest)),hz.make(s)}case"Refinement":return h4(e.from);case"Union":return hz.make(e.types.map(h4));case"Suspend":return h4(e.f())}throw Error(errors_.getASTUnsupportedSchema(e))},h9=(e,t)=>{let s=[],n=[],i=e=>{switch(e._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":n.push(new hA(e,t,!0));break;case"Literal":if(L(e.literal)||$(e.literal))s.push(new hN(e.literal,t,!1,!0));else throw Error(m_(e.literal));break;case"Enums":for(let[n,i]of e.enums)s.push(new hN(i,t,!1,!0));break;case"UniqueSymbol":s.push(new hN(e.symbol,t,!1,!0));break;case"Union":e.types.forEach(i);break;default:throw Error(mv(e))}};return i(e),{propertySignatures:s,indexSignatures:n}},h6=e=>{switch(e._tag){case"TupleType":return!1===e.isReadonly?e:new hE(e.elements,e.rest,!1,e.annotations);case"TypeLiteral":{let t=ft(e.propertySignatures,e=>!1===e.isReadonly?e:new hN(e.name,e.type,e.isOptional,!1,e.annotations)),s=ft(e.indexSignatures,e=>!1===e.isReadonly?e:new hA(e.parameter,e.type,!1));return t===e.propertySignatures&&s===e.indexSignatures?e:new hF(t,s,e.annotations)}case"Union":{let t=ft(e.types,h6);return t===e.types?e:hz.make(t,e.annotations)}case"Suspend":return new hJ(()=>h6(e.f()),e.annotations);case"Refinement":{let t=h6(e.from);return t===e.from?e:new hV(t,e.filter,e.annotations)}case"Transformation":{let t=h6(e.from),s=h6(e.to);return t===e.from&&s===e.to?e:new hH(t,s,e.transformation,e.annotations)}}return e},h8=e=>{switch(e._tag){case"Declaration":{let t=ft(e.typeParameters,h8);return t===e.typeParameters?e:new m5(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{let t=ft(e.elements,e=>{let t=h8(e.type);return t===e.type?e:new hO(t,e.isOptional)}),s=hT(e.rest),n=ft(s,h8);return t===e.elements&&n===s?e:new hE(t,n.map(e=>new hk(e)),e.isReadonly,e.annotations)}case"TypeLiteral":{let t=ft(e.propertySignatures,e=>{let t=h8(e.type);return t===e.type?e:new hN(e.name,t,e.isOptional,e.isReadonly)}),s=ft(e.indexSignatures,e=>{let t=h8(e.type);return t===e.type?e:new hA(e.parameter,t,e.isReadonly)});return t===e.propertySignatures&&s===e.indexSignatures?e:new hF(t,s,e.annotations)}case"Union":{let t=ft(e.types,h8);return t===e.types?e:hz.make(t,e.annotations)}case"Suspend":return new hJ(()=>h8(e.f()),e.annotations);case"Refinement":{let t=h8(e.from);return t===e.from?e:new hV(t,e.filter,e.annotations)}case"Transformation":return h8(e.to)}return e},h7=e=>nV(m2(e),()=>mV(e)),fe=e=>nK(h7(e),{onNone:()=>void 0,onSome:e=>({[m1]:e})});function ft(e,t){let s=!1,n=it(e.length);for(let i=0;i<e.length;i++){let r=e[i],a=t(r);a!==r&&(s=!0),n[i]=a}return s?n:e}let fs=(e,t)=>{switch(e._tag){case"Declaration":{let s=ft(e.typeParameters,e=>fs(e,t));return s===e.typeParameters?e:new m5(s,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{let s=ft(e.elements,e=>{let s=fs(e.type,t);return s===e.type?e:new hO(s,e.isOptional)}),n=hT(e.rest),i=ft(n,e=>fs(e,t));return s===e.elements&&i===n?e:new hE(s,i.map(e=>new hk(e)),e.isReadonly,fe(e))}case"TypeLiteral":{let s=ft(e.propertySignatures,e=>{let s=fs(e.type,t);return s===e.type?e:new hN(e.name,s,e.isOptional,e.isReadonly)}),n=ft(e.indexSignatures,e=>{let s=fs(e.type,t);return s===e.type?e:new hA(e.parameter,s,e.isReadonly)});return s===e.propertySignatures&&n===e.indexSignatures?e:new hF(s,n,fe(e))}case"Union":{let s=ft(e.types,e=>fs(e,t));return s===e.types?e:hz.make(s,fe(e))}case"Suspend":return new hJ(()=>fs(e.f(),t),fe(e));case"Refinement":{let s=fs(e.from,t);if(t){if(s===e.from)return e;if(!hY(e.from)){let t=m0(e);if(e7(t)&&!0===t.value)return new hV(s,e.filter)}}return s}case"Transformation":return fs(e.from,t)}return e},fn=e=>fs(e,!1),fi=e=>{let t={};for(let s of Object.getOwnPropertySymbols(e))t[String(s)]=e[s];return t},fr=e=>{switch(e._tag){case"NeverKeyword":return 0;case"Literal":case"UndefinedKeyword":case"VoidKeyword":case"UniqueSymbol":return 1;case"BooleanKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3;case"ObjectKeyword":return 5;case"UnknownKeyword":case"AnyKeyword":return 6;default:return 4}},fa=iO(n8(n6,e=>fr(e.type))),fo=iO(n8(n6,e=>{switch(fu(e.parameter)._tag){case"StringKeyword":return 2;case"SymbolKeyword":return 3;case"TemplateLiteral":return 1}})),fl=e=>e.reduce(null,null),fc=e=>{switch(e._tag){case"TupleType":return[2,e.elements.length,e.rest.length];case"TypeLiteral":{let t=e.propertySignatures.length,s=e.indexSignatures.length;return t+s===0?[-4,0,0]:[4,t,s]}case"Declaration":{let t=mX(e);if(Option.isSome(t)){let[e,s,n]=fc(t.value);return[6,s,n]}return[6,0,0]}case"Suspend":return[8,0,0];case"Union":return fl(e.types.map(fc));case"Refinement":{let[t,s,n]=fc(e.from);return[t+1,s,n]}case"Transformation":return fc(e.from);case"ObjectKeyword":return[-2,0,0];case"UnknownKeyword":case"AnyKeyword":return[-4,0,0];default:return null}},fu=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return fu(e.from)}},fp=e=>nJ(fd(e),()=>e._tag),fd=e=>mV(e).pipe(nV(()=>mJ(e)),nV(()=>mG(e))),fm=Symbol.for("@effect/schema/EquivalenceHookId"),fh=Symbol.for("@effect/schema/TypeId/GreaterThan"),ff=Symbol.for("@effect/schema/TypeId/GreaterThanOrEqualTo"),fg=Symbol.for("@effect/schema/TypeId/LessThan"),fb=Symbol.for("@effect/schema/TypeId/LessThanOrEqualTo"),fx=Symbol.for("@effect/schema/TypeId/Int"),fy=Symbol.for("@effect/schema/TypeId/MinLength"),fv=Symbol.for("@effect/schema/TypeId/Length"),f_=Symbol.for("effect/Clock"),fw=tg("effect/Clock"),fS=2147483648-1,fk={unsafeSchedule(e,t){let s=dC(t);if(s>fS)return I;let n=!1,i=setTimeout(()=>{n=!0,e()},s);return()=>(clearTimeout(i),!n)}},fO=function(){let e=BigInt(1e6);if("undefined"==typeof performance)return()=>BigInt(Date.now())*e;let t=BigInt(Date.now())*e-BigInt(Math.round(1e6*performance.now()));return()=>t+BigInt(Math.round(1e6*performance.now()))}(),fT=function(){let e="object"==typeof process&&"hrtime"in process&&"function"==typeof process.hrtime.bigint?process.hrtime:void 0;if(!e)return fO;let t=fO()-e.bigint();return()=>t+e.bigint()}();class fE{[f_]=f_;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return fT()}currentTimeMillis=uE(()=>this.unsafeCurrentTimeMillis());currentTimeNanos=uE(()=>this.unsafeCurrentTimeNanos());scheduler(){return uO(fk)}sleep(e){return cY(t=>cG(uE(fk.unsafeSchedule(()=>t(uj),e))))}}let fI="InvalidData",fN="MissingData",fR="SourceUnavailable",fA="Unsupported",fF=Symbol.for("effect/ConfigError"),fj={_tag:"ConfigError",[fF]:fF},fC=(e,t)=>{let s=Object.create(fj);return s._op="And",s.left=e,s.right=t,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),s},fM=(e,t)=>{let s=Object.create(fj);return s._op="Or",s.left=e,s.right=t,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),s},fL=(e,t,s={pathDelim:"."})=>{let n=Object.create(fj);return n._op=fI,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){let e=R(this.path,iq(s.pathDelim));return`(Invalid data at ${e}: "${this.message}")`}}),n},f$=(e,t,s={pathDelim:"."})=>{let n=Object.create(fj);return n._op=fN,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){let e=R(this.path,iq(s.pathDelim));return`(Missing data at ${e}: "${this.message}")`}}),n},fP=(e,t,s,n={pathDelim:"."})=>{let i=Object.create(fj);return i._op=fR,i.path=e,i.message=t,i.cause=s,Object.defineProperty(i,"toString",{enumerable:!1,value(){let e=R(this.path,iq(n.pathDelim));return`(Source unavailable at ${e}: "${this.message}")`}}),i},fU=(e,t,s={pathDelim:"."})=>{let n=Object.create(fj);return n._op=fA,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){let e=R(this.path,iq(s.pathDelim));return`(Unsupported operation at ${e}: "${this.message}")`}}),n},fD=k(2,(e,t)=>{switch(e._op){case"And":return fC(fD(e.left,t),fD(e.right,t));case"Or":return fM(fD(e.left,t),fD(e.right,t));case fI:return fL([...t,...e.path],e.message);case fN:return f$([...t,...e.path],e.message);case fR:return fP([...t,...e.path],e.message,e.cause);case fA:return fU([...t,...e.path],e.message)}}),fz={_tag:"Empty"},fB=k(2,(e,t)=>{let s=on(t),n=e;for(;oe(s);){let e=s.head;switch(e._tag){case"Empty":s=s.tail;break;case"AndThen":s=ot(e.first,ot(e.second,s.tail));break;case"MapName":n=iL(n,e.f),s=s.tail;break;case"Nested":n=ir(n,e.name),s=s.tail;break;case"Unnested":if(!R(ig(n),n3(e.name)))return tE(f$(n,`Expected ${e.name} to be in path in ConfigProvider#unnested`));n=iv(n),s=s.tail}}return tI(n)}),fZ=(e,t)=>[...e,...t],fq=Symbol.for("effect/ConfigProvider"),fK=tg("effect/ConfigProvider"),fJ=Symbol.for("effect/ConfigProviderFlat"),fV=e=>({[fq]:fq,pipe(){return eC(this,arguments)},...e}),fG=e=>({[fJ]:fJ,patch:e.patch,load:(t,s,n=!0)=>e.load(t,s,n),enumerateChildren:e.enumerateChildren}),fW=e=>fV({load:t=>ui(fQ(e,iC(),t,!1),e=>nK(ig(e),{onNone:()=>c8(f$(iC(),`Expected a single value having structure: ${t}`)),onSome:uO})),flattened:e}),fH=(e,t,s,n)=>{let i=iz(s.length,t=>t>=n.length?nq():tt([e(t),t+1])),r=iz(n.length,e=>e>=s.length?nq():tt([t(e),e+1]));return[fZ(s,i),fZ(n,r)]},fY=(e,t)=>{let s=t;if("Nested"===s._tag){let t=e.slice();for(;"Nested"===s._tag;)t.push(s.name),s=s.config;return t}return e},fQ=(e,t,s,n)=>{switch(s._tag){case"Constant":return uO(iM(s.value));case"Described":return uT(()=>fQ(e,t,s.config,n));case"Fail":return c8(f$(t,s.message));case"Fallback":return R(uT(()=>fQ(e,t,s.first,n)),cX(i=>s.condition(i)?R(fQ(e,t,s.second,n),cX(e=>c8(fM(i,e)))):c8(i)));case"Lazy":return uT(()=>fQ(e,t,s.config(),n));case"MapOrFail":return uT(()=>R(fQ(e,t,s.original,n),ui(up(e=>R(s.mapOrFail(e),ux(fD(fY(t,s.original))))))));case"Nested":return uT(()=>fQ(e,fZ(t,iM(s.name)),s.config,n));case"Primitive":return R(fB(t,e.patch),ui(t=>R(e.load(t,s,n),ui(e=>{if(0===e.length){let e=R(ix(t),nJ(()=>"<n/a>"));return c8(f$([],`Expected ${s.description} with name ${e}`))}return uO(e)}))));case"Sequence":return R(fB(t,e.patch),ui(n=>R(e.enumerateChildren(n),ui(f5),ui(i=>0===i.length?uT(()=>ug(fQ(e,n,s.config,!0),iM)):R(up(i,n=>fQ(e,ia(t,`[${n}]`),s.config,!0)),ug(e=>{let t=iP(e);return 0===t.length?iM(iC()):iM(t)}))))));case"HashMap":return uT(()=>R(fB(t,e.patch),ui(t=>R(e.enumerateChildren(t),ui(i=>R(i,up(i=>fQ(e,fZ(t,iM(i)),s.valueConfig,n)),ug(e=>0===e.length?iM(rW()):R(f2(e),iL(e=>aX(iT(is(i),e)))))))))));case"ZipWith":return uT(()=>R(fQ(e,t,s.left,n),c9,ui(i=>R(fQ(e,t,s.right,n),c9,ui(e=>{if(tO(i)&&tO(e))return c8(fC(i.left,e.left));if(tO(i)&&tT(e))return c8(i.left);if(tT(i)&&tO(e))return c8(e.left);if(tT(i)&&tT(e)){let n=R(t,iq(".")),r=fX(t,n),[a,o]=fH(r,r,R(i.right,iL(tI)),R(e.right,iL(tI)));return R(a,iT(o),up(([e,t])=>R(uU(e,t),ug(([e,t])=>s.zip(e,t)))))}throw Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},fX=(e,t)=>s=>tE(f$(e,`The element at index ${s} in a sequence at path "${t}" was missing`)),f0=(e,t)=>e.split(RegExp(`\\s*${mo(t)}\\s*`)),f1=(e,t,s,n,i)=>i?R(f0(e,n),up(e=>s.parse(e.trim())),ux(fD(t))):R(s.parse(e),ub({onFailure:fD(t),onSuccess:iM})),f2=e=>Object.keys(e[0]).map(t=>e.map(e=>e[t])),f5=e=>R(up(e,f4),ub({onFailure:()=>iC(),onSuccess:iO(n6)}),c9,ug(tR)),f3=/^(\[(\d+)\])$/,f4=e=>{let t=e.match(f3);if(null!==t){let e=t[2];return R(void 0!==e&&e.length>0?tt(e):nq(),n0(f9))}return nq()},f9=e=>{let t=Number.parseInt(e);return Number.isNaN(t)?nq():tt(t)},f6=Symbol.for("effect/Console"),f8=tg("effect/Console"),f7={[f6]:f6,assert:(e,...t)=>uE(()=>{console.assert(e,...t)}),clear:uE(()=>{console.clear()}),count:e=>uE(()=>{console.count(e)}),countReset:e=>uE(()=>{console.countReset(e)}),debug:(...e)=>uE(()=>{console.debug(...e)}),dir:(e,t)=>uE(()=>{console.dir(e,t)}),dirxml:(...e)=>uE(()=>{console.dirxml(...e)}),error:(...e)=>uE(()=>{console.error(...e)}),group:e=>e?.collapsed?uE(()=>console.groupCollapsed(e?.label)):uE(()=>console.group(e?.label)),groupEnd:uE(()=>{console.groupEnd()}),info:(...e)=>uE(()=>{console.info(...e)}),log:(...e)=>uE(()=>{console.log(...e)}),table:(e,t)=>uE(()=>{console.table(e,t)}),time:e=>uE(()=>console.time(e)),timeEnd:e=>uE(()=>console.timeEnd(e)),timeLog:(e,...t)=>uE(()=>{console.timeLog(e,...t)}),trace:(...e)=>uE(()=>{console.trace(...e)}),warn:(...e)=>uE(()=>{console.warn(...e)}),unsafe:console},ge=Symbol.for("effect/Random"),gt=tg("effect/Random");class gs{seed;[ge]=ge;PRNG;constructor(e){this.seed=e,this.PRNG=new ei(e)}get next(){return uE(()=>this.PRNG.number())}get nextBoolean(){return ug(this.next,e=>e>.5)}get nextInt(){return uE(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(e,t){return ug(this.next,s=>(t-e)*s+e)}nextIntBetween(e,t){return uE(()=>this.PRNG.integer(t-e)+e)}shuffle(e){return gn(e,e=>this.nextIntBetween(0,e))}}let gn=(e,t)=>uT(()=>R(uE(()=>Array.from(e)),ui(e=>{let s=[];for(let t=e.length;t>=2;t-=1)s.push(t);return R(s,ud(s=>R(t(s),ug(t=>gi(e,s-1,t)))),cV(rp(e)))}))),gi=(e,t,s)=>{let n=e[t];return e[t]=e[s],e[s]=n,e},gr=R(tx(),td(fw,new fE),td(f8,f7),td(gt,new gs(4294967296*Math.random()>>>0)),td(fK,(e=>{let{pathDelim:t,seqDelim:s}=Object.assign({},{pathDelim:"_",seqDelim:","},e),n=e=>R(e,iq(t)),i=e=>e.split(t),r=()=>"undefined"!=typeof process&&"env"in process&&"object"==typeof process.env?process.env:{};return fW(fG({load:(e,t,i=!0)=>{let a=n(e),o=r();return R(a in o?tt(o[a]):nq(),ux(()=>f$(e,`Expected ${a} to exist in the process context`)),ui(n=>f1(n,e,t,s,i)))},enumerateChildren:e=>uE(()=>a_(Object.keys(r()).map(e=>i(e.toUpperCase())).filter(t=>{for(let s=0;s<e.length;s++){let n=R(e,ih(s)),i=t[s];if(void 0===i||n!==i)return!1}return!0}).flatMap(t=>t.slice(e.length,e.length+1)))),patch:fz}))})()),td(cN,{[cI]:cI,span:(e,t,s,n,i,r)=>new cF(e,t,s,n,i,r),context:e=>e()})),ga=C(Symbol.for("effect/DefaultServices/currentServices"),()=>pe(gr)),go=e=>uQ(ga,t=>e(tm(t,fw))),gl=go(e=>e.currentTimeMillis);a=e=>e.next,uQ(ga,e=>a(tm(e,gt)));let gc=e=>ui(us,t=>p2(e,um(t))),gu="Sequential",gp="Parallel",gd={_tag:gu},gm=e=>e._tag===gu,gh=e=>e._tag===gp,gf={_tag:gp},gg=e=>({_tag:"ParallelN",parallelism:e}),gb=Symbol.for("effect/FiberRefs");class gx{locals;[gb]=gb;constructor(e){this.locals=e}pipe(){return eC(this,arguments)}}let gy=(e,t,s,n=!1)=>{let i,r=t,a=s,o=n;for(;void 0===i;)if(iu(r)&&iu(a)){let e=ib(r)[0],t=iv(r),s=ib(a)[0],n=ib(a)[1],l=iv(a);e.startTimeMillis<s.startTimeMillis?(a=l,o=!0):e.startTimeMillis>s.startTimeMillis?r=t:e.id<s.id?(a=l,o=!0):e.id>s.id?r=t:i=[n,o]}else i=[e.initial,!0];return i},gv=k(3,(e,t,s)=>{let n=new Map(e.locals);return s.locals.forEach((e,s)=>{let i=e[0][1];if(!e[0][0][ek](t)){if(!n.has(s)){if(eO(i,s.initial))return;n.set(s,[[t,s.join(s.initial,i)]]);return}let r=n.get(s),[a,o]=gy(s,r,e);if(o){let e=s.diff(a,i),o=r[0][1],l=s.join(o,s.patch(e)(o));if(!eO(o,l)){let e;let i=r[0][0];e=i[ek](t)?[[i,l],...r.slice(1)]:[[t,l],...r],n.set(s,e)}}}}),new gx(n)}),g_=k(2,(e,t)=>{let s=new Map;return gw(e,s,t),new gx(s)}),gw=(e,t,s)=>{e.locals.forEach((e,n)=>{let i=e[0][1],r=n.patch(n.fork)(i);eO(i,r)?t.set(n,e):t.set(n,[[s,r],...e])})},gS=k(2,(e,t)=>{let s=new Map(e.locals);return s.delete(t),new gx(s)}),gk=k(2,(e,t)=>e.locals.has(t)?tt(ib(e.locals.get(t))[1]):nq()),gO=k(2,(e,t)=>R(gk(e,t),nJ(()=>t.initial))),gT=k(2,(e,{fiberId:t,fiberRef:s,value:n})=>{if(0===e.locals.size)return new gx(new Map([[s,[[t,n]]]]));let i=new Map(e.locals);return gE(i,t,s,n),new gx(i)}),gE=(e,t,s,n)=>{let i;let r=e.get(s)??[];if(iu(r)){let[e,s]=ib(r);if(e[ek](t)){if(eO(s,n))return;i=[[t,n],...r.slice(1)]}else i=[[t,n],...r]}else i=[[t,n]];e.set(s,i)},gI=k(2,(e,{entries:t,forkAs:s})=>{if(0===e.locals.size)return new gx(new Map(t));let n=new Map(e.locals);return void 0!==s&&gw(e,n,s),t.forEach(([e,t])=>{1===t.length?gE(n,t[0][0],e,t[0][1]):t.forEach(([t,s])=>{gE(n,t,e,s)})}),new gx(n)}),gN="Empty",gR="Remove",gA="Update",gF="AndThen",gj={_tag:gN},gC=(e,t)=>{let s=new Map(e.locals),n=gj;for(let[e,i]of t.locals.entries()){let t=ib(i)[1],r=s.get(e);if(void 0!==r){let s=ib(r)[1];eO(s,t)||(n=gM({_tag:gA,fiberRef:e,patch:e.diff(s,t)})(n))}else n=gM({_tag:"Add",fiberRef:e,value:t})(n);s.delete(e)}for(let[e]of s.entries())n=gM({_tag:gR,fiberRef:e})(n);return n},gM=k(2,(e,t)=>({_tag:gF,first:e,second:t})),gL=k(3,(e,t,s)=>{let n=s,i=iM(e);for(;iu(i);){let e=ib(i),s=iv(i);switch(e._tag){case gN:i=s;break;case"Add":n=gT(n,{fiberId:t,fiberRef:e.fiberRef,value:e.value}),i=s;break;case gR:n=gS(n,e.fiberRef),i=s;break;case gA:{let r=gO(n,e.fiberRef);n=gT(n,{fiberId:t,fiberRef:e.fiberRef,value:e.fiberRef.patch(e.patch)(r)}),i=s;break}case gF:i=ir(e.first)(ir(e.second)(s))}}return n}),g$="effect/FiberStatus",gP=Symbol.for(g$),gU="Done",gD="Running",gz="Suspended",gB=ey(`${g$}-${gU}`);class gZ{[gP]=gP;_tag=gU;[ed](){return gB}[ek](e){return gV(e)&&e._tag===gU}}class gq{runtimeFlags;[gP]=gP;_tag=gD;constructor(e){this.runtimeFlags=e}[ed](){return R(em(g$),ef(em(this._tag)),ef(em(this.runtimeFlags)),eS(this))}[ek](e){return gV(e)&&e._tag===gD&&this.runtimeFlags===e.runtimeFlags}}class gK{runtimeFlags;blockingOn;[gP]=gP;_tag=gz;constructor(e,t){this.runtimeFlags=e,this.blockingOn=t}[ed](){return R(em(g$),ef(em(this._tag)),ef(em(this.runtimeFlags)),ef(em(this.blockingOn)),eS(this))}[ek](e){return gV(e)&&e._tag===gz&&this.runtimeFlags===e.runtimeFlags&&eO(this.blockingOn,e.blockingOn)}}let gJ=new gZ,gV=e=>G(e,gP),gG=e=>new gq(e),gW=(e,t)=>new gK(e,t),gH=e=>e._tag===gU,gY={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return eC(this,arguments)}},gQ={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return eC(this,arguments)}},gX={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return eC(this,arguments)}},g0={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return eC(this,arguments)}},g1=(o=R(n6,n8(e=>e.ordinal)),k(2,(e,t)=>1===o(e,t))),g2=e=>{switch(e){case"All":return uK;case"Debug":return uV;case"Error":return gQ;case"Fatal":return gY;case"Info":return uJ;case"Trace":return g0;case"None":return uG;case"Warning":return gX}},g5=Symbol.for("effect/Readable"),g3=Symbol.for("effect/Ref"),g4={_A:e=>e};class g9{ref;[g3]=g4;[g5];constructor(e){this.ref=e,this[g5]=g5,this.get=uE(()=>aI(this.ref))}get;modify(e){return uE(()=>{let t=aI(this.ref),[s,n]=e(t);return t!==n&&aN(n)(this.ref),s})}pipe(){return eC(this,arguments)}}let g6=e=>new g9(aT(e)),g8=e=>uE(()=>g6(e)),g7=e=>e.get,be=k(2,(e,t)=>e.modify(()=>[void 0,t])),bt=k(2,(e,t)=>e.modify(t)),bs=k(2,(e,t)=>e.modify(e=>[void 0,t(e)]));class bn{buckets=[];scheduleTask(e,t){let s,n;for(s=0;s<this.buckets.length;s++)if(this.buckets[s][0]<=t)n=this.buckets[s];else break;if(n)n[1].push(e);else{let n=[];for(let e=0;e<s;e++)n.push(this.buckets[e]);n.push([t,[e]]);for(let e=s;e<this.buckets.length;e++)n.push(this.buckets[e]);this.buckets=n}}}class bi{maxNextTickBeforeTimer;running=!1;tasks=new bn;constructor(e){this.maxNextTickBeforeTimer=e}starveInternal(e){let t=this.tasks.buckets;for(let[e,s]of(this.tasks.buckets=[],t))for(let e=0;e<s.length;e++)s[e]();0===this.tasks.buckets.length?this.running=!1:this.starve(e)}starve(e=0){e>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(e+1))}shouldYield(e){return e.currentOpCount>e.getFiberRef(pi)&&e.getFiberRef(pn)}scheduleTask(e,t){this.tasks.scheduleTask(e,t),this.running||(this.running=!0,this.starve())}}let br=C(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new bi(2048));class ba{tasks=new bn;deferred=!1;scheduleTask(e,t){this.deferred?br.scheduleTask(e,t):this.tasks.scheduleTask(e,t)}shouldYield(e){return e.currentOpCount>e.getFiberRef(pi)&&e.getFiberRef(pn)}flush(){for(;this.tasks.buckets.length>0;){let e=this.tasks.buckets;for(let[t,s]of(this.tasks.buckets=[],e))for(let e=0;e<s.length;e++)s[e]()}this.deferred=!0}}let bo=C(Symbol.for("effect/FiberRef/currentScheduler"),()=>u6(br)),bl=(e,t)=>({_tag:"Par",left:e,right:t}),bc=(e,t)=>({_tag:"Seq",left:e,right:t}),bu=e=>{let t=on(e),s=os();for(;;){let[e,n]=oo(t,[bx(),os()],([e,t],s)=>{let[n,i]=bp(s);return[bv(e,n),oi(t,i)]});if(s=bd(s,e),a7(n))return ol(s);t=n}throw Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},bp=e=>{let t=e,s=bx(),n=os(),i=os();for(;;)switch(t._tag){case"Empty":if(a7(n))return[s,i];t=n.head,n=n.tail;break;case"Par":n=ot(t.right,n),t=t.left;break;case"Seq":{let e=t.left,s=t.right;switch(e._tag){case"Empty":t=s;break;case"Par":{let n=e.left,i=e.right;t=bl(bc(n,s),bc(i,s));break}case"Seq":t=bc(e.left,bc(e.right,s));break;case"Single":t=e,i=ot(s,i)}break}case"Single":if(s=by(s,t),a7(n))return[s,i];t=n.head,n=n.tail}throw Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},bd=(e,t)=>{if(a7(e))return on(bS(t));if(b_(t))return e;let s=bN(e.head),n=bw(t);return 1===s.length&&1===n.length&&eO(s[0],n[0])?ot(bI(e.head,bS(t)),e.tail):ot(bS(t),e)},bm=Symbol.for("effect/RequestBlock/Entry"),bh={_R:e=>e},bf=Symbol.for("effect/RequestBlock/RequestBlockParallel"),bg={_R:e=>e};class bb{map;[bf]=bg;constructor(e){this.map=e}}let bx=()=>new bb(rW()),by=(e,t)=>new bb(r9(e.map,t.dataSource,e=>nG(nX(e,ry(t.blockedRequest)),()=>ru(t.blockedRequest)))),bv=(e,t)=>new bb(at(e.map,t.map,(e,t,s)=>r0(e,s,nK(rY(e,s),{onNone:()=>t,onSome:e=>rw(t,e)})))),b_=e=>a0(e.map),bw=e=>Array.from(r2(e.map)),bS=e=>bE(r7(e.map,e=>ru(e))),bk=Symbol.for("effect/RequestBlock/RequestBlockSequential"),bO={_R:e=>e};class bT{map;[bk]=bO;constructor(e){this.map=e}}let bE=e=>new bT(e),bI=(e,t)=>new bT(at(t.map,e.map,(e,t,s)=>r0(e,s,nK(rY(e,s),{onNone:()=>rl(),onSome:e=>rw(e,t)})))),bN=e=>Array.from(r2(e.map)),bR=e=>Array.from(e.map),bA=C(Symbol.for("effect/FiberRef/currentRequestMap"),()=>u6(new Map)),bF=(e,t,s,n)=>{switch(e){case void 0:return t();case"unbounded":return s();case"inherit":return uQ(pc,e=>"unbounded"===e?s():e>1?n(e):t());default:return e>1?n(e):t()}},bj=(e,t,s)=>{switch(e){case void 0:return t();case"unbounded":return s();case"inherit":return uQ(pc,e=>"unbounded"===e||e>1?s():t());default:return e>1?s():t()}},bC=e=>{let t=dx(e);return go(e=>e.sleep(t))},bM=e=>t=>{let s=t.label.replace(/[\s="]/g,"_");return`${s}=${e-t.startTime}ms`},bL="effect/MetricLabel",b$=Symbol.for(bL);class bP{key;value;[b$]=b$;_hash;constructor(e,t){this.key=e,this.value=t,this._hash=ey(bL+this.key+this.value)}[ed](){return this._hash}[ek](e){return bD(e)&&this.key===e.key&&this.value===e.value}pipe(){return eC(this,arguments)}}let bU=(e,t)=>new bP(e,t),bD=e=>G(e,b$),bz=e=>{let t,s;return"function"==typeof e?t=e:(t=e.try,s=e.catch),uE(()=>{try{return t()}catch(e){throw cL(lV(s?s(e):new pC(e)))}})},bB=k(3,(e,t,s)=>c0(e,W(t),s)),bZ=k(2,(e,t)=>{let s;return c0(e,e=>(s??=Object.keys(t),G(e,"_tag")&&L(e._tag)&&s.includes(e._tag)),e=>t[e._tag](e))}),bq=e=>b2(e,bK,gC),bK=((e,t,s)=>ui(e,e=>t(e)?uO(e):s(e)),cK(e=>uO(e.getFiberRefs()))),bJ=e=>(...t)=>{let s;let n=nW(e);for(let e=0,n=t.length;e<n;e++){let n=t[e];lQ(n)&&(s=void 0!==s?lY(s,n):n,t=[...t.slice(0,e),...t.slice(e+1)],e--)}return 0===t.length?t="":1===t.length&&(t=t[0]),void 0===s&&(s=lJ),cK(e=>(e.log(t,s,n),uj))},bV=bJ(uV),bG=bJ(uJ),bW=bJ(gX),bH=bJ(gQ),bY=k(2,(e,t)=>uc(e,{onFailure:e=>ut(()=>t(e)),onSuccess:uO})),bQ=e=>ug(e,e=>!e),bX=e=>b4((t,s)=>R(e,gL(t,s))),b0=k(3,(e,t,s)=>de(n=>dt(e,td(n,t,s)))),b1=k(3,(e,t,s)=>de(n=>ui(s,s=>dt(e,R(n,td(t,s)))))),b2=k(3,(e,t,s)=>ui(t,n=>ui(e,e=>ug(t,t=>[s(n,t),e])))),b5=k(2,(e,t)=>uc(e,{onFailure:e=>{let s=l6(e);switch(s._tag){case"Left":return uz(t(s.left),ue(e));case"Right":return ue(e)}},onSuccess:uO})),b3=e=>{let t,s;return("function"==typeof e?t=e:(t=e.try,s=e.catch),t.length>=1)?cY((e,n)=>{try{t(n).then(t=>e(pG(t)),t=>e(c8(s?s(t):new pC(t))))}catch(t){e(c8(s?s(t):new pC(t)))}}):cY(e=>{try{t().then(t=>e(pG(t)),t=>e(c8(s?s(t):new pC(t))))}catch(t){e(c8(s?s(t):new pC(t)))}})},b4=e=>cK(t=>(t.setFiberRefs(e(t.id(),t.getFiberRefs())),uj)),b9=k(2,(e,t)=>uT(()=>t()?ug(e,tt):uO(nq()))),b6=BigInt(0),b8=(e,t,s)=>{if(!1===e.getFiberRef(pf))return da(t);let n=e.getFiberRef(ps),i=e.getFiberRef(ga),r=tm(i,cN),a=tm(i,fw),o=e.getFiberRef(pg),l=e.getFiberRefs(),c=gk(l,pb),u=gk(l,px),p=s.parent?tt(s.parent):s.root?nq():th(n,cR),d="Some"===u._tag?void 0!==s.links?[...rm(u.value),...s.links??[]]:rm(u.value):s.links??iC(),m=r.span(t,p,s.context??tx(),d,o?a.unsafeCurrentTimeNanos():b6,s.kind??"internal");return"function"==typeof s.captureStackTrace&&cx.set(m,s.captureStackTrace),"Some"===c._tag&&ae(c.value,(e,t)=>m.attribute(t,e)),void 0!==s.attributes&&Object.entries(s.attributes).forEach(([e,t])=>m.attribute(e,t)),m},b7=(e,t,s,n)=>uE(()=>{"Ended"!==e.status._tag&&(pL(t)&&cx.has(e)&&e.attribute("code.stacktrace",cx.get(e)()),e.end(n?s.unsafeCurrentTimeNanos():b6,t))}),xe=(e,...t)=>{let s=cj(1===t.length?void 0:t[0]),n=t[t.length-1];return cK(t=>{let i=b8(t,e,s),r=t.getFiberRef(pg),a=tm(t.getFiberRef(ga),fw);return uy(n(i),e=>b7(i,e,a,r))})},xt=k(2,(e,t)=>b0(e,cR,t)),xs="InterruptSignal",xn="Stateful",xi="Resume",xr="YieldNow",xa=e=>({_tag:xs,cause:e}),xo=e=>({_tag:xn,onFiber:e}),xl=e=>({_tag:xi,effect:e}),xc=()=>({_tag:xr}),xu=Symbol.for("effect/FiberScope");class xp{[xu]=xu;fiberId=aG;roots=new Set;add(e,t){this.roots.add(t),t.addObserver(()=>{this.roots.delete(t)})}}class xd{fiberId;parent;[xu]=xu;constructor(e,t){this.fiberId=e,this.parent=t}add(e,t){this.parent.tell(xo(e=>{e.addChild(t),t.addObserver(()=>{e.removeChild(t)})}))}}let xm=e=>new xd(e.id(),e),xh=C(Symbol.for("effect/FiberScope/Global"),()=>new xp),xf=Symbol.for("effect/Fiber"),xg={_E:e=>e,_A:e=>e},xb={[xf]:xg,pipe(){return eC(this,arguments)}},xx=Symbol.for("effect/Fiber"),xy=((e,t)=>e.interruptAsFork(t),e=>uD(uo(e.await),e.inheritAll)),xv=((e,t)=>xv(e,e=>uE(()=>t(e))),k(2,(e,t)=>({...xb,id:()=>e.id(),await:ui(e.await,pZ(t)),children:e.children,inheritAll:e.inheritAll,poll:ui(e.poll,e=>{switch(e._tag){case"None":return uO(nq());case"Some":return R(pZ(e.value,t),ug(tt))}}),interruptAsFork:t=>e.interruptAsFork(t)})));(e,t)=>({...xb,id:()=>aZ(e.id(),t.id()),await:uB(e.await,t.await,(e,t)=>p$(e)?e:t),children:e.children,inheritAll:uz(t.inheritAll,e.inheritAll),poll:uB(e.poll,t.poll,(e,t)=>{switch(e._tag){case"None":return nq();case"Some":return p$(e.value)?e:t}}),interruptAsFork:s=>R(uq(e,s),uz(R(t,uq(s))),cG)});let x_="effect/FiberCurrent",xw=Symbol.for("effect/Logger"),xS={_Message:e=>e,_Output:e=>e},xk=e=>({[xw]:xS,log:e,pipe(){return eC(this,arguments)}}),xO=k(2,(e,t)=>xk(s=>t(e.log(s)))),xT=((e,t)=>xk(s=>[e.log(s),t.log(s)]),xk(({annotations:e,cause:t,date:s,fiberId:n,logLevel:i,message:r,spans:a})=>{let o=s.getTime(),l=`timestamp=${s.toISOString()} level=${i.label} fiber=${aJ(n)}`;if(Array.isArray(r))for(let e=0;e<r.length;e++){let t=eF(r[e]);t.length>0&&(l+=" message=",l=xN(t,l))}else{let e=eF(r);e.length>0&&(l+=" message=",l=xN(e,l))}if(null!=t&&"Empty"!==t._tag&&(l+=" cause=",l=xN(ch(t),l)),oe(a)){l+=" ";let e=!0;for(let t of a)e?e=!1:l+=" ",l+=R(t,bM(o))}if(R(e,r5)>0){l+=" ";let t=!0;for(let[s,n]of e)t?t=!1:l+=" ",l+=xF(s)+"=",l=xN(eF(n),l)}return l})),xE=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,xI=/^[^\s"=]+$/,xN=(e,t)=>t+(e.match(xI)?e:xE(e)),xR=(({annotations:e,cause:t,date:s,fiberId:n,logLevel:i,message:r,spans:a})=>{let o=s.getTime(),l=`timestamp=${s.toISOString()} level=${i.label} fiber=${aJ(n)}`;if(Array.isArray(r))for(let e=0;e<r.length;e++){let t=eF(r[e],0);t.length>0&&(l+=" message=",l=xC(t,l))}else{let e=eF(r,0);e.length>0&&(l+=" message=",l=xC(e,l))}if(null!=t&&"Empty"!==t._tag&&(l+=" cause=",l=xC(ch(t),l)),oe(a)){l+=" ";let e=!0;for(let t of a)e?e=!1:l+=" ",l+=R(t,xM(o))}if(R(e,r5)>0){l+=" ";let t=!0;for(let[s,n]of e)t?t=!1:l+=" ",l+=xF(s)+"=",l=xC(eF(n,0),l)}return l},xk(({annotations:e,cause:t,date:s,fiberId:n,logLevel:i,message:r,spans:a})=>{let o=s.getTime(),l={},c={};if(r5(e)>0)for(let[t,s]of e)l[t]=xA(s);if(oe(a))for(let e of a)c[e.label]=o-e.startTime;return{message:xA(r),logLevel:i.label,timestamp:s.toISOString(),cause:l0(t)?void 0:ch(t),annotations:l,spans:c,fiberId:aJ(n)}})),xA=e=>{switch(typeof e){case"bigint":case"function":case"symbol":return String(e);default:return e}},xF=e=>e.replace(/[\s="]/g,"_"),xj=e=>JSON.stringify(e),xC=(e,t)=>t+(e.match(xI)?e:xj(e)),xM=e=>t=>{let s=xF(t.label);return`${s}=${e-t.startTime}ms`},xL=Symbol.for("effect/MetricKeyType"),x$="effect/MetricKeyType/Counter",xP=Symbol.for(x$),xU=Symbol.for("effect/MetricKeyType/Frequency"),xD=Symbol.for("effect/MetricKeyType/Gauge"),xz="effect/MetricKeyType/Histogram",xB=Symbol.for(xz),xZ=Symbol.for("effect/MetricKeyType/Summary"),xq={_In:e=>e,_Out:e=>e};class xK{incremental;bigint;[xL]=xq;[xP]=xP;constructor(e,t){this.incremental=e,this.bigint=t,this._hash=ey(x$)}_hash;[ed](){return this._hash}[ek](e){return xG(e)}pipe(){return eC(this,arguments)}}class xJ{boundaries;[xL]=xq;[xB]=xB;constructor(e){this.boundaries=e,this._hash=R(ey(xz),ef(em(this.boundaries)))}_hash;[ed](){return this._hash}[ek](e){return xY(e)&&eO(this.boundaries,e.boundaries)}pipe(){return eC(this,arguments)}}let xV=e=>new xK(e?.incremental??!1,e?.bigint??!1),xG=e=>G(e,xP),xW=e=>G(e,xU),xH=e=>G(e,xD),xY=e=>G(e,xB),xQ=e=>G(e,xZ),xX=Symbol.for("effect/MetricKey"),x0={_Type:e=>e},x1=nB(eO);class x2{name;keyType;description;tags;[xX]=x0;constructor(e,t,s,n=[]){this.name=e,this.keyType=t,this.description=s,this.tags=n,this._hash=R(ey(this.name+this.description),ef(em(this.keyType)),ef(ew(this.tags)))}_hash;[ed](){return this._hash}[ek](e){return x5(e)&&this.name===e.name&&eO(this.keyType,e.keyType)&&eO(this.description,e.description)&&x1(this.tags,e.tags)}pipe(){return eC(this,arguments)}}let x5=e=>G(e,xX),x3=(e,t)=>new x2(e,xV(t),nW(t?.description)),x4=k(2,(e,t)=>0===t.length?e:new x2(e.name,e.keyType,e.description,ij(e.tags,t))),x9=Symbol.for("effect/MutableHashMap"),x6={[x9]:x9,[Symbol.iterator](){return new x8(this)},toString(){return eA(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(eR)}},[eN](){return this.toJSON()},pipe(){return eC(this,arguments)}};class x8{self;referentialIterator;bucketIterator;constructor(e){this.self=e,this.referentialIterator=e.referential[Symbol.iterator]()}next(){if(void 0!==this.bucketIterator)return this.bucketIterator.next();let e=this.referentialIterator.next();return e.done?(this.bucketIterator=new x7(this.self.buckets.values()),this.next()):e}[Symbol.iterator](){return new x8(this.self)}}class x7{backing;constructor(e){this.backing=e}currentBucket;next(){if(void 0===this.currentBucket){let e=this.backing.next();if(e.done)return e;this.currentBucket=e.value[Symbol.iterator]()}let e=this.currentBucket.next();return e.done?(this.currentBucket=void 0,this.next()):e}}let ye=()=>{let e=Object.create(x6);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},yt=k(2,(e,t)=>{if(!1===eE(t))return e.referential.has(t)?tt(e.referential.get(t)):nq();let s=t[ed](),n=e.buckets.get(s);return void 0===n?nq():ys(e,n,t)}),ys=(e,t,s,n=!1)=>{for(let i=0,r=t.length;i<r;i++)if(s[ek](t[i][0])){let s=t[i][1];return n&&(t.splice(i,1),e.bucketsSize--),tt(s)}return nq()},yn=k(2,(e,t)=>e7(yt(e,t))),yi=k(3,(e,t,s)=>{if(!1===eE(t))return e.referential.set(t,s),e;let n=t[ed](),i=e.buckets.get(n);return void 0===i?e.buckets.set(n,[[t,s]]):(yr(e,i,t),i.push([t,s])),e.bucketsSize++,e}),yr=(e,t,s)=>{for(let n=0,i=t.length;n<i;n++)if(s[ek](t[n][0])){t.splice(n,1),e.bucketsSize--;return}},ya=k(2,(e,t)=>{if(!1===eE(t))return e.referential.delete(t),e;let s=t[ed](),n=e.buckets.get(s);return void 0===n||(yr(e,n,t),0===n.length&&e.buckets.delete(s)),e}),yo=e=>e.referential.size+e.bucketsSize,yl=Symbol.for("effect/MetricState"),yc="effect/MetricState/Counter",yu=Symbol.for(yc),yp="effect/MetricState/Frequency",yd=Symbol.for(yp),ym="effect/MetricState/Gauge",yh=Symbol.for(ym),yf="effect/MetricState/Histogram",yg=Symbol.for(yf),yb="effect/MetricState/Summary",yx=Symbol.for(yb),yy={_A:e=>e};class yv{count;[yl]=yy;[yu]=yu;constructor(e){this.count=e}[ed](){return R(em(yc),ef(em(this.count)),eS(this))}[ek](e){return yA(e)&&this.count===e.count}pipe(){return eC(this,arguments)}}let y_=nB(eO);class yw{occurrences;[yl]=yy;[yd]=yd;constructor(e){this.occurrences=e}_hash;[ed](){return R(ey(yp),ef(ew(is(this.occurrences.entries()))),eS(this))}[ek](e){return yF(e)&&y_(is(this.occurrences.entries()),is(e.occurrences.entries()))}pipe(){return eC(this,arguments)}}class yS{value;[yl]=yy;[yh]=yh;constructor(e){this.value=e}[ed](){return R(em(ym),ef(em(this.value)),eS(this))}[ek](e){return yj(e)&&this.value===e.value}pipe(){return eC(this,arguments)}}class yk{buckets;count;min;max;sum;[yl]=yy;[yg]=yg;constructor(e,t,s,n,i){this.buckets=e,this.count=t,this.min=s,this.max=n,this.sum=i}[ed](){return R(em(yf),ef(em(this.buckets)),ef(em(this.count)),ef(em(this.min)),ef(em(this.max)),ef(em(this.sum)),eS(this))}[ek](e){return yC(e)&&eO(this.buckets,e.buckets)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return eC(this,arguments)}}class yO{error;quantiles;count;min;max;sum;[yl]=yy;[yx]=yx;constructor(e,t,s,n,i,r){this.error=e,this.quantiles=t,this.count=s,this.min=n,this.max=i,this.sum=r}[ed](){return R(em(yb),ef(em(this.error)),ef(em(this.quantiles)),ef(em(this.count)),ef(em(this.min)),ef(em(this.max)),ef(em(this.sum)),eS(this))}[ek](e){return yM(e)&&this.error===e.error&&eO(this.quantiles,e.quantiles)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return eC(this,arguments)}}let yT=e=>new yv(e),yE=e=>new yw(e),yI=e=>new yS(e),yN=e=>new yk(e.buckets,e.count,e.min,e.max,e.sum),yR=e=>new yO(e.error,e.quantiles,e.count,e.min,e.max,e.sum),yA=e=>G(e,yu),yF=e=>G(e,yd),yj=e=>G(e,yh),yC=e=>G(e,yg),yM=e=>G(e,yx),yL=Symbol.for("effect/MetricHook"),y$={_In:e=>e,_Out:e=>e},yP=e=>({[yL]:y$,pipe(){return eC(this,arguments)},...e}),yU=BigInt(0),yD=e=>{let t=e.keyType.bigint?yU:0,s=e.keyType.incremental?e.keyType.bigint?e=>e>=yU:e=>e>=0:e=>!0;return yP({get:()=>yT(t),update:e=>{s(e)&&(t+=e)}})},yz=e=>{let t=new Map;for(let s of e.keyType.preregisteredWords)t.set(s,0);return yP({get:()=>yE(t),update:e=>{let s=t.get(e)??0;t.set(e,s+1)}})},yB=(e,t)=>{let s=t;return yP({get:()=>yI(s),update:e=>{s=e}})},yZ=e=>{let t=e.keyType.boundaries.values,s=t.length,n=new Uint32Array(s+1),i=new Float32Array(s),r=0,a=0,o=Number.MAX_VALUE,l=Number.MIN_VALUE;R(t,iO(n6),iL((e,t)=>{i[t]=e}));let c=()=>{let e=it(s),t=0;for(let r=0;r<s;r++){let s=i[r];t+=n[r],e[r]=[s,t]}return e};return yP({get:()=>yN({buckets:c(),count:r,min:o,max:l,sum:a}),update:e=>{let t=0,c=s;for(;t!==c;){let s=Math.floor(t+(c-t)/2);e<=i[s]?c=s:t=s,c===t+1&&(e<=i[t]?c=t:t=c)}n[t]=n[t]+1,r+=1,a+=e,e<o&&(o=e),e>l&&(l=e)}})},yq=e=>{let{error:t,maxAge:s,maxSize:n,quantiles:i}=e.keyType,r=R(i,iO(n6)),a=it(n),o=0,l=0,c=0,u=Number.MAX_VALUE,p=Number.MIN_VALUE,d=e=>{let i=[],o=0;for(;o!==n-1;){let t=a[o];if(null!=t){let[n,r]=t,a=dI(e-n);dq(a,dk)&&a<=s&&i.push(r)}o+=1}return yK(t,r,iO(i,n6))},m=(e,t)=>{n>0&&(a[(o+=1)%n]=[t,e]),l+=1,c+=e,e<u&&(u=e),e>p&&(p=e)};return yP({get:()=>yR({error:t,quantiles:d(Date.now()),count:l,min:u,max:p,sum:c}),update:([e,t])=>m(e,t)})},yK=(e,t,s)=>{let n=s.length;if(!iu(t))return iC();let i=t[0],r=t.slice(1),a=yJ(e,n,nq(),0,i,s),o=iM(a);return r.forEach(t=>{o.push(yJ(e,n,a.value,a.consumed,t,a.rest))}),iL(o,e=>[e.quantile,e.value])},yJ=(e,t,s,n,i,r)=>{let a=e,o=t,l=s,c=n,u=i,p=r,d=e,m=t,h=s,f=n,g=i,b=r;for(;;){if(!iu(p))return{quantile:u,value:nq(),consumed:c,rest:[]};if(1===u)return{quantile:u,value:tt(iy(p)),consumed:c+p.length,rest:[]};let e=iw(p,e=>e<=p[0]),t=u*o,s=a/2*t,n=c+e[0].length,i=Math.abs(n-t);if(n<t-s){d=a,m=o,h=ig(p),f=n,g=u,b=e[1],a=d,o=m,l=h,c=f,u=g,p=b;continue}if(n>t+s)return{quantile:u,value:l,consumed:c,rest:p};switch(l._tag){case"None":d=a,m=o,h=ig(p),f=n,g=u,b=e[1],a=d,o=m,l=h,c=f,u=g,p=b;continue;case"Some":if(i<Math.abs(t-l.value)){d=a,m=o,h=ig(p),f=n,g=u,b=e[1],a=d,o=m,l=h,c=f,u=g,p=b;continue}return{quantile:u,value:tt(l.value),consumed:c,rest:p}}}throw Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},yV=Symbol.for("effect/MetricPair"),yG={_Type:e=>e},yW=(e,t)=>({[yV]:yG,metricKey:e,metricState:t,pipe(){return eC(this,arguments)}}),yH=Symbol.for("effect/MetricRegistry");class yY{[yH]=yH;map=ye();snapshot(){let e=[];for(let[t,s]of this.map)e.push(yW(t,s.get()));return e}get(e){let t=R(this.map,yt(e),nH);if(null!=t)return t;if(xG(e.keyType))return this.getCounter(e);if(xH(e.keyType))return this.getGauge(e);if(xW(e.keyType))return this.getFrequency(e);if(xY(e.keyType))return this.getHistogram(e);if(xQ(e.keyType))return this.getSummary(e);throw Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}getCounter(e){let t=R(this.map,yt(e),nH);if(null==t){let s=yD(e);R(this.map,yn(e))||R(this.map,yi(e,s)),t=s}return t}getFrequency(e){let t=R(this.map,yt(e),nH);if(null==t){let s=yz(e);R(this.map,yn(e))||R(this.map,yi(e,s)),t=s}return t}getGauge(e){let t=R(this.map,yt(e),nH);if(null==t){let s=yB(e,e.keyType.bigint?BigInt(0):0);R(this.map,yn(e))||R(this.map,yi(e,s)),t=s}return t}getHistogram(e){let t=R(this.map,yt(e),nH);if(null==t){let s=yZ(e);R(this.map,yn(e))||R(this.map,yi(e,s)),t=s}return t}getSummary(e){let t=R(this.map,yt(e),nH);if(null==t){let s=yq(e);R(this.map,yn(e))||R(this.map,yi(e,s)),t=s}return t}}let yQ=()=>new yY,yX=Symbol.for("effect/Metric"),y0={_Type:e=>e,_In:e=>e,_Out:e=>e},y1=C(Symbol.for("effect/Metric/globalMetricRegistry"),()=>yQ()),y2=function(e,t,s){let n=Object.assign(e=>uI(e,e=>y6(n,e)),{[yX]:y0,keyType:e,unsafeUpdate:t,unsafeValue:s,register(){return this.unsafeValue([]),this},pipe(){return eC(this,arguments)}});return n},y5=(e,t)=>y3(x3(e,t)),y3=e=>{let t;let s=new WeakMap,n=n=>{if(0===n.length)return void 0!==t?t:t=y1.get(e);let i=s.get(n);return void 0!==i||(i=y1.get(x4(e,n)),s.set(n,i)),i};return y2(e.keyType,(e,t)=>n(t).update(e),e=>n(e).get())},y4=k(3,(e,t,s)=>y9(e,[bU(t,s)])),y9=k(2,(e,t)=>y2(e.keyType,(s,n)=>e.unsafeUpdate(s,ij(t,n)),s=>e.unsafeValue(ij(t,s)))),y6=k(2,(e,t)=>uQ(pd,s=>uE(()=>e.unsafeUpdate(t,s)))),y8="effect/MetricBoundaries",y7=Symbol.for(y8);class ve{values;[y7]=y7;constructor(e){this.values=e,this._hash=R(ey(y8),ef(ew(this.values)))}_hash;[ed](){return this._hash}[ek](e){return vt(e)&&eO(this.values,e.values)}pipe(){return eC(this,arguments)}}let vt=e=>G(e,y7),vs=k(2,(e,t)=>uQ(bA,s=>uE(()=>{if(s.has(e)){let n=s.get(e);n.state.completed||(n.state.completed=!0,p9(n.result,t))}})));class vn{count=0;observers=new Set;interrupted=!1;addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}increment(){this.count++,this.observers.forEach(e=>e(this.count))}decrement(){this.count--,this.observers.forEach(e=>e(this.count))}}let vi=Symbol.for("effect/Supervisor"),vr={_T:e=>e};class va{underlying;value0;[vi]=vr;constructor(e,t){this.underlying=e,this.value0=t}get value(){return this.value0}onStart(e,t,s,n){this.underlying.onStart(e,t,s,n)}onEnd(e,t){this.underlying.onEnd(e,t)}onEffect(e,t){this.underlying.onEffect(e,t)}onSuspend(e){this.underlying.onSuspend(e)}onResume(e){this.underlying.onResume(e)}map(e){return new va(this,R(this.value,ug(e)))}zip(e){return new vo(this,e)}}class vo{left;right;_tag="Zip";[vi]=vr;constructor(e,t){this.left=e,this.right=t}get value(){return uU(this.left.value,this.right.value)}onStart(e,t,s,n){this.left.onStart(e,t,s,n),this.right.onStart(e,t,s,n)}onEnd(e,t){this.left.onEnd(e,t),this.right.onEnd(e,t)}onEffect(e,t){this.left.onEffect(e,t),this.right.onEffect(e,t)}onSuspend(e){this.left.onSuspend(e),this.right.onSuspend(e)}onResume(e){this.left.onResume(e),this.right.onResume(e)}map(e){return new va(this,R(this.value,ug(e)))}zip(e){return new vo(this,e)}}let vl=e=>G(e,vi)&&W(e,"Zip");class vc{[vi]=vr;fibers=new Set;get value(){return uE(()=>Array.from(this.fibers))}onStart(e,t,s,n){this.fibers.add(n)}onEnd(e,t){this.fibers.delete(t)}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new va(this,R(this.value,ug(e)))}zip(e){return new vo(this,e)}onRun(e,t){return e()}}class vu{effect;[vi]=vr;constructor(e){this.effect=e}get value(){return this.effect}onStart(e,t,s,n){}onEnd(e,t){}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new va(this,R(this.value,ug(e)))}zip(e){return new vo(this,e)}onRun(e,t){return e()}}let vp=uE(()=>new vc),vd=e=>new vu(e),vm=C("effect/Supervisor/none",()=>vd(uj)),vh="Empty",vf="AddSupervisor",vg="RemoveSupervisor",vb="AndThen",vx={_tag:vh},vy=(e,t)=>({_tag:vb,first:e,second:t}),vv=(e,t)=>{let s=e,n=t;for(;rk(n);){let e=rT(n);switch(e._tag){case vh:n=rE(n);break;case vf:s=s.zip(e.supervisor),n=rE(n);break;case vg:s=v_(s,e.supervisor),n=rE(n);break;case vb:n=rv(e.first)(rv(e.second)(rE(n)))}}return s},v_=(e,t)=>eO(e,t)?vm:vl(e)?v_(e.left,t).zip(v_(e.right,t)):e,vw=e=>eO(e,vm)?al():vl(e)?R(vw(e.left),ax(vw(e.right))):aw(e),vS=lp({empty:vx,patch:(e,t)=>vv(t,ru(e)),combine:vy,diff:(e,t)=>{if(eO(e,t))return vx;let s=vw(e),n=vw(t),i=R(n,ab(s),av(vx,(e,t)=>vy(e,{_tag:vf,supervisor:t}))),r=R(s,ab(n),av(vx,(e,t)=>vy(e,{_tag:vg,supervisor:t})));return vy(i,r)}}),vk=y5("effect_fiber_started",{incremental:!0}),vO=y5("effect_fiber_active"),vT=y5("effect_fiber_successes",{incremental:!0}),vE=y5("effect_fiber_failures",{incremental:!0}),vI=y4(y3(new x2("effect_fiber_lifetimes",new xJ(R(((e,t)=>{let s=Math.max(1,Math.floor(e)),n=Array(s);for(let e=0;e<s;e++)n[e]=t(e);return n})((l={start:.5,factor:2,count:35}).count-1,e=>l.start*Math.pow(l.factor,e)),rg,e=>new ve(R(e,io(ru(Number.POSITIVE_INFINITY)),iZ)))),nW(c))),"time_unit","milliseconds"),vN="Continue",vR="Yield",vA={_E:e=>e,_A:e=>e},vF=e=>{throw Error(`BUG: FiberRuntime - ${eF(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},vj=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),vC=C("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),vM={[eU]:(e,t,s)=>eu(()=>t.effect_instruction_i1(s)),OnStep:(e,t,s)=>pG(pG(s)),[eD]:(e,t,s)=>eu(()=>t.effect_instruction_i2(s)),[eV]:(e,t,s)=>(e.patchRuntimeFlags(e._runtimeFlags,t.patch),lT(e._runtimeFlags)&&e.isInterrupted())?pB(e.getInterruptedCause()):pG(s),[eq]:(e,t,s)=>(eu(()=>t.effect_instruction_i2(s)),eu(()=>t.effect_instruction_i0()))?(e.pushStack(t),eu(()=>t.effect_instruction_i1())):uj},vL={[xs]:(e,t,s,n)=>(e.processNewInterruptSignal(n.cause),lT(t)?pB(n.cause):s),[xi]:(e,t,s,n)=>{throw Error("It is illegal to have multiple concurrent run loops in a single fiber")},[xn]:(e,t,s,n)=>(n.onFiber(e,gG(t)),s),[xr]:(e,t,s,n)=>ui(uP(),()=>s)},v$=e=>ud(bu(e),e=>vQ(bR(e),([e,t])=>{let s=new Map,n=[];for(let e of t)for(let t of(n.push(rm(e)),e))s.set(t.request,t);let i=n.flat();return u4(_g(e.runAll(n),i,()=>i.forEach(e=>{e.listeners.interrupted=!0})),bA,s)},!1,!1));class vP{[xf]=xg;[xx]=vA;pipe(){return eC(this,arguments)}_fiberRefs;_fiberId;_runtimeFlags;_queue=[];_children=null;_observers=[];_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_supervisor;_scheduler;_tracer;currentOpCount=0;isYielding=!1;constructor(e,t,s){if(this._runtimeFlags=s,this._fiberId=e,this._fiberRefs=t,this._supervisor=this.getFiberRef(_p),this._scheduler=this.getFiberRef(bo),lA(s)){let e=this.getFiberRef(pd);vk.unsafeUpdate(1,e),vO.unsafeUpdate(1,e)}this._tracer=tm(this.getFiberRef(ga),cN)}id(){return this._fiberId}resume(e){this.tell(xl(e))}get status(){return this.ask((e,t)=>t)}get runtimeFlags(){return this.ask((e,t)=>gH(t)?e._runtimeFlags:t.runtimeFlags)}scope(){return xm(this)}get children(){return this.ask(e=>Array.from(e.getChildren()))}getChildren(){return null===this._children&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(ph)}fiberRefs(){return this.ask(e=>e.getFiberRefs())}ask(e){return uT(()=>{let t=pQ(this._fiberId);return this.tell(xo((s,n)=>{p9(t,uE(()=>e(s,n)))})),p1(t)})}tell(e){this._queue.push(e),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return cY(e=>{let t=t=>e(uO(t));return this.tell(xo((e,s)=>{null!==e._exitValue?t(this._exitValue):e.addObserver(t)})),uE(()=>this.tell(xo((e,s)=>{e.removeObserver(t)})))},this.id())}get inheritAll(){return cK((e,t)=>{let s=e.id(),n=e.getFiberRefs(),i=t.runtimeFlags,r=gv(n,s,this.getFiberRefs());return e.setFiberRefs(r),uC(R(lj(i,e.getFiberRef(_u)),l_(1),l_(16)))})}get poll(){return uE(()=>nW(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(e){return uE(()=>this.tell(xa(lW(e))))}unsafeInterruptAsFork(e){this.tell(xa(lW(e)))}addObserver(e){null!==this._exitValue?e(this._exitValue):this._observers.push(e)}removeObserver(e){this._observers=this._observers.filter(t=>t!==e)}getFiberRefs(){return this.setFiberRef(_u,this._runtimeFlags),this._fiberRefs}unsafeDeleteFiberRef(e){this._fiberRefs=gS(this._fiberRefs,e)}getFiberRef(e){return this._fiberRefs.locals.has(e)?this._fiberRefs.locals.get(e)[0][1]:e.initial}setFiberRef(e,t){this._fiberRefs=gT(this._fiberRefs,{fiberId:this._fiberId,fiberRef:e,value:t}),this.refreshRefCache()}refreshRefCache(){this._tracer=tm(this.getFiberRef(ga),cN),this._supervisor=this.getFiberRef(_p),this._scheduler=this.getFiberRef(bo)}setFiberRefs(e){this._fiberRefs=e,this.refreshRefCache()}addChild(e){this.getChildren().add(e)}removeChild(e){this.getChildren().delete(e)}drainQueueOnCurrentThread(){let e=!0;for(;e;){let t=vN,s=globalThis[x_];globalThis[x_]=this;try{for(;t===vN;)t=0===this._queue.length?"Done":this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[x_]=s}this._queue.length>0&&!this._running?(this._running=!0,t===vR?(this.drainQueueLaterOnExecutor(),e=!1):e=!0):e=!1}}drainQueueLaterOnExecutor(){this._scheduler.scheduleTask(this.run,this.getFiberRef(pn))}drainQueueWhileRunning(e,t){let s=t;for(;this._queue.length>0;){let t=this._queue.splice(0,1)[0];s=vL[t._tag](this,e,s,t)}return s}isInterrupted(){return!l0(this.getFiberRef(ph))}addInterruptedCause(e){let t=this.getFiberRef(ph);this.setFiberRef(ph,lY(t,e))}processNewInterruptSignal(e){this.addInterruptedCause(e),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(null===this._children||0===this._children.size)return!1;let e=!1;for(let t of this._children)t.tell(xa(lW(this.id()))),e=!0;return e}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){let e=this._children.values();this._children=null;let t=!1;return uL({while:()=>!t,body:()=>{let s=e.next();return s.done?uE(()=>{t=!0}):cG(s.value.await)},step:()=>{}})}return null}reportExitValue(e){if(lA(this._runtimeFlags)){let t=this.getFiberRef(pd),s=this.id().startTimeMillis,n=Date.now();switch(vI.unsafeUpdate(n-s,t),vO.unsafeUpdate(-1,t),e._tag){case ez:vT.unsafeUpdate(1,t);break;case e$:vE.unsafeUpdate(1,t)}}if("Failure"===e._tag){let t=this.getFiberRef(pp);l2(e.cause)||"Some"!==t._tag||this.log("Fiber terminated with an unhandled error",e.cause,t)}}setExitValue(e){this._exitValue=e,this.reportExitValue(e);for(let t=this._observers.length-1;t>=0;t--)this._observers[t](e)}getLoggers(){return this.getFiberRef(vZ)}log(e,t,s){let n=e7(s)?s.value:this.getFiberRef(pa);if(g1(this.getFiberRef(vU),n))return;let i=this.getFiberRef(po),r=this.getFiberRef(pr),a=this.getLoggers(),o=this.getFiberRefs();if(aS(a)>0){let s=new Date(tm(this.getFiberRef(ga),fw).unsafeCurrentTimeMillis());for(let l of a)l.log({fiberId:this.id(),logLevel:n,message:e,cause:t,context:o,spans:i,annotations:r,date:s})}}evaluateMessageWhileSuspended(e){switch(e._tag){case xr:return vR;case xs:return this.processNewInterruptSignal(e.cause),null!==this._asyncInterruptor&&(this._asyncInterruptor(pB(e.cause)),this._asyncInterruptor=null),vN;case xi:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(e.effect),vN;case xn:return e.onFiber(this,null!==this._exitValue?gJ:gW(this._runtimeFlags,this._asyncBlockingOn)),vN;default:return vF(e)}}evaluateEffect(e){this._supervisor.onResume(this);try{let t=lT(this._runtimeFlags)&&this.isInterrupted()?pB(this.getInterruptedCause()):e;for(;null!==t;){let e=t,s=this.runLoop(e);if(s===vj){let e=vC.currentOp;vC.currentOp=null,e._op===eJ?lk(this._runtimeFlags)?(this.tell(xc()),this.tell(xl(pW)),t=null):t=pW:e._op===eM&&(t=null)}else{this._runtimeFlags=R(this._runtimeFlags,lO(16));let e=this.interruptAllChildren();null!==e?t=ui(e,()=>s):(0===this._queue.length?this.setExitValue(s):this.tell(xl(s)),t=null)}}}finally{this._supervisor.onSuspend(this)}}start(e){if(this._running)this.tell(xl(e));else{this._running=!0;let t=globalThis[x_];globalThis[x_]=this;try{this.evaluateEffect(e)}finally{this._running=!1,globalThis[x_]=t,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(e){this.tell(xl(e))}patchRuntimeFlags(e,t){let s=lC(e,t);return globalThis[x_]=this,this._runtimeFlags=s,s}initiateAsync(e,t){let s=!1,n=e=>{s||(s=!0,this.tell(xl(e)))};lT(e)&&(this._asyncInterruptor=n);try{t(n)}catch(e){n(ue(lG(e)))}}pushStack(e){this._stack.push(e),"OnStep"===e._op&&this._steps.push({refs:this.getFiberRefs(),flags:this._runtimeFlags})}popStack(){let e=this._stack.pop();if(e)return"OnStep"===e._op&&this._steps.pop(),e}getNextSuccessCont(){let e=this.popStack();for(;e;){if(e._op!==eP)return e;e=this.popStack()}}getNextFailCont(){let e=this.popStack();for(;e;){if(e._op!==eU&&e._op!==eq)return e;e=this.popStack()}}Tag(e){return ug(uY(ps),t=>tm(t,e))}Left(e){return c8(e.left)}None(e){return c8(new pF)}Right(e){return pG(e.right)}Some(e){return pG(e.value)}Micro(e){return cH(t=>{let s=t0().pipe(t2(t7,this.getFiberRef(ps))),n=t;return e[tM](s,e=>{if("Right"===e._tag)return n(pG(e.right));switch(e.left._tag){case"Interrupt":return n(pB(lW(aG)));case"Fail":return n(c8(e.left.error));case"Die":return n(c3(e.left.defect))}}),cY(e=>{n=t=>{e(uj)},t1(s,t6).abort()})})}[eB](e){let t=eu(()=>e.effect_instruction_i0()),s=this.getNextSuccessCont();return void 0!==s?(s._op in vM||vF(s),vM[s._op](this,s,t)):(vC.currentOp=pG(t),vj)}[ez](e){let t=this.getNextSuccessCont();return void 0!==t?(t._op in vM||vF(t),vM[t._op](this,t,e.effect_instruction_i0)):(vC.currentOp=e,vj)}[e$](e){let t=e.effect_instruction_i0,s=this.getNextFailCont();if(void 0===s)return vC.currentOp=pB(t),vj;switch(s._op){case eP:case eD:if(!(lT(this._runtimeFlags)&&this.isInterrupted()))return eu(()=>s.effect_instruction_i1(t));return pB(ce(t));case"OnStep":if(!(lT(this._runtimeFlags)&&this.isInterrupted()))return pG(pB(t));return pB(ce(t));case eV:if(this.patchRuntimeFlags(this._runtimeFlags,s.patch),lT(this._runtimeFlags)&&this.isInterrupted())return pB(lY(t,this.getInterruptedCause()));return pB(t);default:vF(s)}}[eK](e){return eu(()=>e.effect_instruction_i0(this,gG(this._runtimeFlags)))}Blocked(e){let t=this.getFiberRefs(),s=this._runtimeFlags;if(this._steps.length>0){let n=[],i=this._steps[this._steps.length-1],r=this.popStack();for(;r&&"OnStep"!==r._op;)n.push(r),r=this.popStack();this.setFiberRefs(i.refs),this._runtimeFlags=i.flags;let a=gC(i.refs,t),o=lj(i.flags,s);return pG(c$(e.effect_instruction_i0,cK(t=>{for(;n.length>0;)t.pushStack(n.pop());return t.setFiberRefs(gL(t.id(),t.getFiberRefs())(a)),t._runtimeFlags=lC(o)(t._runtimeFlags),e.effect_instruction_i1})))}return uF(t=>ui(v0(cP(e.effect_instruction_i0)),()=>t(e.effect_instruction_i1)))}RunBlocked(e){return v$(e.effect_instruction_i0)}[eZ](e){let t=e.effect_instruction_i0,s=this._runtimeFlags,n=lC(s,t);if(lT(n)&&this.isInterrupted())return pB(this.getInterruptedCause());if(this.patchRuntimeFlags(this._runtimeFlags,t),!e.effect_instruction_i1)return pW;{let t=lj(n,s);return this.pushStack(new cD(t,e)),eu(()=>e.effect_instruction_i1(s))}}[eU](e){return this.pushStack(e),e.effect_instruction_i0}OnStep(e){return this.pushStack(e),e.effect_instruction_i0}[eP](e){return this.pushStack(e),e.effect_instruction_i0}[eD](e){return this.pushStack(e),e.effect_instruction_i0}[eM](e){return this._asyncBlockingOn=e.effect_instruction_i1,this.initiateAsync(this._runtimeFlags,e.effect_instruction_i0),vC.currentOp=e,vj}[eJ](e){return this.isYielding=!1,vC.currentOp=e,vj}[eq](e){let t=e.effect_instruction_i0,s=e.effect_instruction_i1;return t()?(this.pushStack(e),s()):pW}[eL](e){return eu(()=>e.commit())}runLoop(e){let t=e;for(this.currentOpCount=0;;){if((2&this._runtimeFlags)!=0&&this._supervisor.onEffect(this,t),this._queue.length>0&&(t=this.drainQueueWhileRunning(this._runtimeFlags,t)),!this.isYielding){this.currentOpCount+=1;let e=this._scheduler.shouldYield(this);if(!1!==e){this.isYielding=!0,this.currentOpCount=0;let s=t;t=ui(uP({priority:e}),()=>s)}}try{if("_op"in t&&t._op in this||vF(t),(t=this._tracer.context(()=>A()!==t[eG]._V?c4(`Cannot execute an Effect versioned ${t[eG]._V} with a Runtime of version ${A()}`):this[t._op](t),this))===vj){let e=vC.currentOp;if(e._op===eJ||e._op===eM)return vj;return vC.currentOp=null,e._op===ez||e._op===e$?e:pB(lG(e))}}catch(e){t=cM(e)?pB(e.cause):pR(e)?pB(lY(lG(e),lW(aG))):c3(e)}}}run=()=>{this.drainQueueOnCurrentThread()}}let vU=C("effect/FiberRef/currentMinimumLogLevel",()=>u6(g2("Info"))),vD=e=>xk(t=>{tm(gO(t.context,ga),f8).unsafe.log(e.log(t))}),vz=C(Symbol.for("effect/Logger/defaultLogger"),()=>vD(xT)),vB=C(Symbol.for("effect/Logger/tracerLogger"),()=>xk(({annotations:e,cause:t,context:s,fiberId:n,logLevel:i,message:r})=>{let a=n0(gk(s,ps),th(cR)),o=nX(gk(s,ga),e=>tm(e,fw));if("None"===a._tag||"ExternalSpan"===a.value._tag||"None"===o._tag)return;let l=Object.fromEntries(r7(e,eF));l["effect.fiberId"]=aJ(n),l["effect.logLevel"]=i.label,null!==t&&"Empty"!==t._tag&&(l["effect.cause"]=ch(t)),a.value.event(String(r),o.value.unsafeCurrentTimeNanos(),l)})),vZ=C(Symbol.for("effect/FiberRef/currentLoggers"),()=>u8(aw(vz,vB))),vq=k(e=>cq(e[0]),(e,t)=>uA(uI(e,e=>vK(s=>t(e,s))))),vK=e=>cK(t=>{let s=t.getFiberRefs(),n=t._runtimeFlags;return ui(_s,t=>pw(t,t=>cK(i=>{let r=i.getFiberRefs(),a=i._runtimeFlags,o=gC(r,s),l=lj(a,n),c=gC(s,r);return i.setFiberRefs(gL(o,i.id(),s)),_f(u$(e(t),l),uE(()=>{i.setFiberRefs(gL(c,i.id(),i.getFiberRefs()))}))})))}),vJ=e=>{if(Array.isArray(e)||X(e))return[e,nq()];let t=Object.keys(e),s=t.length;return[t.map(t=>e[t]),tt(e=>{let n={};for(let i=0;i<s;i++)n[t[i]]=e[i];return n})]},vV=(e,t,s)=>{let n=[];for(let t of e)n.push(c9(t));return ui(vH(n,O,{concurrency:s?.concurrency,batching:s?.batching}),e=>{let n=nq(),i=e.length,r=Array(i),a=Array(i),o=!1;for(let t=0;t<i;t++){let s=e[t];"Left"===s._tag?(r[t]=tt(s.left),o=!0):(a[t]=s.right,r[t]=n)}return o?"Some"===t._tag?c8(t.value(r)):c8(r):s?.discard?uj:"Some"===t._tag?uO(t.value(a)):uO(a)})},vG=(e,t,s)=>{let n=[];for(let t of e)n.push(c9(t));return s?.discard?vH(n,O,{concurrency:s?.concurrency,batching:s?.batching,discard:!0}):ug(vH(n,O,{concurrency:s?.concurrency,batching:s?.batching}),e=>"Some"===t._tag?t.value(e):e)},vW=(e,t)=>{let[s,n]=vJ(e);return t?.mode==="validate"?vV(s,n,t):t?.mode==="either"?vG(s,n,t):t?.discard!==!0&&"Some"===n._tag?ug(vH(s,O,t),n.value):vH(s,O,t)},vH=((e,t)=>Array.from({length:t},()=>e),k(e=>X(e[0]),(e,t,s)=>cK(n=>{let i=s?.batching===!0||s?.batching==="inherit"&&n.getFiberRef(pu);return s?.discard?bF(s.concurrency,()=>v6(gd)(s=>i?vQ(e,(e,n)=>s(t(e,n)),!0,!1,1):ud(e,(e,n)=>s(t(e,n)))),()=>v6(gf)(s=>vQ(e,(e,n)=>s(t(e,n)),i,!1)),s=>v6(gg(s))(n=>vQ(e,(e,s)=>n(t(e,s)),i,!1,s))):bF(s?.concurrency,()=>v6(gd)(s=>i?vX(e,1,(e,n)=>s(t(e,n)),!0):up(e,(e,n)=>s(t(e,n)))),()=>v6(gf)(s=>vY(e,(e,n)=>s(t(e,n)),i)),s=>v6(gg(s))(n=>vX(e,s,(e,s)=>n(t(e,s)),i)))}))),vY=(e,t,s)=>uT(()=>{let n=is(e),i=Array(n.length);return uz(vQ(n,(e,s)=>ui(t(e,s),e=>uE(()=>i[s]=e)),s,!1),uO(i))}),vQ=(e,t,s,n,i)=>uF(r=>uN(a=>cK(o=>{let l=Array.from(e).reverse(),c=l.length;if(0===c)return uj;let u=0,p=!1,d=i?Math.min(l.length,i):l.length,m=new Set,h=[],f=()=>m.forEach(e=>{e._scheduler.scheduleTask(()=>{e.unsafeInterruptAsFork(o.id())},0)}),g=[],b=[],x=[],y=()=>{let e=h.filter(({exit:e})=>"Failure"===e._tag).sort((e,t)=>e.index<t.index?-1:e.index===t.index?0:1).map(({exit:e})=>e);return 0===e.length&&e.push(pW),e},v=(e,t=!1)=>{let s=uA(a(e)),n=v2(s,o,o._runtimeFlags,xh);return o._scheduler.scheduleTask(()=>{t&&n.unsafeInterruptAsFork(o.id()),n.resume(s)},0),n},_=()=>{n||(c-=l.length,l=[]),p=!0,f()},w=s?ua:c6,S=v(cY(e=>{let n=(e,t)=>{"Blocked"===e._op?x.push(e):(h.push({index:t,exit:e}),"Failure"!==e._op||p||_())},a=()=>{if(l.length>0){let d=l.pop(),f=u++,_=()=>{let e=l.pop();return f=u++,ui(uP(),()=>ui(w(r(t(e,f))),S))},S=e=>l.length>0&&(n(e,f),l.length>0)?_():uO(e),k=v(ui(w(r(t(d,f))),S));g.push(k),m.add(k),p&&k._scheduler.scheduleTask(()=>{k.unsafeInterruptAsFork(o.id())},0),k.addObserver(t=>{let r;r="Failure"===t._op?t:t.effect_instruction_i0,b.push(k),m.delete(k),n(r,f),h.length===c?e(uO(nJ(pD(y(),{parallel:!0}),()=>pW))):x.length+h.length===c?e(uO(c$(x.map(e=>e.effect_instruction_i0).reduce(bl),vQ([nJ(pD(y(),{parallel:!0}),()=>pW),...x.map(e=>e.effect_instruction_i1)],e=>e,s,!0,i)))):a()})}};for(let e=0;e<d;e++)a()}));return cG(uy(uo(r(xy(S))),pJ({onFailure:()=>{_();let e=x.length+1,t=Math.min("number"==typeof i?i:x.length,x.length),s=Array.from(x);return cY(n=>{let i=[],r=0,a=0,o=(t,a)=>o=>{i[t]=o,++r===e&&n(nQ(pD(i,{parallel:!0}))),s.length>0&&a&&l()},l=()=>{v(s.pop(),!0).addObserver(o(a,!0)),a++};S.addObserver(o(a,!1)),a++;for(let e=0;e<t;e++)l()})},onSuccess:()=>up(b,e=>e.inheritAll)})))}))),vX=(e,t,s,n)=>uT(()=>{let i=is(e),r=Array(i.length);return uz(vQ(i,(e,t)=>ug(s(e,t),e=>r[t]=e),n,!1,t),uO(r))}),v0=e=>v3(e,xh),v1=(e,t,s,n=null)=>{let i=v5(e,t,s,n);return i.resume(e),i},v2=(e,t,s,n=null)=>v5(e,t,s,n),v5=(e,t,s,n=null)=>{let i=aQ(),r=g_(t.getFiberRefs(),i),a=new vP(i,r,s),o=gO(r,ps),l=a._supervisor;return l.onStart(o,e,tt(t),a),a.addObserver(e=>l.onEnd(e,a)),(null!==n?n:R(t.getFiberRef(pm),nJ(()=>t.scope()))).add(s,a),a},v3=(e,t)=>cK((s,n)=>uO(v1(e,s,n.runtimeFlags,t))),v4=(e=>z(e[2]),e=>de(t=>nK(th(t,_t),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return ui(pk(t,gf),t=>_o(e,t))}}}))),v9=e=>t=>de(s=>nK(th(s,_t),{onNone:()=>t,onSome:s=>"ParallelN"===s.strategy._tag&&s.strategy.parallelism===e?t:ui(pk(s,gg(e)),e=>_o(t,e))})),v6=e=>t=>de(s=>nK(th(s,_t),{onNone:()=>t(O),onSome:s=>{let n="Parallel"===e._tag?v4:"Sequential"===e._tag?v7:v9(e.parallelism);switch(s.strategy._tag){case"Parallel":return n(t(v4));case"Sequential":return n(t(v7));case"ParallelN":return n(t(v9(s.strategy.parallelism)))}}})),v8=e=>ui(_t,e),v7=e=>de(t=>nK(th(t,_t),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return ui(pk(t,gd),t=>_o(e,t))}}})),_e=(e=>cq(e[1]),k(e=>cq(e[1]),(e,t,s,n)=>ug(vW([e,t],{concurrency:n?.concurrent?2:1,batching:n?.batching}),([e,t])=>s(e,t)))),_t=tg("effect/Scope"),_s=_t,_n=(e,t)=>{"Open"===e.state._tag&&e.state.finalizers.add(t)},_i={[py]:py,[pv]:pv,pipe(){return eC(this,arguments)},fork(e){return uE(()=>{let t=_r(e);if("Closed"===this.state._tag)return t.state=this.state,t;let s=e=>t.close(e);return this.state.finalizers.add(s),_n(t,e=>uE(()=>{"Open"===this.state._tag&&this.state.finalizers.delete(s)})),t})},close(e){return uT(()=>{if("Closed"===this.state._tag)return uj;let t=Array.from(this.state.finalizers.values()).reverse();return(this.state={_tag:"Closed",exit:e},0===t.length)?uj:gm(this.strategy)?R(up(t,t=>c6(t(e))),ui(e=>R(pD(e),nX(pU),nJ(()=>pW)))):gh(this.strategy)?R(vY(t,t=>c6(t(e)),!1),ui(e=>R(pD(e,{parallel:!0}),nX(pU),nJ(()=>pW)))):R(vX(t,this.strategy.parallelism,t=>c6(t(e)),!1),ui(e=>R(pD(e,{parallel:!0}),nX(pU),nJ(()=>pW))))})},addFinalizer(e){return uT(()=>"Closed"===this.state._tag?e(this.state.exit):(this.state.finalizers.add(e),uj))}},_r=(e=gd)=>{let t=Object.create(_i);return t.strategy=e,t.state={_tag:"Open",finalizers:new Set},t},_a=(e=gd)=>uE(()=>_r(e)),_o=k(2,(e,t)=>dn(e,tf(tp(_t,t)))),_l=k(2,(e,t)=>cG(vq(ui(uY(e),s=>cV(uX(e,t),s)),t=>uX(e,t)))),_c=k(2,(e,t)=>uQ(e,s=>_l(e,t(s)))),_u=pt(lR,{differ:lM,fork:lM.empty}),_p=pt(vm,{differ:vS,fork:vx}),_d=k(3,(e,t,s)=>_m(e,t,{onSelfWin:(e,t)=>ui(e.await,n=>{switch(n._tag){case ez:return ui(e.inheritAll,()=>s.onSelfDone(n,t));case e$:return s.onSelfDone(n,t)}}),onOtherWin:(e,t)=>ui(e.await,n=>{switch(n._tag){case ez:return ui(e.inheritAll,()=>s.onOtherDone(n,t));case e$:return s.onOtherDone(n,t)}})})),_m=((e,t)=>un(s=>_d(e,t,{onSelfDone:(e,t)=>pV(e,{onFailure:e=>R(xy(t),bY(t=>lH(e,t))),onSuccess:e=>R(t,uq(s),cV(e))}),onOtherDone:(e,t)=>pV(e,{onFailure:e=>R(xy(t),bY(t=>lH(t,e))),onSuccess:e=>R(t,uq(s),cV(e))})})),k(3,(e,t,s)=>cK((n,i)=>{let r=i.runtimeFlags,a=aT(!0),o=v5(e,n,r,s.selfScope),l=v5(t,n,r,s.otherScope);return cY(n=>{o.addObserver(()=>_h(o,l,s.onSelfWin,a,n)),l.addObserver(()=>_h(l,o,s.onOtherWin,a,n)),o.startFork(e),l.startFork(t)},aB(o.id(),l.id()))}))),_h=(e,t,s,n,i)=>{aE(!0,!1)(n)&&i(s(e,t))},_f=k(2,(e,t)=>uF(s=>uc(s(e),{onFailure:e=>uc(t,{onFailure:t=>ue(lY(e,t)),onSuccess:()=>ue(e)}),onSuccess:e=>cV(t,e)}))),_g=(e,t,s)=>un(n=>ui(ui(v0(uh(e)),e=>cY(n=>{let i=t.map(e=>e.listeners.count),r=()=>{i.every(e=>0===e)&&t.every(e=>"Pending"===e.result.state.current._tag||!!("Done"===e.result.state.current._tag&&pM(e.result.state.current.effect)&&"Failure"===e.result.state.current.effect._tag&&l1(e.result.state.current.effect.cause)))&&(a.forEach(e=>e()),s?.(),n(uZ(e)))};e.addObserver(e=>{a.forEach(e=>e()),n(e)});let a=t.map((e,t)=>{let s=e=>{i[t]=e,r()};return e.listeners.addObserver(s),()=>e.listeners.removeObserver(s)});return r(),uE(()=>{a.forEach(e=>e())})})),()=>uT(()=>ud(t.flatMap(e=>e.state.completed?[]:[e]),e=>vs(e.request,pq(n)))))),_b=((e,t)=>_x(e.minutes,t.minutes)&&_x(e.hours,t.hours)&&_x(e.days,t.days)&&_x(e.months,t.months)&&_x(e.weekdays,t.weekdays),nB(nU)),_x=(e,t)=>_b(is(e),is(t)),_y=Symbol.for("effect/ScheduleInterval"),_v={[_y]:_y,startMillis:0,endMillis:0},__=(e,t)=>e>t?_v:{[_y]:_y,startMillis:e,endMillis:t},_w=k(2,(e,t)=>_S(e,t)===e),_S=k(2,(e,t)=>e.endMillis<=t.startMillis?e:t.endMillis<=e.startMillis?t:e.startMillis<t.startMillis?e:t.startMillis<e.startMillis?t:e.endMillis<=t.endMillis?e:t),_k=k(2,(e,t)=>__(Math.max(e.startMillis,t.startMillis),Math.min(e.endMillis,t.endMillis))),_O=e=>e.startMillis>=e.endMillis,_T=e=>dI(e.endMillis-e.startMillis),_E=e=>__(e,Number.POSITIVE_INFINITY),_I=Symbol.for("effect/ScheduleIntervals"),_N=e=>({[_I]:_I,intervals:e}),_R=k(2,(e,t)=>rk(t.intervals)?rk(e.intervals)?rT(e.intervals).startMillis<rT(t.intervals).startMillis?_A(rE(e.intervals),t.intervals,rT(e.intervals),rl()):_A(e.intervals,rE(t.intervals),rT(t.intervals),rl()):t:e),_A=(e,t,s,n)=>{let i=e,r=t,a=s,o=n;for(;rk(i)||rk(r);)if(!rk(i)&&rk(r))a.endMillis<rT(r).startMillis?(o=R(o,rv(a)),a=rT(r)):a=__(a.startMillis,rT(r).endMillis),r=rE(r),i=rl();else if(rk(i)&&rS(r))a.endMillis<rT(i).startMillis?(o=R(o,rv(a)),a=rT(i)):a=__(a.startMillis,rT(i).endMillis),r=rl(),i=rE(i);else if(rk(i)&&rk(r))rT(i).startMillis<rT(r).startMillis?(a.endMillis<rT(i).startMillis?(o=R(o,rv(a)),a=rT(i)):a=__(a.startMillis,rT(i).endMillis),i=rE(i)):(a.endMillis<rT(r).startMillis?(o=R(o,rv(a)),a=rT(r)):a=__(a.startMillis,rT(r).endMillis),r=rE(r));else throw Error(es("Intervals.unionLoop"));return _N(R(o,rv(a),rh))},_F=k(2,(e,t)=>_j(e.intervals,t.intervals,rl())),_j=(e,t,s)=>{let n=e,i=t,r=s;for(;rk(n)&&rk(i);){let e=R(rT(n),_k(rT(i))),t=_O(e)?r:R(r,rv(e));R(rT(n),_w(rT(i)))?n=rE(n):i=rE(i),r=t}return _N(rh(r))},_C=e=>R(e.intervals,rO,nJ(()=>_v)).startMillis,_M=k(2,(e,t)=>_C(e)<_C(t)),_L=k(2,(e,t)=>_M(e,t)?t:e),_$=e=>R(e.intervals,rO,nJ(()=>_v)).endMillis,_P=e=>rk(e.intervals),_U="Continue",_D="Done",_z=e=>({_tag:_U,intervals:e}),_B=e=>({_tag:_U,intervals:_N(ru(e))}),_Z={_tag:_D},_q=e=>e._tag===_U,_K=e=>e._tag===_D,_J=Symbol.for("effect/Schedule"),_V=e=>G(e,_J),_G=Symbol.for("effect/ScheduleDriver"),_W={_Out:e=>e,_In:e=>e,_R:e=>e},_H={_Out:e=>e,_In:e=>e,_R:e=>e};class _Y{initial;step;[_J]=_W;constructor(e,t){this.initial=e,this.step=t}pipe(){return eC(this,arguments)}}class _Q{schedule;ref;[_G]=_H;constructor(e,t){this.schedule=e,this.ref=t}get state(){return ug(g7(this.ref),e=>e[1])}get last(){return ui(g7(this.ref),([e,t])=>{switch(e._tag){case"None":return c7(()=>new pF);case"Some":return uO(e.value)}})}get reset(){return be(this.ref,[nq(),this.schedule.initial])}next(e){return R(ug(g7(this.ref),e=>e[1]),ui(t=>R(gl,ui(s=>R(uT(()=>this.schedule.step(s,e,t)),ui(([e,t,n])=>{let i=be(this.ref,[tt(t),e]);if(_K(n))return uz(i,c8(nq()));let r=_C(n.intervals)-s;return r<=0?cV(i,t):R(i,uz(bC(dI(r))),cV(t))}))))))}}let _X=(e,t)=>new _Y(e,t),_0=k(2,(e,t)=>_1(e,e=>uE(()=>t(e)))),_1=k(2,(e,t)=>wn(e,(e,s)=>ug(t(e),e=>dB(s,dx(e))))),_2=((e,t)=>_X([e.initial,t.initial,!0],(s,n,i)=>i[2]?ui(e.step(s,n,i[0]),([e,r,a])=>_K(a)?ug(t.step(s,n,i[1]),([t,s,n])=>[[e,t,!1],tI(s),n]):uO([[e,i[1],!0],tE(r),a])):ug(t.step(s,n,i[1]),([e,t,s])=>[[i[0],e,!1],tI(t),s])),k(2,(e,t)=>_5(e,(e,s)=>uE(()=>t(e,s))))),_5=k(2,(e,t)=>_X(e.initial,(s,n,i)=>ui(e.step(s,n,i),([e,s,i])=>_K(i)?uO([e,s,_Z]):ug(t(n,s),t=>t?[e,s,i]:[e,s,_Z])))),_3=k(2,(e,t)=>_X([e.initial,t.initial],(s,n,i)=>ui(e.step(s,n,i[0]),([e,n,r])=>ug(t.step(s,n,i[1]),([t,s,n])=>_K(r)?[[e,t],s,_Z]:_K(n)?[[e,t],s,_Z]:[[e,t],s,_z(R(r.intervals,_L(n.intervals)))])))),_4=((e,t)=>_4(e,e=>uE(()=>t(e))),k(2,(e,t)=>_X(e.initial,(s,n,i)=>ui(t(n),t=>e.step(s,t,i))))),_9=((e,t)=>wn(e,(e,s)=>t(s)),e=>_0(e,e=>e)),_6=e=>R(g8([nq(),e.initial]),ug(t=>new _Q(e,t))),_8=k(2,(e,t)=>_7(e,t,_F)),_7=k(3,(e,t,s)=>_X([e.initial,t.initial],(n,i,r)=>R(uB(e.step(n,i,r[0]),t.step(n,i,r[1]),(e,t)=>[e,t]),ui(([[n,r,a],[o,l,c]])=>_q(a)&&_q(c)?we(e,t,i,n,r,a.intervals,o,l,c.intervals,s):uO([[n,o],[r,l],_Z]))))),we=(e,t,s,n,i,r,a,o,l,c)=>{let u=c(r,l);return _P(u)?uO([[n,a],[i,o],_z(u)]):R(r,_M(l))?ui(e.step(_$(r),s,n),([n,i,r])=>_K(r)?uO([[n,a],[i,o],_Z]):we(e,t,s,n,i,r.intervals,a,o,l,c)):ui(t.step(_$(l),s,a),([a,o,l])=>_K(l)?uO([[n,a],[i,o],_Z]):we(e,t,s,n,i,r,a,o,l.intervals,c))},wt=k(2,(e,t)=>ws(e,e=>uE(()=>t(e)))),ws=k(2,(e,t)=>_X(e.initial,(s,n,i)=>ui(e.step(s,n,i),([e,s,n])=>ug(t(s),t=>[e,t,n])))),wn=k(2,(e,t)=>_X(e.initial,(s,n,i)=>ui(e.step(s,n,i),([e,n,i])=>{if(_K(i))return uO([e,n,i]);let r=i.intervals;return ug(t(n,_T(__(s,_C(r)))),t=>{let i=dx(t),a=_C(r),o=s+dC(i),l=o-a;return[e,n,_B(__(o,Math.max(0,_$(r)+l)))]})}))),wi=e=>wc(wk,t=>t<e),wr=((e,t,s)=>_X([e.initial,t],(t,n,[i,r])=>ui(e.step(t,n,i),([e,t,n])=>_K(n)?uO([[e,r],r,n]):ug(s(r,t),t=>[[e,t],r,n]))),k(2,(e,t)=>wa(e,t,_R))),wa=k(3,(e,t,s)=>_X([e.initial,t.initial],(n,i,r)=>uB(e.step(n,i,r[0]),t.step(n,i,r[1]),([e,t,n],[i,r,a])=>{if(_K(n)&&_K(a))return[[e,i],[t,r],_Z];if(_K(n)&&_q(a))return[[e,i],[t,r],_z(a.intervals)];if(_q(n)&&_K(a))return[[e,i],[t,r],_z(n.intervals)];if(_q(n)&&_q(a))return[[e,i],[t,r],_z(s(n.intervals,a.intervals))];throw Error("BUG: Schedule.unionWith - please report an issue at https://github.com/Effect-TS/effect/issues")}))),wo=k(2,(e,t)=>_5(e,(e,s)=>bQ(t(e)))),wl=k(2,(e,t)=>_5(e,(e,s)=>t(e))),wc=k(2,(e,t)=>_2(e,(e,s)=>t(s))),wu=((e,t)=>wt(_8(e,t),e=>e[0]),Symbol.for("effect/Schedule/ScheduleDefect"));class wp{error;[wu];constructor(e){this.error=e,this[wu]=wu}}let wd=e=>G(e,wu),wm=e=>cX(e,e=>c3(new wp(e))),wh=e=>cQ(e,e=>nK(ca(e,e=>lX(e)&&wd(e.defect)?tt(e.defect):nq()),{onNone:()=>ue(e),onSome:e=>c8(e.error)})),wf=((e,t)=>wf(e,t,(e,t)=>c8(e)),k(3,(e,t,s)=>ui(_6(t),t=>uu(e,{onFailure:e=>s(e,nq()),onSuccess:n=>wg(e,t,s,n)})))),wg=(e,t,s,n)=>uu(t.next(n),{onFailure:()=>uw(t.last),onSuccess:n=>uu(e,{onFailure:e=>s(e,tt(n)),onSuccess:n=>wg(e,t,s,n)})}),wb=k(2,(e,t)=>wy(e,t,(e,t)=>c8(e))),wx=k(2,(e,t)=>{if(_V(t))return wb(e,t);let s=t.schedule??wk,n=t.while?wl(s,e=>{let s=t.while(e);return"boolean"==typeof s?uO(s):wm(s)}):s,i=t.until?wo(n,e=>{let s=t.until(e);return"boolean"==typeof s?uO(s):wm(s)}):n;return wh(wb(e,t.times?_8(i,wi(t.times)):i))}),wy=k(3,(e,t,s)=>ui(_6(t),t=>wv(e,t,s))),wv=(e,t,s)=>cX(e,n=>uu(t.next(n),{onFailure:()=>R(t.last,uw,ui(e=>s(n,e))),onSuccess:()=>wv(e,t,s)})),w_=((e,t)=>w_(e,void 0,t),k(3,(e,t,s)=>ui(_6(s),s=>ww(e,t,s)))),ww=(e,t,s)=>uu(s.next(t),{onFailure:()=>uw(s.last),onSuccess:()=>ui(e,t=>ww(e,t,s))}),wS=_X(nq(),(e,t,s)=>{switch(s._tag){case"None":return uO([tt(e),dk,_B(_E(e))]);case"Some":return uO([tt(s.value),dI(e-s.value),_B(_E(e))])}}),wk=(u=e=>e+1,_X(0,(e,t,s)=>uE(()=>[u(s),s,_B(_E(e))])));class wO{permits;waiters=new Set;taken=0;constructor(e){this.permits=e}get free(){return this.permits-this.taken}take=e=>cY(t=>{if(this.free<e){let s=()=>{this.free<e||(this.waiters.delete(s),this.taken+=e,t(uO(e)))};return this.waiters.add(s),uE(()=>{this.waiters.delete(s)})}return this.taken+=e,t(uO(e))});updateTaken=e=>cK(t=>(this.taken=e(this.taken),this.waiters.size>0&&t.getFiberRef(bo).scheduleTask(()=>{let e=this.waiters.values(),t=e.next();for(;!1===t.done&&this.free>0;)t.value(),t=e.next()},t.getFiberRef(pn)),uO(this.free)));release=e=>this.updateTaken(t=>t-e);releaseAll=this.updateTaken(e=>0);withPermits=e=>t=>uF(s=>ui(s(this.take(e)),e=>_f(s(t),this.release(e))))}let wT=e=>new wO(e),wE=((e,t)=>{let s=dx(t);return ui(p7(),t=>ug(wM(nq()),n=>[dt(wI(e,s,n),t),wN(n)]))},(e,t,s)=>{let n=dC(dx(t));return R(pX(),uI(t=>uf(e,t)),ug(e=>tt([s+n,e])))}),wI=(e,t,s)=>uF(n=>R(go(e=>e.currentTimeMillis),ui(n=>w$(s,s=>{switch(s._tag){case"None":return tt(wE(e,t,n));case"Some":{let[i]=s.value;return i-n<=0?tt(wE(e,t,n)):nq()}}})),ui(e=>e8(e)?c4("BUG: Effect.cachedInvalidate - please report an issue at https://github.com/Effect-TS/effect/issues"):n(p1(e.value[1]))))),wN=e=>be(e,nq()),wR=((e,t)=>ui(vp,s=>R(wR(e,s),_f(ui(s.value,t)))),k(2,(e,t)=>u9(_p,e=>e.zip(t))(e))),wA=((e,{duration:t,onTimeout:s})=>uo(wA(e,{onTimeout:()=>c7(s),onSuccess:uO,duration:t})),k(2,(e,{duration:t,onSuccess:s,onTimeout:n})=>un(i=>_m(e,uh(bC(t)),{onSelfWin:(e,t)=>ui(e.await,n=>"Success"===n._tag?ui(e.inheritAll,()=>cV(uq(t,i),s(n.value))):ui(uq(t,i),()=>pB(n.cause))),onOtherWin:(e,t)=>ui(e.await,s=>"Success"===s._tag?ui(e.inheritAll,()=>cV(uq(t,i),n())):ui(uq(t,i),()=>pB(s.cause))),otherScope:xh})))),wF=Symbol.for("effect/Ref/SynchronizedRef"),wj={_A:e=>e};class wC{ref;withLock;[wF]=wj;[g3]=g4;[g5];constructor(e,t){this.ref=e,this.withLock=t,this[g5]=g5,this.get=g7(this.ref)}get;modify(e){return this.modifyEffect(t=>uO(e(t)))}modifyEffect(e){return this.withLock(R(ui(g7(this.ref),e),ui(([e,t])=>cV(be(this.ref,t),e))))}pipe(){return eC(this,arguments)}}let wM=e=>uE(()=>wL(e)),wL=e=>new wC(g6(e),wT(1).withPermits(1)),w$=k(2,(e,t)=>e.modifyEffect(e=>{let s=t(e);switch(s._tag){case"None":return uO([e,e]);case"Some":return ug(s.value,e=>[e,e])}})),wP=((e,t,s)=>({[xf]:xg,id:()=>R(e.id(),aZ(t.id())),await:R(e.await,uo,_e(uo(t.await),s,{concurrent:!0}),c6),children:e.children,inheritAll:uz(t.inheritAll,e.inheritAll),poll:uB(e.poll,t.poll,(e,t)=>R(e,n0(e=>R(t,nX(t=>pH(e,t,{onSuccess:s,onFailure:lH})))))),interruptAsFork:s=>uz(e.interruptAsFork(s),t.interruptAsFork(s)),pipe(){return eC(this,arguments)}}),e=>(t,s)=>{let n=aQ(),i=[[ps,[[n,e.context]]]];s?.scheduler&&i.push([bo,[[n,s.scheduler]]]);let r=gI(e.fiberRefs,{entries:i,forkAs:n});s?.updateRefs&&(r=s.updateRefs(r,n));let a=new vP(n,r,e.runtimeFlags),o=t;s?.scope&&(o=ui(pk(s.scope,gd),e=>uz(p_(e,un(e=>eO(e,a.id())?uj:uq(a,e))),uy(t,t=>pS(e,t)))));let l=a._supervisor;return l!==vm&&(l.onStart(e.context,o,nq(),a),a.addObserver(e=>l.onEnd(e,a))),xh.add(e.runtimeFlags,a),s?.immediate===!1?a.resume(o):a.start(o),a});class wU extends Error{fiber;_tag="AsyncFiberException";constructor(e){super(`Fiber #${e.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=e,this.name=this._tag,this.stack=this.message}}let wD=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let s=new wU(e);return Error.stackTraceLimit=t,s},wz=Symbol.for("effect/Runtime/FiberFailure"),wB=Symbol.for("effect/Runtime/FiberFailure/Cause");class wZ extends Error{[wz];[wB];constructor(e){super(),this[wz]=wz,this[wB]=e;let t=c_(e);if(t.length>0){let e=t[0];this.name=e.name,this.message=e.message,this.stack=e.stack}this.name=`(FiberFailure) ${this.name}`,(void 0===this.message||0===this.message.length)&&(this.message="An error has occurred")}toJSON(){return{_id:"FiberFailure",cause:this[wB].toJSON()}}toString(){return"(FiberFailure) "+(this.stack??this.message)}[eN](){return this.toString()}}let wq=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let s=new wZ(e);return Error.stackTraceLimit=t,s},wK=e=>{switch(e._op){case"Failure":case"Success":return e;case"Left":return pz(e.left);case"Right":return pG(e.right);case"Some":return pG(e.value);case"None":return pz(pF())}},wJ=e=>t=>{let s=wK(t);if(s)return s;let n=new ba,i=wP(e)(t,{scheduler:n});n.flush();let r=i.unsafePoll();if(r)return r;throw wD(i)},wV=e=>(t,s)=>new Promise(n=>{let i=wK(t);i&&n(i);let r=wP(e)(t);r.addObserver(e=>{n(e)}),s?.signal!==void 0&&(s.signal.aborted?r.unsafeInterruptAsFork(r.id()):s.signal.addEventListener("abort",()=>{r.unsafeInterruptAsFork(r.id())},{once:!0}))});class wG{context;runtimeFlags;fiberRefs;constructor(e,t,s){this.context=e,this.runtimeFlags=t,this.fiberRefs=s}pipe(){return eC(this,arguments)}}let wW=lN(1,32,4),wH=new wG((p={context:tx(),runtimeFlags:wW,fiberRefs:new gx(new Map)}).context,p.runtimeFlags,p.fiberRefs),wY=(e,t)=>wV(wH)(e,t).then(e=>{switch(e._tag){case ez:return e.effect_instruction_i0;case e$:throw wq(e.effect_instruction_i0)}}),wQ=e=>{let t=wJ(wH)(e);if("Failure"!==t._tag)return t.effect_instruction_i0;throw wq(t.effect_instruction_i0)},wX=k(2,(e,t)=>e.modifyEffect(t)),w0=Symbol.for("effect/Layer"),w1={[w0]:{_RIn:e=>e,_E:e=>e,_ROut:e=>e},pipe(){return eC(this,arguments)}},w2=Symbol.for("effect/Layer/MemoMap"),w5=e=>G(e,w0),w3=e=>"Fresh"===e._tag;class w4{ref;[w2];constructor(e){this.ref=e,this[w2]=w2}getOrElseMemoize(e,t){return R(wX(this.ref,s=>{let n=s.get(e);if(void 0!==n){let[e,i]=n;return uO([R(e,ui(([e,t])=>R(bX(e),cV(t))),uy(pJ({onFailure:()=>uj,onSuccess:()=>pw(t,i)}))),s])}return R(g8(0),ui(n=>R(pX(),ui(i=>R(g8(()=>uj),ug(r=>{let a=uF(a=>R(_a(),ui(o=>R(a(ui(w8(e,o,!0),e=>bq(e(this)))),c6,ui(a=>{switch(a._tag){case e$:return R(p3(i,a.effect_instruction_i0),uz(pS(o,a)),uz(ue(a.effect_instruction_i0)));case ez:return R(be(r,e=>R(pS(o,e),uM(bt(n,e=>[1===e,e-1])),cG)),uz(bs(n,e=>e+1)),uz(pw(t,t=>R(uE(()=>s.delete(e)),uz(g7(r)),ui(e=>e(t))))),uz(p4(i,a.effect_instruction_i0)),cV(a.effect_instruction_i0[1]))}}))))),o=[R(p1(i),uy(pV({onFailure:()=>uj,onSuccess:()=>bs(n,e=>e+1)}))),e=>R(g7(r),ui(t=>t(e)))];return[a,w3(e)?s:s.set(e,o)]}))))))}),uo)}}let w9=uT(()=>ug(wM(new Map),e=>new w4(e))),w6=k(2,(e,t)=>ui(w9,s=>ui(w8(e,t),e=>e(s)))),w8=(e,t,s=!1)=>{switch(e._tag){case"Locally":return uE(()=>s=>e.f(s.getOrElseMemoize(e.self,t)));case"ExtendScope":return uE(()=>t=>v8(s=>t.getOrElseMemoize(e.layer,s)));case"Fold":return uE(()=>s=>R(s.getOrElseMemoize(e.layer,t),uc({onFailure:n=>s.getOrElseMemoize(e.failureK(n),t),onSuccess:n=>s.getOrElseMemoize(e.successK(n),t)})));case"Fresh":return uE(()=>s=>R(e.layer,w6(t)));case"FromEffect":return s?uE(()=>t=>e.effect):uE(()=>s=>s.getOrElseMemoize(e,t));case"Provide":return uE(()=>s=>R(s.getOrElseMemoize(e.first,t),ui(n=>R(s.getOrElseMemoize(e.second,t),dt(n)))));case"Scoped":return s?uE(()=>s=>_o(e.effect,t)):uE(()=>s=>s.getOrElseMemoize(e,t));case"Suspend":return uE(()=>s=>s.getOrElseMemoize(e.evaluate(),t));case"ProvideMerge":return uE(()=>s=>R(s.getOrElseMemoize(e.first,t),uB(s.getOrElseMemoize(e.second,t),e.zipK)));case"ZipWith":return uE(()=>s=>R(s.getOrElseMemoize(e.first,t),_e(s.getOrElseMemoize(e.second,t),e.zipK,{concurrent:!0})))}},w7=e=>Se(lV(e)),Se=e=>Sn(ue(e)),St=k(2,(e,t)=>Sr(e,{onFailure:w7,onSuccess:t})),Ss=k(2,(e,t)=>{let s=tb(e),n=s?e:t;return Sn(ug(s?t:e,e=>tp(n,e)))});function Sn(e){let t=Object.create(w1);return t._tag="FromEffect",t.effect=e,t}let Si=k(2,(e,{onFailure:t,onSuccess:s})=>{let n=Object.create(w1);return n._tag="Fold",n.layer=e,n.failureK=t,n.successK=s,n}),Sr=k(2,(e,{onFailure:t,onSuccess:s})=>Si(e,{onFailure:e=>{let s=l6(e);switch(s._tag){case"Left":return t(s.left);case"Right":return Se(s.right)}},onSuccess:s})),Sa=k(2,(e,t)=>{let s=tb(e),n=s?e:t;return Sl(ug(s?t:e,e=>tp(n,e)))}),So=e=>Sl(R(e,cV(tx()))),Sl=e=>{let t=Object.create(w1);return t._tag="Scoped",t.effect=e,t},Sc=k(2,(e,t)=>cJ(_a(),s=>ui(w6(t,s),t=>ds(e,t)),(e,t)=>pS(e,t))),Su=k(2,(e,t)=>{let s=gC(wH.fiberRefs,t.fiberRefs),n=lj(wH.runtimeFlags,t.runtimeFlags);return uF(i=>cK(r=>{let a=r.getFiberRef(ps),o=r.getFiberRefs(),l=gL(r.id(),o)(s),c=r._runtimeFlags,u=lC(n)(c),p=gC(l,o),d=lj(u,c);return r.setFiberRefs(l),r._runtimeFlags=u,_f(ds(i(e),tf(a,t.context)),cK(e=>(e.setFiberRefs(gL(e.id(),e.getFiberRefs())(p)),e._runtimeFlags=lC(d)(e._runtimeFlags),uj)))}))}),Sp=k(2,(e,t)=>w5(t)?Sc(e,t):tc(t)?ds(e,t):Su(e,t)),Sd=Symbol.for("effect/MutableList"),Sm={[Sd]:Sd,[Symbol.iterator](){let e=!1,t=this.head;return{next(){if(e)return this.return();if(null==t)return e=!0,this.return();let s=t.value;return t=t.next,{done:e,value:s}},return:t=>(e||(e=!0),{done:!0,value:t})}},toString(){return eA(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(eR)}},[eN](){return this.toJSON()},pipe(){return eC(this,arguments)}},Sh=e=>({value:e,removed:!1,prev:void 0,next:void 0}),Sf=()=>{let e=Object.create(Sm);return e.head=void 0,e.tail=void 0,e._length=0,e},Sg=e=>0===Sb(e),Sb=e=>e._length,Sx=k(2,(e,t)=>{let s=Sh(t);return void 0===e.head&&(e.head=s),void 0===e.tail||(e.tail.next=s,s.prev=e.tail),e.tail=s,e._length+=1,e}),Sy=e=>{let t=e.head;if(void 0!==t)return Sv(e,t),t.value},Sv=(e,t)=>{!t.removed&&(t.removed=!0,void 0!==t.prev&&void 0!==t.next?(t.prev.next=t.next,t.next.prev=t.prev):void 0!==t.prev?(e.tail=t.prev,t.prev.next=void 0):void 0!==t.next?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))},S_=Symbol.for("effect/MutableQueue"),Sw=Symbol.for("effect/mutable/MutableQueue/Empty"),SS={[S_]:S_,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return eA(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(eR)}},[eN](){return this.toJSON()},pipe(){return eC(this,arguments)}},Sk=e=>{let t=Object.create(SS);return t.queue=Sf(),t.capacity=e,t},SO=()=>Sk(void 0),ST=k(2,(e,t)=>{let s=Sb(e.queue);return(void 0===e.capacity||s!==e.capacity)&&(Sx(t)(e.queue),!0)}),SE=k(2,(e,t)=>Sg(e.queue)?t:Sy(e.queue)),SI=(e,t,s,n)=>om({_tag:"Complete",key:e,exit:t,entryStats:s,timeToLiveMillis:n}),SN=(e,t)=>om({_tag:"Pending",key:e,deferred:t}),SR=(e,t)=>om({_tag:"Refreshing",deferred:e,complete:t}),SA=Symbol.for("effect/Cache/MapKey");class SF{current;[SA]=SA;previous=void 0;next=void 0;constructor(e){this.current=e}[ed](){return R(em(this.current),ef(em(this.previous)),ef(em(this.next)),eS(this))}[ek](e){return this===e||SC(e)&&eO(this.current,e.current)&&eO(this.previous,e.previous)&&eO(this.next,e.next)}}let Sj=e=>new SF(e),SC=e=>G(e,SA);class SM{head=void 0;tail=void 0;add(e){if(e!==this.tail){if(void 0===this.tail)this.head=e,this.tail=e;else{let t=e.previous,s=e.next;void 0!==s&&(e.next=void 0,void 0!==t?(t.next=s,s.previous=t):(this.head=s,this.head.previous=void 0)),this.tail.next=e,e.previous=this.tail,this.tail=e}}}remove(){let e=this.head;if(void 0!==e){let t=e.next;void 0!==t?(e.next=void 0,this.head=t,this.head.previous=void 0):(this.head=void 0,this.tail=void 0)}return e}}let SL=()=>new SM,S$=(e,t,s,n,i,r)=>({map:e,keys:t,accesses:s,updating:n,hits:i,misses:r}),SP=()=>S$(ye(),SL(),SO(),aT(!1),0,0),SU=Symbol.for("effect/Cache"),SD={_Key:e=>e,_Error:e=>e,_Value:e=>e},Sz=e=>e,SB=e=>({loadedMillis:e});class SZ{capacity;context;fiberId;lookup;timeToLive;[SU]=SD;cacheState;constructor(e,t,s,n,i){this.capacity=e,this.context=t,this.fiberId=s,this.lookup=n,this.timeToLive=i,this.cacheState=SP()}get(e){return ug(this.getEither(e),tR)}get cacheStats(){return uE(()=>Sz({hits:this.cacheState.hits,misses:this.cacheState.misses,size:yo(this.cacheState.map)}))}getOption(e){return uT(()=>nK(yt(this.cacheState.map,e),{onNone:()=>{let t=Sj(e);return this.trackAccess(t),this.trackMiss(),uO(nq())},onSome:e=>this.resolveMapValue(e)}))}getOptionComplete(e){return uT(()=>nK(yt(this.cacheState.map,e),{onNone:()=>{let t=Sj(e);return this.trackAccess(t),this.trackMiss(),uO(nq())},onSome:e=>this.resolveMapValue(e,!0)}))}contains(e){return uE(()=>yn(this.cacheState.map,e))}entryStats(e){return uE(()=>{let t=yt(this.cacheState.map,e);if(e7(t))switch(t.value._tag){case"Complete":return tt(SB(t.value.entryStats.loadedMillis));case"Pending":break;case"Refreshing":return tt(SB(t.value.complete.entryStats.loadedMillis))}return nq()})}getEither(e){return uT(()=>{let t,s;let n=nH(yt(this.cacheState.map,e));return(void 0===n&&(s=pQ(this.fiberId),t=Sj(e),yn(this.cacheState.map,e)?n=nH(yt(this.cacheState.map,e)):yi(this.cacheState.map,e,SN(t,s))),void 0===n)?(this.trackAccess(t),this.trackMiss(),ug(this.lookupValueOf(e,s),tI)):ui(this.resolveMapValue(n),nK({onNone:()=>this.getEither(e),onSome:e=>uO(tE(e))}))})}invalidate(e){return uE(()=>{ya(this.cacheState.map,e)})}invalidateWhen(e,t){return uE(()=>{let s=yt(this.cacheState.map,e);e7(s)&&"Complete"===s.value._tag&&"Success"===s.value.exit._tag&&t(s.value.exit.value)&&ya(this.cacheState.map,e)})}get invalidateAll(){return uE(()=>{this.cacheState.map=ye()})}refresh(e){return go(t=>uT(()=>{let s=pQ(this.fiberId),n=nH(yt(this.cacheState.map,e));if(void 0===n&&(yn(this.cacheState.map,e)?n=nH(yt(this.cacheState.map,e)):yi(this.cacheState.map,e,SN(Sj(e),s))),void 0===n)return cG(this.lookupValueOf(e,s));switch(n._tag){case"Complete":if(this.hasExpired(t,n.timeToLiveMillis))return eO(nH(yt(this.cacheState.map,e)),n)&&ya(this.cacheState.map,e),cG(this.get(e));return R(this.lookupValueOf(e,s),b9(()=>{if(eO(nH(yt(this.cacheState.map,e)),n)){let t=SR(s,n);return yi(this.cacheState.map,e,t),!0}return!1}),cG);case"Pending":case"Refreshing":return p1(n.deferred)}}))}set(e,t){return go(s=>uE(()=>{let n=s.unsafeCurrentTimeMillis(),i=pG(t),r=SI(Sj(e),i,SB(n),n+dC(dx(this.timeToLive(i))));yi(this.cacheState.map,e,r)}))}get size(){return uE(()=>yo(this.cacheState.map))}get values(){return uE(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[1].exit.value);return e})}get entries(){return uE(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push([t[0],t[1].exit.value]);return e})}get keys(){return uE(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[0]);return e})}resolveMapValue(e,t=!1){return go(s=>{switch(e._tag){case"Complete":if(this.trackAccess(e.key),this.hasExpired(s,e.timeToLiveMillis))return ya(this.cacheState.map,e.key.current),uO(nq());return this.trackHit(),ug(e.exit,tt);case"Pending":if(this.trackAccess(e.key),this.trackHit(),t)return uO(nq());return ug(p1(e.deferred),tt);case"Refreshing":if(this.trackAccess(e.complete.key),this.trackHit(),this.hasExpired(s,e.complete.timeToLiveMillis)){if(t)return uO(nq());return ug(p1(e.deferred),tt)}return ug(e.complete.exit,tt)}})}trackHit(){this.cacheState.hits=this.cacheState.hits+1}trackMiss(){this.cacheState.misses=this.cacheState.misses+1}trackAccess(e){if(ST(this.cacheState.accesses,e),aE(this.cacheState.updating,!1,!0)){let e=!0;for(;e;){let t=SE(this.cacheState.accesses,Sw);t===Sw?e=!1:this.cacheState.keys.add(t)}let t=yo(this.cacheState.map);for(e=t>this.capacity;e;){let s=this.cacheState.keys.remove();void 0!==s?yn(this.cacheState.map,s.current)&&(ya(this.cacheState.map,s.current),t-=1,e=t>this.capacity):e=!1}aN(this.cacheState.updating,!1)}}hasExpired(e,t){return e.unsafeCurrentTimeMillis()>t}lookupValueOf(e,t){return go(s=>uT(()=>R(this.lookup(e),dt(this.context),c6,ui(n=>{let i=s.unsafeCurrentTimeMillis(),r=SB(i),a=SI(Sj(e),n,r,i+dC(dx(this.timeToLive(n))));return yi(this.cacheState.map,e,a),uz(p5(t,n),n)}),uv(()=>uz(gc(t),uE(()=>{ya(this.cacheState.map,e)}))))))}}let Sq=(e,t,s)=>new SZ(e,tx(),aU,t,e=>dx(s(e))),SK=(()=>u6(Sq(65536,()=>ug(pX(),e=>({listeners:new vn,handle:e})),()=>dN(60))),function(){let e;return e=1==arguments.length?arguments[0]:arguments[1].bind(arguments[0]),uT(()=>{let t=e(R),s=eu(()=>t.next()),n=e=>e.done?uO(e.value):ui(el(e.value),e=>n(eu(()=>t.next(e))));return n(s)})}),SJ=function(){let e="string"!=typeof arguments[0],t=e?arguments[1]:arguments[0],s=cj(e?arguments[2]:arguments[1]);if(e){let e=arguments[0];return xe(t,s,t=>xt(e,t))}return e=>xe(t,s,t=>xt(e,t))},SV=(e,t=[])=>({value:e,forest:t}),SG=e=>ug(ki(e),e=>SH(e)),SW=e=>wQ(SG(e)),SH=e=>e.value+SY("\n",e.forest),SY=(e,t)=>{let s,n="",i=t.length;for(let r=0;r<i;r++){s=t[r];let a=r===i-1;n+=e+(a?"└":"├")+"─ "+s.value+SY(e+(i>1&&!a?"│  ":"   "),s.forest)}return n},SQ=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},SX=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},S0=e=>"ast"in e?tt(e.ast):nq(),S1=e=>S0(e).pipe(n0(mq),ui(t=>{let s=t(e);return L(s)?uO({message:s,override:!1}):cq(s)?ug(s,e=>({message:e,override:!1})):L(s.message)?uO({message:s.message,override:s.override}):ug(s.message,e=>({message:e,override:s.override}))})),S2=e=>t=>t._tag===e,S5=S2("Composite"),S3=S2("Refinement"),S4=S2("Transformation"),S9=e=>S1(e).pipe(ui(t=>!t.override&&(S5(e)||S3(e)&&"From"===e.kind||S4(e)&&"Transformation"!==e.kind)?S4(e)||S3(e)?S9(e.issue):nq():uO(t.message))),S6=e=>S0(e).pipe(n0(mY),n1(t=>nW(t(e)))),S8=e=>S9(e).pipe(u_(()=>S6(e)),cX(()=>uO(e.message??`Expected ${String(e.ast)}, actual ${mp(e.actual)}`))),S7=e=>nJ(S6(e),()=>String(e.ast)),ke=e=>e.message??"is forbidden",kt=e=>e.message??"is unexpected",ks=e=>mK(e.ast).pipe(ui(e=>{let t=e();return L(t)?uO(t):t}),cX(()=>uO(e.message??"is missing"))),kn=(e,t)=>uu(S9(e),{onFailure:t,onSuccess:e=>uO(SV(e))}),ki=e=>{switch(e._tag){case"Type":return ug(S8(e),SV);case"Forbidden":return uO(SV(S7(e),[SV(ke(e))]));case"Unexpected":return uO(SV(kt(e)));case"Missing":return ug(ks(e),SV);case"Transformation":return kn(e,()=>ug(ki(e.issue),t=>SV(S7(e),[SV(SQ(e.kind),[t])])));case"Refinement":return kn(e,()=>ug(ki(e.issue),t=>SV(S7(e),[SV(SX(e.kind),[t])])));case"Pointer":return ug(ki(e.issue),t=>SV(mg(e.path),[t]));case"Composite":{let t=S7(e);return kn(e,()=>mm(e.issues)?ug(vH(e.issues,ki),e=>SV(t,e)):ug(ki(e.issues),e=>SV(t,[e])))}}};class kr{path;actual;issue;_tag="Pointer";constructor(e,t,s){this.path=e,this.actual=t,this.issue=s}}class ka{actual;message;_tag="Unexpected";constructor(e,t){this.actual=e,this.message=t}}class ko{ast;message;_tag="Missing";actual=void 0;constructor(e,t){this.ast=e,this.message=t}}class kl{ast;actual;issues;output;_tag="Composite";constructor(e,t,s,n){this.ast=e,this.actual=t,this.issues=s,this.output=n}}class kc{ast;actual;kind;issue;_tag="Refinement";constructor(e,t,s,n){this.ast=e,this.actual=t,this.kind=s,this.issue=n}}class ku{ast;actual;kind;issue;_tag="Transformation";constructor(e,t,s,n){this.ast=e,this.actual=t,this.kind=s,this.issue=n}}class kp{ast;actual;message;_tag="Type";constructor(e,t,s){this.ast=e,this.actual=t,this.message=s}}class kd{ast;actual;message;_tag="Forbidden";constructor(e,t,s){this.ast=e,this.actual=t,this.message=s}}let km=Symbol.for("@effect/schema/ParseErrorTypeId");class kh extends dc("ParseError"){[km]=km;get message(){return this.toString()}toString(){return SW(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[eN](){return this.toJSON()}}let kf=e=>new kh({issue:e}),kg=tI,kb=tE,kx=tN,ky=k(2,(e,t)=>"Left"===e._tag?e:"Right"===e._tag?t(e.right):ui(e,t)),kv=k(2,(e,t)=>"Left"===e._tag?e:"Right"===e._tag?tI(t(e.right)):ug(e,t)),k_=k(2,(e,t)=>"Left"===e._tag?tE(t(e.left)):"Right"===e._tag?e:ux(e,t)),kw=e=>{if("Left"===e._tag||"Right"===e._tag)return e},kS=k(2,(e,t)=>"Left"===e._tag?tE(t.onFailure(e.left)):"Right"===e._tag?tI(t.onSuccess(e.right)):ub(e,t)),kk=(e,t)=>void 0===t||$(t)?e:void 0===e?t:{...e,...t},kO=(e,t,s)=>{let n=kC(e,t);return(e,t)=>n(e,kk(s,t))},kT=(e,t,s)=>{let n=kO(e,t,s);return(e,t)=>tA(n(e,t),kf)},kE=(e,t,s)=>{let n=kC(e,t);return(e,t)=>n(e,{...kk(s,t),isEffectAllowed:!0})},kI=(e,t)=>kE(e.ast,!0,t),kN=(e,t)=>kE(e.ast,!1,t),kR=(e,t)=>kT(h8(e.ast),!0,t),kA=(e,t)=>{let s=kC(h8(e.ast),!0);return(e,n)=>tT(s(e,{exact:!0,...kk(t,n)}))},kF=C(Symbol.for("@effect/schema/Parser/decodeMemoMap"),()=>new WeakMap),kj=C(Symbol.for("@effect/schema/Parser/encodeMemoMap"),()=>new WeakMap),kC=(e,t)=>{let s=t?kF:kj,n=s.get(e);if(n)return n;let i=k$(e,t),r=mQ(e),a=e7(r)?(e,t)=>i(e,kk(t,r.value)):i;return s.set(e,a),a},kM=e=>nH(mW(e)),kL=e=>nH(mH(e)),k$=(e,t)=>{switch(e._tag){case"Refinement":if(t){let t=kC(e.from,!0);return(s,n)=>kB(ky(k_(t(s,n),t=>new kc(e,s,"From",t)),t=>nK(e.filter(t,n??hW,e),{onNone:()=>tI(t),onSome:t=>tE(new kc(e,s,"Predicate",t))})),e,s,n)}{let t=kC(h8(e),!0),s=kC(kz(e.from),!1);return(n,i)=>kB(ky(t(n,i),e=>s(e,i)),e,n,i)}case"Transformation":{let s=kK(e.transformation,t),n=t?kC(e.from,!0):kC(e.to,!1),i=t?kC(e.to,!0):kC(e.from,!1);return(r,a)=>kB(ky(k_(n(r,a),s=>new ku(e,r,t?"Encoded":"Type",s)),n=>ky(k_(s(n,a??hW,e),t=>new ku(e,r,"Transformation",t)),s=>k_(i(s,a),s=>new ku(e,r,t?"Type":"Encoded",s)))),e,r,a)}case"Declaration":{let s=t?e.decodeUnknown(...e.typeParameters):e.encodeUnknown(...e.typeParameters);return(t,n)=>kB(s(t,n??hW,e),e,t,n)}case"Literal":return kP(e,t=>t===e.literal);case"UniqueSymbol":return kP(e,t=>t===e.symbol);case"UndefinedKeyword":case"VoidKeyword":return kP(e,B);case"NeverKeyword":return kP(e,K);case"UnknownKeyword":case"AnyKeyword":return tI;case"StringKeyword":return kP(e,L);case"NumberKeyword":return kP(e,$);case"BooleanKeyword":return kP(e,P);case"BigIntKeyword":return kP(e,U);case"SymbolKeyword":return kP(e,D);case"ObjectKeyword":return kP(e,V);case"Enums":return kP(e,t=>e.enums.some(([e,s])=>s===t));case"TemplateLiteral":{let t=h3(e);return kP(e,e=>L(e)&&t.test(e))}case"TupleType":{let s=e.elements.map(e=>kC(e.type,t)),n=e.rest.map(e=>kC(e.type,t)),i=e.elements.filter(e=>!e.isOptional);e.rest.length>0&&(i=i.concat(e.rest.slice(1)));let r=i.length,a=e.elements.length>0?e.elements.map((e,t)=>t).join(" | "):"never",o=kM(e),l=kL(e);return(t,c)=>{let u;if(!il(t))return tE(new kp(e,t));let p=c?.errors==="all",d=[],m=0,h=[],f=t.length;for(let s=f;s<=r-1;s++){let n=new kr(s,t,new ko(i[s-f]));if(!p)return tE(new kl(e,t,n,h));d.push([m++,n])}if(0===e.rest.length)for(let s=e.elements.length;s<=f-1;s++){let n=new kr(s,t,new ka(t[s],`is unexpected, expected: ${a}`));if(!p)return tE(new kl(e,t,n,h));d.push([m++,n])}let g=0;for(;g<s.length;g++)if(f<g+1){if(e.elements[g].isOptional)continue}else{let n=(0,s[g])(t[g],c),i=kw(n);if(i){if(tO(i)){let s=new kr(g,t,i.left);if(!p)return tE(new kl(e,t,s,kq(h)));d.push([m++,s]);continue}h.push([m++,i.right])}else{let s=m++,i=g;u||(u=[]),u.push(({es:r,output:a})=>ui(c9(n),n=>{if(tO(n)){let o=new kr(i,t,n.left);return p?(r.push([s,o]),uj):tE(new kl(e,t,o,kq(a)))}return a.push([s,n.right]),uj}))}}if(iu(n)){let[s,...i]=n;for(;g<f-i.length;g++){let n=s(t[g],c),i=kw(n);if(i){if(tO(i)){let s=new kr(g,t,i.left);if(!p)return tE(new kl(e,t,s,kq(h)));d.push([m++,s]);continue}h.push([m++,i.right])}else{let s=m++,i=g;u||(u=[]),u.push(({es:r,output:a})=>ui(c9(n),n=>{if(!tO(n))return a.push([s,n.right]),uj;{let o=new kr(i,t,n.left);return p?(r.push([s,o]),uj):tE(new kl(e,t,o,kq(a)))}}))}}for(let s=0;s<i.length;s++)if(!(f<(g+=s)+1)){let n=i[s](t[g],c),r=kw(n);if(r){if(tO(r)){let s=new kr(g,t,r.left);if(!p)return tE(new kl(e,t,s,kq(h)));d.push([m++,s]);continue}h.push([m++,r.right])}else{let s=m++,i=g;u||(u=[]),u.push(({es:r,output:a})=>ui(c9(n),n=>{if(tO(n)){let o=new kr(i,t,n.left);return p?(r.push([s,o]),uj):tE(new kl(e,t,o,kq(a)))}return a.push([s,n.right]),uj}))}}}let b=({es:s,output:n})=>nZ(s)?tE(new kl(e,t,kq(s),kq(n))):tI(kq(n));if(u&&u.length>0){let e=u;return uT(()=>{let t={es:iA(d),output:iA(h)};return ui(vH(e,e=>e(t),{concurrency:o,batching:l,discard:!0}),()=>b(t))})}return b({output:h,es:d})}}case"TypeLiteral":{if(0===e.propertySignatures.length&&0===e.indexSignatures.length)return kP(e,Y);let s=[],n={},i=[];for(let r of e.propertySignatures)s.push([kC(r.type,t),r]),n[r.name]=null,i.push(r.name);let r=e.indexSignatures.map(e=>[kC(e.parameter,t),kC(e.type,t),e.parameter]),a=hz.make(e.indexSignatures.map(e=>e.parameter).concat(i.map(e=>D(e)?new m8(e):new m4(e)))),o=kC(a,t),l=kM(e),c=kL(e);return(t,u)=>{let p,d;if(!ee(t))return tE(new kp(e,t));let m=u?.errors==="all",h=[],f=0,g=u?.onExcessProperty==="error",b=u?.onExcessProperty==="preserve",x={};if(g||b){for(let s of p=mc(t))if(tO(kw(o(s,u)))){if(g){let n=new kr(s,t,new ka(t[s],`is unexpected, expected: ${String(a)}`));if(!m)return tE(new kl(e,t,n,x));h.push([f++,n]);continue}x[s]=t[s]}}let y=u?.exact===!0;for(let n=0;n<s.length;n++){let i=s[n][1],r=i.name,a=Object.prototype.hasOwnProperty.call(t,r);if(!a){if(i.isOptional)continue;if(y){let s=new kr(r,t,new ko(i));if(!m)return tE(new kl(e,t,s,x));h.push([f++,s]);continue}}let o=(0,s[n][0])(t[r],u),l=kw(o);if(l){if(tO(l)){let s=new kr(r,t,a?l.left:new ko(i));if(!m)return tE(new kl(e,t,s,x));h.push([f++,s]);continue}x[r]=l.right}else{let s=f++;d||(d=[]),d.push(({es:n,output:l})=>ui(c9(o),o=>{if(tO(o)){let c=new kr(r,t,a?o.left:new ko(i));return m?(n.push([s,c]),uj):tE(new kl(e,t,c,l))}return l[r]=o.right,uj}))}}for(let s=0;s<r.length;s++){let i=r[s],a=i[0],o=i[1];for(let s of ml(t,i[2])){let i=kw(a(s,u));if(i&&tT(i)){let i=o(t[s],u),r=kw(i);if(r){if(tO(r)){let n=new kr(s,t,r.left);if(!m)return tE(new kl(e,t,n,x));h.push([f++,n]);continue}Object.prototype.hasOwnProperty.call(n,s)||(x[s]=r.right)}else{let r=f++,a=s;d||(d=[]),d.push(({es:o,output:l})=>ui(c9(i),i=>{if(!tO(i))return Object.prototype.hasOwnProperty.call(n,s)||(l[s]=i.right),uj;{let s=new kr(a,t,i.left);return m?(o.push([r,s]),uj):tE(new kl(e,t,s,l))}}))}}}}let v=({es:s,output:n})=>{if(nZ(s))return tE(new kl(e,t,kq(s),n));if(u?.propertyOrder==="original"){let e=p||mc(t);for(let t of i)-1===e.indexOf(t)&&e.push(t);let s={};for(let t of e)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t]);return tI(s)}return tI(n)};if(d&&d.length>0){let e=d;return uT(()=>{let t={es:iA(h),output:Object.assign({},x)};return ui(vH(e,e=>e(t),{concurrency:l,batching:c,discard:!0}),()=>v(t))})}return v({es:h,output:x})}}case"Union":{let s=kD(e.types,t),n=mc(s.keys),i=n.length,r=new Map;for(let s=0;s<e.types.length;s++)r.set(e.types[s],kC(e.types[s],t));let a=kM(e)??1,o=kL(e);return(t,l)=>{let c;let u=[],p=0,d=[];if(i>0){if(ee(t))for(let e=0;e<i;e++){let i=n[e],r=s.keys[i].buckets;if(Object.prototype.hasOwnProperty.call(t,i)){let e=String(t[i]);if(Object.prototype.hasOwnProperty.call(r,e))d=d.concat(r[e]);else{let e=hz.make(s.keys[i].literals);u.push([p++,new kl(new hF([new hN(i,e,!1,!0)],[]),t,new kr(i,t,new kp(e,t[i])))])}}else{let e=hz.make(s.keys[i].literals),n=new hN(i,e,!1,!0);u.push([p++,new kl(new hF([n],[]),t,new kr(i,t,new ko(n)))])}}else u.push([p++,new kp(e,t)])}s.otherwise.length>0&&(d=d.concat(s.otherwise));for(let e=0;e<d.length;e++){let s=d[e],n=r.get(s)(t,l),i=c&&0!==c.length?void 0:kw(n);if(i){if(tT(i))return tI(i.right);u.push([p++,i.left])}else{let e=p++;c||(c=[]),c.push(t=>uT(()=>"finalResult"in t?uj:ui(c9(n),s=>(tT(s)?t.finalResult=tI(s.right):t.es.push([e,s.left]),uj))))}}let m=s=>nZ(s)?1===s.length&&"Type"===s[0][1]._tag?tE(s[0][1]):tE(new kl(e,t,kq(s))):tE(new kp(e,t));if(c&&c.length>0){let e=c;return uT(()=>{let t={es:iA(u)};return ui(vH(e,e=>e(t),{concurrency:a,batching:o,discard:!0}),()=>"finalResult"in t?t.finalResult:m(t.es))})}return m(u)}}case"Suspend":{let s=mu(()=>kC(h5(e.f(),e.annotations),t));return(e,t)=>s()(e,t)}}},kP=(e,t)=>s=>t(s)?tI(s):tE(new kp(e,s)),kU=(e,t)=>{switch(e._tag){case"Declaration":{let s=mX(e);if(e7(s))return kU(s.value,t);break}case"TypeLiteral":{let s=[];for(let n=0;n<e.propertySignatures.length;n++){let i=e.propertySignatures[n],r=t?fn(i.type):h8(i.type);m9(r)&&!i.isOptional&&s.push([i.name,r])}return s}case"Refinement":return kU(e.from,t);case"Suspend":return kU(e.f(),t);case"Transformation":return kU(t?e.from:e.to,t)}return[]},kD=(e,t)=>{let s={},n=[];for(let i=0;i<e.length;i++){let r=e[i],a=kU(r,t);if(a.length>0)for(let e=0;e<a.length;e++){let[t,n]=a[e],i=String(n.literal);s[t]=s[t]||{buckets:{},literals:[]};let o=s[t].buckets;if(Object.prototype.hasOwnProperty.call(o,i)){if(e<a.length-1)continue;o[i].push(r),s[t].literals.push(n)}else{o[i]=[r],s[t].literals.push(n);break}}else n.push(r)}return{keys:s,otherwise:n}},kz=e=>hG(e)?kz(e.from):e,kB=(e,t,s,n)=>{let i=kw(e);if(i)return i;if(n?.isEffectAllowed===!0)return e;try{return wQ(c9(e))}catch(e){return tE(new kd(t,s,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))}},kZ=([e],[t])=>e>t?1:e<t?-1:0;function kq(e){return e.sort(kZ).map(e=>e[1])}let kK=(e,t)=>{switch(e._tag){case"FinalTransformation":return t?e.decode:e.encode;case"ComposeTransformation":return tI;case"TypeLiteralTransformation":return s=>{let n=tI(s);for(let s of e.propertySignatureTransformations){let[e,i]=t?[s.from,s.to]:[s.to,s.from],r=t?s.decode:s.encode;n=kv(n,t=>{let s=r(Object.prototype.hasOwnProperty.call(t,e)?tt(t[e]):nq());return delete t[e],e7(s)&&(t[i]=s.value),t})}return n}}},kJ=Symbol.for("@effect/schema/PrettyHookId"),kV=mZ(kJ),kG=Symbol.for("@effect/schema/Schema"),kW=e=>class{[kG]=kH;static Type;static Encoded;static [kG]=kH;static ast=e;static annotations(e){return kW(kQ(this.ast,e))}static pipe(){return eC(this,arguments)}static toString(){return String(e)}},kH={_A:e=>e,_I:e=>e,_R:e=>e},kY=e=>{if(!e)return{};let t={};for(let s of Object.getOwnPropertySymbols(e))t[s]=e[s];if(void 0!==e.typeId){let s=e.typeId;"object"==typeof s?(t[mE]=s.id,t[s.id]=s.annotation):t[mE]=s}let s=(s,n)=>{void 0!==e[s]&&(t[n]=e[s])};return s("message",mI),s("missingMessage",mN),s("identifier",mR),s("title",mA),s("description",mF),s("examples",mj),s("default",mC),s("documentation",mL),s("jsonSchema",mM),s("arbitrary",d5),s("pretty",kJ),s("equivalence",fm),s("concurrency",m$),s("batching",mP),s("parseIssueTitle",mU),s("parseOptions",mD),t},kQ=(e,t)=>h5(e,kY(t)),kX=e=>String(e.ast),k0=e=>kW(fn(e.ast)),k1=e=>kW(h8(e.ast)),k2=(e,t)=>{let s=kI(e,t);return(e,t)=>k_(s(e,t),kf)},k5=e=>G(e,kG)&&V(e[kG]),k3=e=>hZ(e)?hz.make(hB(e,e=>new m4(e))):new m4(e[0]),k4=(e,t=k3(e))=>class extends kW(t){static annotations(e){return k4(this.literals,kQ(this.ast,e))}static literals=[...e]};function k9(...e){return iu(e)?k4(e):Oi}let k6=e=>{switch(e._tag){case"Literal":return[String(e.literal)];case"NumberKeyword":case"StringKeyword":return[new AST.TemplateLiteral("",[new AST.TemplateLiteralSpan(e,"")])];case"Union":return array_.flatMap(e.types,k6)}throw Error(errors_.getSchemaUnsupportedLiteralSpanErrorMessage(e))},k8=(e,t,s)=>kW(new m5(e.map(e=>e.ast),(...e)=>t.decode(...e.map(kW)),(...e)=>t.encode(...e.map(kW)),kY(s))),k7=(e,t)=>{let s=()=>(t,s,n)=>e(t)?kg(t):kb(new kp(n,t));return kW(new m5([],s,s,kY(t)))},Oe=function(){if(Array.isArray(arguments[0])){let e=arguments[0],t=arguments[1],s=arguments[2];return k8(e,t,s)}let e=arguments[0],t=arguments[1];return k7(e,t)};class Ot extends kW(he){static annotations=super.annotations}class Os extends kW(hs){static annotations=super.annotations}class On extends kW(m6){static annotations=super.annotations}class Oi extends kW(hi){static annotations=super.annotations}class Or extends kW(ha){static annotations=super.annotations}class Oa extends kW(hl){static annotations=super.annotations}class Oo extends kW(hx){static annotations=super.annotations}class Ol extends kW(hv){static annotations=super.annotations}class Oc extends kW(hu){static annotations=super.annotations}class Ou extends kW(hm){static annotations=super.annotations}class Op extends kW(hg){static annotations=super.annotations}class Od extends kW(hS){static annotations=super.annotations}let Om=e=>hz.members(e.map(e=>e.ast)),Oh=(e,t=Om(e))=>class extends kW(t){static annotations(e){return Oh(this.members,kQ(this.ast,e))}static members=[...e]};function Of(...e){return hZ(e)?Oh(e):iu(e)?e[0]:Oi}let Og=e=>Of(e,On),Ob=e=>Of(e,Ot),Ox=e=>Of(e,On,Ot);class Oy{ast;from;[kG];_Token;constructor(e,t){this.ast=e,this.from=t}annotations(e){return new Oy(new AST.OptionalType(this.ast.type,this.ast.isOptional,{...this.ast.annotations,...kY(e)}),this.from)}toString(){return`${this.ast.type}${this.ast.isOptional?"?":""}`}}let Ov=(e,t)=>new hE(e.map(e=>k5(e)?new hO(e.ast,!1):e.ast),t.map(e=>k5(e)?new hk(e.ast):e.ast),!0),O_=(e,t,s=Ov(e,t))=>class extends kW(s){static annotations(e){return O_(this.elements,this.rest,kQ(this.ast,e))}static elements=[...e];static rest=[...t]},Ow=(e,t)=>class extends O_([],[e],t){static annotations(e){return Ow(this.value,kQ(this.ast,e))}static value=e},OS=e=>Ow(e),Ok=e=>e?'"?:"':'":"';class OO extends hO{isReadonly;defaultValue;_tag="PropertySignatureDeclaration";constructor(e,t,s,n,i){super(e,t,n),this.isReadonly=s,this.defaultValue=i}toString(){let e=Ok(this.isOptional),t=String(this.type);return`PropertySignature<${e}, ${t}, never, ${e}, ${t}>`}}class OT extends hO{isReadonly;fromKey;constructor(e,t,s,n,i){super(e,t,n),this.isReadonly=s,this.fromKey=i}}class OE extends hO{isReadonly;defaultValue;constructor(e,t,s,n,i){super(e,t,n),this.isReadonly=s,this.defaultValue=i}}let OI=e=>void 0===e?"never":L(e)?JSON.stringify(e):String(e);class ON{from;to;decode;encode;_tag="PropertySignatureTransformation";constructor(e,t,s,n){this.from=e,this.to=t,this.decode=s,this.encode=n}toString(){return`PropertySignature<${Ok(this.to.isOptional)}, ${this.to.type}, ${OI(this.from.fromKey)}, ${Ok(this.from.isOptional)}, ${this.from.type}>`}}let OR=(e,t)=>{switch(e._tag){case"PropertySignatureDeclaration":return new OO(e.type,e.isOptional,e.isReadonly,{...e.annotations,...t},e.defaultValue);case"PropertySignatureTransformation":return new ON(new OT(e.from.type,e.from.isOptional,e.from.isReadonly,e.from.annotations),new OE(e.to.type,e.to.isOptional,e.to.isReadonly,{...e.to.annotations,...t},e.to.defaultValue),e.decode,e.encode)}},OA=Symbol.for("@effect/schema/PropertySignature");class OF{ast;[kG];[OA]=null;_TypeToken;_Key;_EncodedToken;_HasDefault;constructor(e){this.ast=e}pipe(){return eC(this,arguments)}annotations(e){return new OF(OR(this.ast,kY(e)))}toString(){return String(this.ast)}}let Oj=e=>new OF(e);class OC extends OF{from;constructor(e,t){super(e),this.from=t}annotations(e){return new OC(OR(this.ast,kY(e)),this.from)}}let OM=k(2,(e,t)=>{let s=e.ast;switch(s._tag){case"PropertySignatureDeclaration":return Oj(new OO(s.type,s.isOptional,s.isReadonly,s.annotations,t));case"PropertySignatureTransformation":return Oj(new ON(s.from,new OE(s.to.type,s.to.isOptional,s.to.isReadonly,s.to.annotations,t),s.decode,s.encode))}}),OL=(e,t,s)=>Oj(new ON(new OT(e.ast,!0,!0,{},void 0),new OE(t.ast,!1,!0,{},void 0),e=>tt(s.decode(e)),n0(s.encode))),O$=(e,t,s)=>Oj(new ON(new OT(e.ast,!0,!0,{},void 0),new OE(t.ast,!0,!0,{},void 0),s.decode,s.encode)),OP=(e,t)=>{let s=t?.exact,n=t?.default,i=t?.nullable,r=t?.as=="Option",a=t?.onNoneEncoding?nV(t.onNoneEncoding):O;return s?n?i?OM(OL(Og(e),k1(e),{decode:nK({onNone:n,onSome:e=>null===e?n():e}),encode:tt}),n).ast:OM(OL(e,k1(e),{decode:nK({onNone:n,onSome:O}),encode:tt}),n).ast:r?i?OL(Og(e),Em(k1(e)),{decode:n2(q),encode:a}).ast:OL(e,Em(k1(e)),{decode:O,encode:O}).ast:i?O$(Og(e),k1(e),{decode:n2(q),encode:O}).ast:new OO(e.ast,!0,!0,{},void 0):n?i?OM(OL(Ox(e),k1(e),{decode:nK({onNone:n,onSome:e=>null==e?n():e}),encode:tt}),n).ast:OM(OL(Ob(e),k1(e),{decode:nK({onNone:n,onSome:e=>void 0===e?n():e}),encode:tt}),n).ast:r?i?OL(Ox(e),Em(k1(e)),{decode:n2(e=>null!=e),encode:a}).ast:OL(Ob(e),Em(k1(e)),{decode:n2(Z),encode:a}).ast:i?O$(Ox(e),Ob(k1(e)),{decode:n2(q),encode:O}).ast:new OO(Ob(e).ast,!0,!0,{},void 0)},OU=k(e=>k5(e[0]),(e,t)=>new OC(OP(e,t),e)),OD=e=>G(e,OA),Oz=(e,t)=>{let s=mc(e),n=[];if(s.length>0){let i=[],r=[],a=[];for(let t=0;t<s.length;t++){let o=s[t],l=e[o];if(OD(l)){let e=l.ast;switch(e._tag){case"PropertySignatureDeclaration":{let t=e.type,s=e.isOptional,a=e.annotations;i.push(new hN(o,t,s,!0)),r.push(new hN(o,h8(t),s,!0,a)),n.push(new hN(o,t,s,!0,a));break}case"PropertySignatureTransformation":{let t=e.from.fromKey??o;i.push(new hN(t,e.from.type,e.from.isOptional,!0,e.from.annotations)),r.push(new hN(o,e.to.type,e.to.isOptional,!0,e.to.annotations)),a.push(new h0(t,o,e.decode,e.encode))}}}else i.push(new hN(o,l.ast,!1,!0)),r.push(new hN(o,h8(l.ast),!1,!0)),n.push(new hN(o,l.ast,!1,!0))}if(iu(a)){let e=[],s=[];for(let n of t){let{indexSignatures:t,propertySignatures:a}=h9(n.key.ast,n.value.ast);a.forEach(e=>{i.push(e),r.push(new hN(e.name,h8(e.type),e.isOptional,e.isReadonly,e.annotations))}),t.forEach(t=>{e.push(t),s.push(new hA(t.parameter,h8(t.type),t.isReadonly))})}return new hH(new hF(i,e,{[mA]:"Struct (Encoded side)"}),new hF(r,s,{[mA]:"Struct (Type side)"}),new h1(a))}}let i=[];for(let e of t){let{indexSignatures:t,propertySignatures:s}=h9(e.key.ast,e.value.ast);s.forEach(e=>n.push(e)),t.forEach(e=>i.push(e))}return new hF(n,i)},OB=(e,t)=>{for(let s of mc(e)){let n=e[s];if(void 0===t[s]&&OD(n)){let e=n.ast,i="PropertySignatureDeclaration"===e._tag?e.defaultValue:e.to.defaultValue;void 0!==i&&(t[s]=i())}}return t},OZ=(e,t,s=Oz(e,t))=>class extends kW(s){static annotations(e){return OZ(this.fields,this.records,kQ(this.ast,e))}static fields={...e};static records=[...t];static make=(t,s)=>{let n=OB(e,{...t});return EE(s)?n:kR(this)(n)};static pick(...t){return Oq(d1(e,...t))}static omit(...t){return Oq(d2(e,...t))}};function Oq(e,...t){return OZ(e,t)}let OK=(e,t,s)=>class extends OZ({},[{key:e,value:t}],s){static annotations(s){return OK(e,t,kQ(this.ast,s))}static key=e;static value=t},OJ=(e,t)=>OK(e,t),OV=(e,t,s)=>{if(hM(e)&&hM(t)){let n=[...e.propertySignatures];for(let e of t.propertySignatures){let t=e.name,i=n.findIndex(e=>e.name===t);if(-1===i)n.push(e);else{let{isOptional:r,type:a}=n[i];n[i]=new hN(t,OH(a,e.type,s.concat(t)),r,!0)}}return new hF(n,e.indexSignatures.concat(t.indexSignatures))}throw Error(my(e,t,s))},OG=(d=[mI,mM],e=>{let t;for(let s of d)Object.prototype.hasOwnProperty.call(e.annotations,s)&&(void 0===t&&(t={}),t[s]=e.annotations[s]);return t}),OW=(e,t)=>t.map(t=>new hV(t,e.filter,OG(e))),OH=(e,t,s)=>hz.make(OQ([e],[t],s)),OY=e=>hq(e)?e.types:[e],OQ=(e,t,s)=>i$(e,e=>i$(t,t=>{switch(e._tag){case"Union":return OQ(e.types,OY(t),s);case"Suspend":return[new hJ(()=>OH(e.f(),t,s))];case"Refinement":return OW(e,OQ(OY(e.from),OY(t),s));case"TypeLiteral":switch(t._tag){case"Union":return OQ([e],t.types,s);case"Suspend":return[new hJ(()=>OH(e,t.f(),s))];case"Refinement":return OW(t,OQ([e],OY(t.from),s));case"TypeLiteral":return[OV(e,t,s)];case"Transformation":if(h2(t.transformation))return[new hH(OV(e,t.from,s),OV(h8(e),t.to,s),new h1(t.transformation.propertySignatureTransformations))]}break;case"Transformation":if(h2(e.transformation))switch(t._tag){case"Union":return OQ([e],t.types,s);case"Suspend":return[new hJ(()=>OH(e,t.f(),s))];case"Refinement":return OW(t,OQ([e],OY(t.from),s));case"TypeLiteral":return[new hH(OV(e.from,t,s),OV(e.to,h8(t),s),new h1(e.transformation.propertySignatureTransformations))];case"Transformation":if(h2(t.transformation))return[new hH(OV(e.from,t.from,s),OV(e.to,t.to,s),new h1(e.transformation.propertySignatureTransformations.concat(t.transformation.propertySignatureTransformations)))]}}throw Error(my(e,t,s))})),OX=k(2,(e,t)=>kW(OH(e.ast,t.ast,[]))),O0=e=>kW(new hJ(()=>e().ast)),O1=Symbol.for("@effect/schema/refine"),O2=(e,t,s)=>class extends kW(s){static annotations(e){return O2(this.from,this.filter,kQ(this.ast,e))}static [O1]=e;static from=e;static filter=t;static make=(e,t)=>EE(t)?e:kR(this)(e)},O5=(e,t,s)=>{if(P(e))return e?nq():tt(new kp(t,s));if(L(e))return tt(new kp(t,s,e));if(void 0!==e){if("_tag"in e)return tt(e);let n=new kp(t,s,e.message);return tt(iu(e.path)?new kr(e.path,s,n):n)}return nq()},O3=(e,t,s)=>{if(mh(e))return O5(e,t,s);if(iu(e)){let n=iU(e,e=>O5(e,t,s));if(iu(n))return tt(1===n.length?n[0]:new kl(t,s,n))}return nq()};function O4(e,t){return s=>{function n(t,s,n){return O3(e(t,s,n),n,t)}let i=new hV(s.ast,n,kY(t));return O2(s,n,i)}}let O9=(e,t,s)=>class extends kW(s){static annotations(e){return O9(this.from,this.to,kQ(this.ast,e))}static from=e;static to=t},O6=k(e=>k5(e[0])&&k5(e[1]),(e,t,s)=>O9(e,t,new hH(e.ast,t.ast,new hQ(s.decode,s.encode)))),O8=k(e=>k5(e[0])&&k5(e[1]),(e,t,s)=>O6(e,t,{strict:!0,decode:e=>kg(s.decode(e)),encode:e=>kg(s.encode(e))})),O7=Symbol.for("@effect/schema/TypeId/Trimmed"),Te=e=>t=>t.pipe(O4(e=>e===e.trim(),{typeId:O7,description:"a string with no leading or trailing whitespace",jsonSchema:{pattern:"^\\S[\\s\\S]*\\S$|^\\S$|^$"},...e})),Tt=(e,t)=>s=>s.pipe(O4(t=>t.length>=e,{typeId:fy,description:`a string at least ${e} character(s) long`,jsonSchema:{minLength:e},...t})),Ts=Symbol.for("@effect/schema/TypeId/Pattern"),Tn=(e,t)=>s=>{let n=e.source;return s.pipe(O4(t=>(e.lastIndex=0,e.test(t)),{typeId:{id:Ts,annotation:{regex:e}},description:`a string matching the pattern ${n}`,jsonSchema:{pattern:n},arbitrary:()=>t=>t.stringMatching(e),...t}))},Ti=Symbol.for("@effect/schema/TypeId/Lowercased"),Tr=e=>t=>t.pipe(O4(e=>e===e.toLowerCase(),{typeId:Ti,description:"a lowercase string",...e}));class Ta extends Oc.pipe(Tr({identifier:"Lowercased",title:"Lowercased"})){static annotations=super.annotations}let To=Symbol.for("@effect/schema/TypeId/Capitalized"),Tl=e=>t=>t.pipe(O4(e=>e[0]?.toUpperCase()===e[0],{typeId:To,description:"a capitalized string",...e}));class Tc extends Oc.pipe(Tl({identifier:"Capitalized",title:"Capitalized"})){static annotations=super.annotations}let Tu=Symbol.for("@effect/schema/TypeId/Uncapitalized"),Tp=e=>t=>t.pipe(O4(e=>e[0]?.toLowerCase()===e[0],{typeId:Tu,description:"a uncapitalized string",...e}));class Td extends Oc.pipe(Tp({identifier:"Uncapitalized",title:"Uncapitalized"})){static annotations=super.annotations}let Tm=Symbol.for("@effect/schema/TypeId/Uppercased"),Th=e=>t=>t.pipe(O4(e=>e===e.toUpperCase(),{typeId:Tm,description:"an uppercase string",...e}));class Tf extends Oc.pipe(Th({identifier:"Uppercased",title:"Uppercased"})){static annotations=super.annotations}let Tg=(e,t)=>s=>{let n=V(e)?Math.max(0,Math.floor(e.min)):Math.max(0,Math.floor(e)),i=V(e)?Math.max(n,Math.floor(e.max)):n;return n!==i?s.pipe(O4(e=>e.length>=n&&e.length<=i,{typeId:fv,description:`a string at least ${n} character(s) and at most ${i} character(s) long`,jsonSchema:{minLength:n,maxLength:i},...t})):s.pipe(O4(e=>e.length===n,{typeId:fv,description:1===n?"a single character":`a string ${n} character(s) long`,jsonSchema:{minLength:n,maxLength:n},...t}))};class Tb extends Oc.pipe(Tg(1,{identifier:"Char"})){static annotations=super.annotations}let Tx=e=>Tt(1,{description:"a non empty string",...e});class Ty extends O8(Oc,Ta,{strict:!0,decode:e=>e.toLowerCase(),encode:O}).annotations({identifier:"Lowercase"}){static annotations=super.annotations}class Tv extends O8(Oc,Tf,{strict:!0,decode:e=>e.toUpperCase(),encode:O}).annotations({identifier:"Uppercase"}){static annotations=super.annotations}class T_ extends O8(Oc,Tc,{strict:!0,decode:e=>dH(e),encode:O}).annotations({identifier:"Capitalize"}){static annotations=super.annotations}class Tw extends O8(Oc,Td,{strict:!0,decode:e=>dY(e),encode:O}).annotations({identifier:"Uncapitalize"}){static annotations=super.annotations}class TS extends Oc.pipe(Te({identifier:"Trimmed",title:"Trimmed"})){static annotations=super.annotations}class Tk extends O8(Oc,TS,{strict:!0,decode:e=>e.trim(),encode:O}).annotations({identifier:"Trim"}){static annotations=super.annotations}class TO extends Oc.pipe(Tx({identifier:"NonEmpty",title:"NonEmpty"})){static annotations=super.annotations}let TT=Symbol.for("@effect/schema/TypeId/UUID"),TE=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;class TI extends Oc.pipe(Tn(TE,{typeId:TT,identifier:"UUID",title:"UUID",description:"a Universally Unique Identifier",arbitrary:()=>e=>e.uuid()})){static annotations=super.annotations}let TN=Symbol.for("@effect/schema/TypeId/ULID"),TR=/^[0-7][0-9A-HJKMNP-TV-Z]{25}$/i;class TA extends Oc.pipe(Tn(TR,{typeId:TN,identifier:"ULID",title:"ULID",description:"a Universally Unique Lexicographically Sortable Identifier",arbitrary:()=>e=>e.ulid()})){static annotations=super.annotations}let TF=Symbol.for("@effect/schema/TypeId/Finite"),Tj=e=>t=>t.pipe(O4(e=>Number.isFinite(e),{typeId:TF,description:"a finite number",...e})),TC=(e,t)=>s=>s.pipe(O4(t=>t>e,{typeId:fh,description:0===e?"a positive number":`a number greater than ${e}`,jsonSchema:{exclusiveMinimum:e},...t})),TM=(e,t)=>s=>s.pipe(O4(t=>t>=e,{typeId:ff,description:0===e?"a non-negative number":`a number greater than or equal to ${e}`,jsonSchema:{minimum:e},...t})),TL=e=>t=>t.pipe(O4(e=>Number.isSafeInteger(e),{typeId:fx,title:"integer",description:"an integer",jsonSchema:{type:"integer"},...e})),T$=(e,t)=>s=>s.pipe(O4(t=>t<e,{typeId:fg,description:0===e?"a negative number":`a number less than ${e}`,jsonSchema:{exclusiveMaximum:e},...t})),TP=(e,t)=>s=>s.pipe(O4(t=>t<=e,{typeId:fb,description:0===e?"a non-positive number":`a number less than or equal to ${e}`,jsonSchema:{maximum:e},...t})),TU=Symbol.for("@effect/schema/TypeId/NonNaN"),TD=e=>t=>t.pipe(O4(e=>!Number.isNaN(e),{typeId:TU,description:"a number excluding NaN",...e})),Tz=e=>TC(0,e),TB=e=>T$(0,e),TZ=e=>TP(0,e),Tq=e=>TM(0,e),TK=e=>O6(e,Ou,{strict:!1,decode:(e,t,s)=>kx(dV(e),()=>new kp(s,e)),encode:e=>kg(String(e))});class TJ extends TK(Oc).annotations({identifier:"NumberFromString"}){static annotations=super.annotations}class TV extends Ou.pipe(Tj({identifier:"Finite",title:"Finite"})){static annotations=super.annotations}class TG extends Ou.pipe(TL({identifier:"Int",title:"Int"})){static annotations=super.annotations}class TW extends Ou.pipe(TD({identifier:"NonNaN",title:"NonNaN"})){static annotations=super.annotations}class TH extends Ou.pipe(Tz({identifier:"Positive",title:"Positive"})){static annotations=super.annotations}class TY extends Ou.pipe(TB({identifier:"Negative",title:"Negative"})){static annotations=super.annotations}class TQ extends Ou.pipe(TZ({identifier:"NonPositive",title:"NonPositive"})){static annotations=super.annotations}class TX extends Ou.pipe(Tq({identifier:"NonNegative",title:"NonNegative"})){static annotations=super.annotations}let T0=Symbol.for("@effect/schema/TypeId/JsonNumber");class T1 extends Ou.pipe(O4(e=>!Number.isNaN(e)&&Number.isFinite(e),{typeId:T0,identifier:"JsonNumber",title:"JSON-compatible number",description:"a JSON-compatible number, excluding NaN, +Infinity, and -Infinity",jsonSchema:{type:"number"}})){static annotations=super.annotations}class T2 extends O8(Op,Op,{strict:!0,decode:re,encode:re}){static annotations=super.annotations}class T5 extends O8(Oc,Ol,{strict:!1,decode:e=>Symbol.for(e),encode:e=>e.description}).annotations({identifier:"symbol"}){static annotations=super.annotations}class T3 extends O6(Oc,Oo,{strict:!0,decode:(e,t,s)=>kx(i8(e),()=>new kp(s,e)),encode:e=>kg(String(e))}).annotations({identifier:"bigint"}){static annotations=super.annotations}class T4 extends O6(Ou,Oo,{strict:!0,decode:(e,t,s)=>kx(i7(e),()=>new kp(s,e)),encode:(e,t,s)=>kx(i6(e),()=>new kp(s,e))}).annotations({identifier:"BigintFromNumber"}){static annotations=super.annotations}let T9=(e,t,s,n)=>kS(e,{onFailure:e=>new kl(s,n,e),onSuccess:t});class T6 extends Oe(dS,{identifier:"DurationFromSelf",pretty:()=>String,arbitrary:()=>e=>e.oneof(e.constant(dO),e.bigUint().map(e=>dT(e)),e.bigUint().map(e=>dE(e)),e.maxSafeNat().map(e=>dI(e)),e.maxSafeNat().map(e=>dN(e)),e.maxSafeNat().map(e=>dR(e)),e.maxSafeNat().map(e=>dA(e)),e.maxSafeNat().map(e=>dF(e)),e.maxSafeNat().map(e=>dj(e))),equivalence:()=>dD}){static annotations=super.annotations}class T8 extends O6(Oo,T6,{strict:!0,decode:e=>kg(dT(e)),encode:(e,t,s)=>nK(dM(e),{onNone:()=>kb(new kp(s,e)),onSome:e=>kg(e)})}).annotations({identifier:"DurationFromNanos"}){static annotations=super.annotations}class T7 extends O8(Ou,T6,{strict:!0,decode:e=>dI(e),encode:e=>dC(e)}).annotations({identifier:"DurationFromMillis"}){static annotations=super.annotations}let Ee=function(...e){return Array.isArray(e[0])?O_(e[0],e.slice(1)):O_(e,[])}(TX.pipe(Tj({[mA]:"seconds",[mF]:"seconds"})),TX.pipe(Tj({[mA]:"nanos",[mF]:"nanos"})));class Et extends O8(Ee,T6,{strict:!0,decode:([e,t])=>dT(BigInt(e)*BigInt(1e9)+BigInt(t)),encode:e=>d$(e)}).annotations({identifier:"Duration"}){static annotations=super.annotations}let Es=Symbol.for("@effect/schema/TypeId/ValidDate"),En=e=>t=>t.pipe(O4(e=>!Number.isNaN(e.getTime()),{typeId:Es,description:"a valid Date",...e}));class Ei extends Oe(Q,{identifier:"DateFromSelf",description:"a potentially invalid Date instance",pretty:()=>e=>`new Date(${JSON.stringify(e)})`,arbitrary:()=>e=>e.date({noInvalidDate:!1}),equivalence:()=>nz}){static annotations=super.annotations}class Er extends Ei.pipe(En({identifier:"ValidDateFromSelf",description:"a valid Date instance"})){static annotations=super.annotations}class Ea extends O8(Oc,Ei,{strict:!0,decode:e=>new Date(e),encode:e=>e.toISOString()}).annotations({identifier:"DateFromString"}){static annotations=super.annotations}class Eo extends Ea.pipe(En({identifier:"Date"})){static annotations=super.annotations}class El extends O8(Ou,Ei,{strict:!0,decode:e=>new Date(e),encode:e=>e.getTime()}).annotations({identifier:"DateFromNumber"}){static annotations=super.annotations}let Ec=e=>"None"===e._tag?nq():tt(e.value),Eu=e=>t=>t.oneof(t.record({_tag:t.constant("None")}),t.record({_tag:t.constant("Some"),value:e(t)})).map(Ec),Ep=e=>nK({onNone:()=>"none()",onSome:t=>`some(${e(t)})`}),Ed=e=>(t,s,n)=>e6(t)?e8(t)?kg(nq()):T9(e(t.value,s),tt,n,t):kb(new kp(n,t)),Em=e=>Oe([e],{decode:e=>Ed(kI(e)),encode:e=>Ed(kN(e))},{description:`Option<${kX(e)}>`,pretty:Ep,arbitrary:Eu,equivalence:n5}),Eh=()=>e=>`BigDecimal(${i4(iX(e))})`,Ef=()=>e=>e.tuple(e.bigInt(),e.integer()).map(([e,t])=>iG(e,t));class Eg extends Oe(iV,{identifier:"BigDecimalFromSelf",pretty:Eh,arbitrary:Ef,equivalence:()=>i1}){static annotations=super.annotations}class Eb extends O6(Oc,Eg,{strict:!0,decode:(e,t,s)=>i3(e).pipe(nK({onNone:()=>kb(new kp(s,e)),onSome:e=>kg(iX(e))})),encode:e=>kg(i4(iX(e)))}).annotations({identifier:"BigDecimal"}){static annotations=super.annotations}class Ex extends O6(Ou,Eg,{strict:!0,decode:e=>kg(i5(e)),encode:e=>kg(i9(e))}).annotations({identifier:"BigDecimalFromNumber"}){static annotations=super.annotations}let Ey=e=>k5(e)||OD(e),Ev=e=>mc(e).every(t=>Ey(e[t])),E_=e=>"fields"in e?e.fields:E_(e[O1]),Ew=e=>Ev(e)?Oq(e):k5(e)?e:Oq(E_(e)),ES=e=>Ev(e)?e:E_(e),Ek=e=>(t,s)=>EI({kind:"Class",identifier:e,schema:Ew(t),fields:ES(t),Base:od,annotations:s}),EO=(e,t)=>{let s={...e};for(let n of mc(t)){if(n in e)throw Error(mT(n));s[n]=t[n]}return s},ET=(e,t)=>e8(mJ(e.ast))?e.annotations({title:t}):e,EE=e=>P(e)?e:e?.disableValidation??!1,EI=({Base:e,annotations:t,fields:s,identifier:n,kind:i,schema:r,toStringOverride:a})=>{let o=Symbol.for(`@effect/schema/${i}/${n}`),l=ET(r,`${n} (Constructor)`),c=ET(r,`${n} (Encoded side)`),u=ET(k1(r),`${n} (Type side)`),p=e=>G(e,o)&&kA(u)(e);return class extends e{constructor(e={},t=!1){e={...e},"Class"!==i&&delete e._tag,e=OB(s,e),EE(t)||(e=kR(l)(e)),super(e,!0)}static [kG]=kH;static get ast(){return O8(c,Oe([u],{decode:()=>(e,t,s)=>e instanceof this||p(e)?kg(e):kb(new kp(s,e)),encode:()=>(e,t)=>e instanceof this?kg(e):kv(kN(u)(e,t),e=>new this(e,!0))},{identifier:n,title:n,description:`an instance of ${n}`,pretty:e=>t=>`${n}(${e(t)})`,arbitrary:e=>t=>e(t).map(e=>new this(e)),equivalence:O,[mz]:u.ast,...t}),{strict:!0,decode:e=>new this(e,!0),encode:O}).annotations({[mz]:r.ast}).ast}static pipe(){return eC(this,arguments)}static annotations(e){return kW(this.ast).annotations(e)}static toString(){return`(${String(c)} <-> ${n})`}static make(...e){return new this(...e)}static fields={...s};static identifier=n;static extend(e){return(t,n)=>{let a=ES(t),o=Ew(t),l=EO(s,a);return EI({kind:i,identifier:e,schema:OX(r,o),fields:l,Base:this,annotations:n})}}static transformOrFail(e){return(t,n,a)=>{let o=EO(s,t);return EI({kind:i,identifier:e,schema:O6(r,k1(Oq(o)),n),fields:o,Base:this,annotations:a})}}static transformOrFailFrom(e){return(t,n,a)=>{let o=EO(s,t);return EI({kind:i,identifier:e,schema:O6(k0(r),Oq(o),n),fields:o,Base:this,annotations:a})}}get[o](){return o}toString(){if(void 0!==a){let e=a(this);if(void 0!==e)return e}return`${n}({ ${mc(s).map(e=>`${md(e)}: ${mp(this[e])}`).join(", ")} })`}}},EN=Of(Oq({_tag:k9("None")}).annotations({identifier:"FiberIdNoneEncoded"}),Oq({_tag:k9("Runtime"),id:TG.annotations({title:"id",description:"id"}),startTimeMillis:TG.annotations({title:"startTimeMillis",description:"startTimeMillis"})}).annotations({identifier:"FiberIdRuntimeEncoded"}),Oq({_tag:k9("Composite"),left:O0(()=>EN),right:O0(()=>EN)}).annotations({identifier:"FiberIdCompositeEncoded"})).annotations({identifier:"FiberIdEncoded"}),ER=e=>e.letrec(t=>({None:e.record({_tag:e.constant("None")}),Runtime:e.record({_tag:e.constant("Runtime"),id:e.integer(),startTimeMillis:e.integer()}),Composite:e.record({_tag:e.constant("Composite"),left:t("FiberId"),right:t("FiberId")}),FiberId:e.oneof(t("None"),t("Runtime"),t("Composite"))})).FiberId.map(Ej),EA=e=>{switch(e._tag){case"None":return"FiberId.none";case"Runtime":return`FiberId.runtime(${e.id}, ${e.startTimeMillis})`;case"Composite":return`FiberId.composite(${EA(e.right)}, ${EA(e.left)})`}};class EF extends Oe(aY,{identifier:"FiberIdFromSelf",pretty:()=>EA,arbitrary:()=>ER}){static annotations=super.annotations}let Ej=e=>{switch(e._tag){case"None":return aG;case"Runtime":return aW(e.id,e.startTimeMillis);case"Composite":return aH(Ej(e.left),Ej(e.right))}},EC=e=>{switch(e._tag){case"None":return{_tag:"None"};case"Runtime":return{_tag:"Runtime",id:e.id,startTimeMillis:e.startTimeMillis};case"Composite":return{_tag:"Composite",left:EC(e.left),right:EC(e.right)}}};class EM extends O8(EN,EF,{strict:!0,decode:Ej,encode:EC}).annotations({identifier:"FiberId"}){static annotations=super.annotations}class EL extends O8(Or,Op,{strict:!0,decode:M,encode:O}).annotations({identifier:"BooleanFromUnknown"}){static annotations=super.annotations}let E$=(e,t=2)=>{let s=dx(e);return _9(wt(wk,e=>dz(s,Math.pow(t,e))))},EP=e=>_0(wk,()=>e),EU={silent:Number.NEGATIVE_INFINITY,fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,ready:3,start:3,box:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},ED={silent:{level:-1},fatal:{level:EU.fatal},error:{level:EU.error},warn:{level:EU.warn},log:{level:EU.log},info:{level:EU.info},success:{level:EU.success},fail:{level:EU.fail},ready:{level:EU.info},start:{level:EU.info},box:{level:EU.info},debug:{level:EU.debug},trace:{level:EU.trace},verbose:{level:EU.verbose}};function Ez(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.iterator in e)&&(!(Symbol.toStringTag in e)||"[object Module]"===Object.prototype.toString.call(e))}let EB=(...e)=>e.reduce((e,t)=>(function e(t,s,n=".",i){if(!Ez(s))return e(t,{},n,i);let r=Object.assign({},s);for(let s in t){if("__proto__"===s||"constructor"===s)continue;let a=t[s];null==a||i&&i(r,s,a,n)||(Array.isArray(a)&&Array.isArray(r[s])?r[s]=[...a,...r[s]]:Ez(a)&&Ez(r[s])?r[s]=e(a,r[s],(n?`${n}.`:"")+s.toString(),i):r[s]=a)}return r})(e,t,"",void 0),{}),EZ=!1,Eq=[];class EK{options;_lastLog;_mockFn;constructor(e={}){let t=e.types||ED;for(let s in this.options=EB({...e,defaults:{...e.defaults},level:EJ(e.level,t),reporters:[...e.reporters||[]]},{types:ED,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}}),t){let e={type:s,...this.options.defaults,...t[s]};this[s]=this._wrapLogFn(e),this[s].raw=this._wrapLogFn(e,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(e){this.options.level=EJ(e,this.options.types,this.options.level)}prompt(e,t){if(!this.options.prompt)throw Error("prompt is not supported!");return this.options.prompt(e,t)}create(e){let t=new EK({...this.options,...e});return this._mockFn&&t.mockTypes(this._mockFn),t}withDefaults(e){return this.create({...this.options,defaults:{...this.options.defaults,...e}})}withTag(e){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+e:e})}addReporter(e){return this.options.reporters.push(e),this}removeReporter(e){if(e){let t=this.options.reporters.indexOf(e);if(-1!==t)return this.options.reporters.splice(t,1)}else this.options.reporters.splice(0);return this}setReporters(e){return this.options.reporters=Array.isArray(e)?e:[e],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(let e in this.options.types)console["__"+e]||(console["__"+e]=console[e]),console[e]=this[e].raw}restoreConsole(){for(let e in this.options.types)console["__"+e]&&(console[e]=console["__"+e],delete console["__"+e])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(e,t){e&&(e.__write||(e.__write=e.write),e.write=e=>{this[t].raw(String(e).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(e){e&&e.__write&&(e.write=e.__write,delete e.__write)}pauseLogs(){EZ=!0}resumeLogs(){for(let e of(EZ=!1,Eq.splice(0)))e[0]._logFn(e[1],e[2])}mockTypes(e){let t=e||this.options.mockFn;if(this._mockFn=t,"function"==typeof t)for(let e in this.options.types)this[e]=t(e,this.options.types[e])||this[e],this[e].raw=this[e]}_wrapLogFn(e,t){return(...s)=>{if(EZ){Eq.push([this,e,s,t]);return}return this._logFn(e,s,t)}}_logFn(e,t,s){var n,i;if((e.level||0)>this.level)return!1;let r={date:new Date,args:[],...e,level:EJ(e.level,this.options.types)};s||1!==t.length||((i=n=t[0],"[object Object]"===Object.prototype.toString.call(i)&&(n.message||n.args)&&!n.stack)?0:1)?r.args=[...t]:Object.assign(r,t[0]),r.message&&(r.args.unshift(r.message),delete r.message),r.additional&&(Array.isArray(r.additional)||(r.additional=r.additional.split("\n")),r.args.push("\n"+r.additional.join("\n")),delete r.additional),r.type="string"==typeof r.type?r.type.toLowerCase():"log",r.tag="string"==typeof r.tag?r.tag:"";let a=(e=!1)=>{let t=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&t>0){let e=[...this._lastLog.object.args];t>1&&e.push(`(repeated ${t} times)`),this._log({...this._lastLog.object,args:e}),this._lastLog.count=1}e&&(this._lastLog.object=r,this._log(r))};clearTimeout(this._lastLog.timeout);let o=this._lastLog.time&&r.date?r.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=r.date,o<this.options.throttle)try{let e=JSON.stringify([r.type,r.tag,r.args]),t=this._lastLog.serialized===e;if(this._lastLog.serialized=e,t&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin)){this._lastLog.timeout=setTimeout(a,this.options.throttle);return}}catch{}a(!0)}_log(e){for(let t of this.options.reporters)t.log(e,{options:this.options})}}function EJ(e,t={},s=3){return void 0===e?s:"number"==typeof e?e:t[e]&&void 0!==t[e].level?t[e].level:s}EK.prototype.add=EK.prototype.addReporter,EK.prototype.remove=EK.prototype.removeReporter,EK.prototype.clear=EK.prototype.removeReporter,EK.prototype.withScope=EK.prototype.withTag,EK.prototype.mock=EK.prototype.mockTypes,EK.prototype.pause=EK.prototype.pauseLogs,EK.prototype.resume=EK.prototype.resumeLogs;let EV=k(2,(e,t)=>u4(vU,t)(e)),EG=e=>So(_c(vZ,af(e))),EW=e=>So(_c(vZ,ag(e))),EH=k(2,(e,t)=>St(EW(e),()=>EG(t))),EY=Symbol("uploadthing-custom-id-symbol"),EQ=["upload","failure","multipart-complete"],EX=e=>"string"==typeof e&&EQ.includes(e),E0=["callback"],E1=e=>"string"==typeof e&&E0.includes(e);var E2="6.13.3";let E5=k9("inline","attachment");k9("public-read","private");class E3 extends Ek("FileUploadData")({name:Oc,size:Ou,type:Oc}){}class E4 extends E3.extend("FileUploadDataWithCustomId")({customId:Og(Oc)}){}class E9 extends E4.extend("UploadedFileData")({key:Oc,url:Oc,appUrl:Oc}){}class E6 extends Ek("PresignedBaseSchema")({key:Oc,fileName:Oc,fileType:Oc,fileUrl:Oc,appUrl:Oc,pollingJwt:Oc,pollingUrl:Oc,contentDisposition:E5,customId:Og(Oc)}){}class E8 extends E6.extend("MPUResponseSchema")({urls:OS(Oc),uploadId:Oc,chunkSize:Ou,chunkCount:Ou}){}class E7 extends E6.extend("PSPResponseSchema")({url:Oc,fields:OJ(Oc,Oc)}){}let Ie=OS(Of(E7,E8));class It extends Ek("PollUploadResponse")({status:Oc,fileData:OU(Oq({fileKey:Og(Oc),fileName:Oc,fileSize:Ou,fileType:Oc,metadata:Og(Oc),customId:Og(Oc),callbackUrl:OU(Oc),callbackSlug:OU(Oc)}))}){}class Is extends Ek("FailureCallbackResponse")({success:Op,message:OU(Oc)}){}class In extends Ek("ServerCallbackPostResponse")({status:Oc}){}class Ii extends Ek("UploadActionPayload")({files:OS(E3),input:Or}){}class Ir extends Ek("FailureActionPayload")({fileKey:Oc,uploadId:Og(Oc),storageProviderError:OU(Oc),fileName:Oc}){}class Ia extends Ek("MultipartCompleteActionPayload")({fileKey:Oc,uploadId:Oc,etags:OS(Oq({tag:Oc,partNumber:Ou}))}){}let Io=e=>!!(e.ok&&!(e.status>=400)&&e.headers.has("x-uploadthing-version")),Il=(e,t)=>SK(function*(){let s=yield*nA(nv(`/v6/pollUpload/${e.key}`)).pipe(ur(nF),ur(k2(It)),ur(e=>"done"===e.status&&e.fileData?uO(e.fileData):c8(new nm)),wx({while:e=>e instanceof nm,schedule:E$(10,4).pipe(wr(EP(1e3)),_3(wS),wc(dZ(dR(1))))}),bB("RetryError",()=>new nN({code:"UPLOAD_FAILED",message:"File took too long to upload"}))),n=s.callbackUrl+`?slug=${s.callbackSlug}`;n.startsWith("http")||(n="http://"+n),yield*bG("SIMULATING FILE UPLOAD WEBHOOK CALLBACK",n);let i=JSON.stringify({status:"uploaded",metadata:JSON.parse(s.metadata??"{}"),file:new E9({url:e.fileUrl,appUrl:e.appUrl,key:e.key,name:s.fileName,size:s.fileSize,customId:s.customId,type:s.fileType})}),r=yield*b3({try:()=>nL(i,t),catch:e=>new nN({code:"INTERNAL_SERVER_ERROR",message:"Failed to sign payload",cause:e})});return Io((yield*nA(n,{method:"POST",body:i,headers:{"Content-Type":"application/json","uploadthing-hook":"callback","x-uploadthing-signature":r}}).pipe(bB("FetchError",()=>uO(new Response(null,{status:500}))))))?yield*bG("Successfully simulated callback for file",e.key):yield*bH(`
Failed to simulate callback for file '${s.fileKey}'. Is your webhook configured correctly?
  - Make sure the URL '${n}' is accessible without any authentication. You can verify this by running 'curl -X POST ${n}' in your terminal
  - Still facing issues? Read https://docs.uploadthing.com/faq for common issues
`.trim()),s}),Ic=(e,t)=>{switch(t){case"error":case"fatal":return`\x1b[41m\x1b[30m${e}\x1b[0m`;case"warn":return`\x1b[43m\x1b[30m${e}\x1b[0m`;case"info":case"log":return`\x1b[44m\x1b[30m${e}\x1b[0m`;case"debug":case"trace":return`\x1b[47m\x1b[30m${e}\x1b[0m`;case"success":return`\x1b[42m\x1b[30m${e}\x1b[0m`;default:return e}},Iu={fatal:"⨯",error:"⨯",warn:"⚠️",info:"ℹ",log:"ℹ",debug:"⚙",trace:"→",success:"✓"},Ip=function(e={}){return new EK(e)}({reporters:[{log:e=>{let{type:t,tag:s,date:n,args:i}=e,r=Iu[t],a=Ic(` ${r} ${s} ${n.toLocaleTimeString()} `,t);console.log(i.map(e=>nO(e)&&"string"==typeof e.stack?e.message+"\n"+function(e){let t="cwd"in sW&&"function"==typeof sW.cwd?sW.cwd():"__UnknownCWD__";return"  "+e.split("\n").splice(1).map(e=>e.trim().replace("file://","").replace(t+"/","")).join("\n  ")}(e.stack):e).map(e=>"string"==typeof e?e:JSON.stringify(e,null,4)).join(" ").split("\n").map(e=>a+" "+e).join("\n"))}}],defaults:{tag:"UPLOADTHING"}}),Id={All:"verbose",Fatal:"error",Error:"error",Info:"info",Debug:"debug",Trace:"trace",Warning:"warn",None:"silent"},Im=(e="info")=>(Ip.level=EU[e],EV({silent:uG,error:gQ,warn:gX,info:uJ,debug:uV,trace:g0,verbose:uK}[e])),Ih=EH(vz,xk(({logLevel:e,message:t})=>{Ip[Id[e._tag]](t)})),If=(e,t)=>nA(nv("/v6/completeMultipart"),{method:"POST",body:JSON.stringify({fileKey:e.key,uploadId:e.uploadId,etags:t}),headers:{"Content-Type":"application/json"}}).pipe(ur(nF),ur(k2(Oq({success:Op,message:OU(Oc)}))),SJ("completeMultipartUpload",{attributes:{etags:t,presigned:e}})),Ig=e=>nA(nv("/v6/failureCallback"),{method:"POST",body:JSON.stringify({fileKey:e.key,uploadId:e.uploadId}),headers:{"Content-Type":"application/json"}}).pipe(ur(nF),ur(k2(Is)),SJ("abortMultipartUpload",{attributes:{presigned:e}})),Ib=e=>e||(sW.env.UPLOADTHING_SECRET?sW.env.UPLOADTHING_SECRET:void 0);class Ix extends dl{constructor(e,t,s){super({reason:`You uploaded a ${e} file that was ${nS(s)}, but the limit for that type is ${t}`}),this._tag="FileSizeMismatch",this.name="FileSizeMismatchError"}}class Iy extends dl{constructor(e,t,s,n){super({reason:`You uploaded ${n} file(s) of type '${e}', but the ${t} for that type is ${s}`}),this._tag="FileCountMismatch",this.name="FileCountMismatchError"}}let Iv=(e,t)=>SK(function*(){let s={};for(let n of e){let e=yield*ny(n.name,nk(t));s[e]=(s[e]??0)+1;let i=t[e]?.maxFileSize;if(!i)return yield*new nl(e,"maxFileSize");let r=yield*nw(i);if(n.size>r)return yield*new Ix(e,i,n.size)}for(let e in s){let n=t[e];if(!n)return yield*new nl(e);let i=s[e],r=n.minFileCount,a=n.maxFileCount;if(r>a)return yield*new nN({code:"BAD_REQUEST",message:"Invalid config during file count - minFileCount > maxFileCount",cause:`minFileCount must be less than maxFileCount for key ${e}. got: ${r} > ${a}`});if(i<r)return yield*new Iy(e,"minimum",r,i);if(i>a)return yield*new Iy(e,"maximum",a,i)}return null});class I_ extends ty("uploadthing/RequestInput")(){}let Iw=(e,t,s)=>SK(function*(){let n=yield*cq(e.req)?e.req:uO(e.req),i=new URL(n.url),r=n.headers,a=i.searchParams,o=a.get("actionType"),l=a.get("slug"),c=r.get("uploadthing-hook"),u=r.get("x-uploadthing-package")??"unknown",p=r.get("x-uploadthing-version"),d=Ib(t.config?.uploadthingSecret);if(null!=p&&p!==E2)return yield*bH(`Client version mismatch. Server version: ${E2}, Client version: ${p}`),yield*new nN({code:"BAD_REQUEST",message:"Client version mismatch",cause:`Server version: ${E2}, Client version: ${p}`});if(!l)return yield*bH("No slug provided in params:",a),yield*new nN({code:"BAD_REQUEST",message:"No slug provided in params"});if(l&&"string"!=typeof l){let e=`Expected slug to be of type 'string', got '${typeof l}'`;return yield*bH(e),yield*new nN({code:"BAD_REQUEST",message:"`slug` must be a string",cause:e})}if(!d){let e="No secret provided, please set UPLOADTHING_SECRET in your env file or in the config";return yield*bH(e),yield*new nN({code:"MISSING_ENV",message:"No secret provided",cause:e})}if(!d.startsWith("sk_")){let e="Invalid secret provided, UPLOADTHING_SECRET must start with 'sk_'";return yield*bH(e),yield*new nN({code:"MISSING_ENV",message:"Invalid API key. API keys must start with 'sk_'.",cause:e})}if(u&&"string"!=typeof u){let e=`Expected x-uploadthing-package to be of type 'string', got '${typeof u}'`;return yield*bH(e),yield*new nN({code:"BAD_REQUEST",message:"`x-uploadthing-package` must be a string. eg. '@uploadthing/react'",cause:e})}let m=t.router[l];if(!m){let e=`No file route found for slug ${l}`;return yield*bH(e),yield*new nN({code:"NOT_FOUND",message:e})}if(o&&!EX(o)){let e=`Expected ${EQ.map(e=>`"${e}"`).join(", ").replace(/,(?!.*,)/," or")} but got "${o}"`;return yield*bH("Invalid action type",e),yield*new nN({code:"BAD_REQUEST",cause:`Invalid action type ${o}`,message:e})}if(c&&!E1(c)){let e=`Expected ${E0.map(e=>`"${e}"`).join(", ").replace(/,(?!.*,)/," or")} but got "${c}"`;return yield*bH("Invalid uploadthing hook",e),yield*new nN({code:"BAD_REQUEST",cause:`Invalid uploadthing hook ${c}`,message:e})}if(!o&&!c||o&&c){let e="Exactly one of 'actionType' or 'uploadthing-hook' must be provided";return yield*bH(e),yield*new nN({code:"BAD_REQUEST",message:e})}yield*bV("✔︎ All request input is valid");let h=yield*nR;h.baseHeaders["x-uploadthing-api-key"]=d,h.baseHeaders["x-uploadthing-fe-package"]=u,h.baseHeaders["x-uploadthing-be-adapter"]=s;let{isDev:f=sq}=t.config??{};f&&(yield*bG("UploadThing dev server is now running!"));let g={req:n,config:t.config??{},middlewareArgs:e.middlewareArgs,isDev:f,apiKey:d,slug:l,uploadable:m,hook:null,action:null};return o?{...g,action:o}:{...g,hook:c}}),IS=SK(function*(){let{config:e,req:t,isDev:s}=yield*I_,n=new URL(t.url);if(e?.callbackUrl?n=yield*nT(e.callbackUrl):sW.env.UPLOADTHING_URL&&(n=yield*nT(sW.env.UPLOADTHING_URL)),s||!n.host.includes("localhost"))return n;let i=t.headers.get("origin")??t.headers.get("referer")??t.headers.get("host")??t.headers.get("x-forwarded-host");return(i&&!i.includes("http")&&(i=(t.headers.get("x-forwarded-proto")??"https")+"://"+i),!i||i.includes("localhost"))?(bW("You are using a localhost callback url in production which is not supported.","Read more and learn how to fix it here: https://docs.uploadthing.com/faq#my-callback-runs-in-development-but-not-in-production"),n):yield*nT(i)}),Ik=(e,t,s)=>e(t).pipe(Im(s?.logLevel),Sp(Ih),b0(nR,{fetch:s?.fetch??globalThis.fetch,baseHeaders:{"x-uploadthing-version":E2,"x-uploadthing-api-key":void 0,"x-uploadthing-be-adapter":void 0,"x-uploadthing-fe-package":void 0}}),IO,wY),IO=e=>cX(e,e=>uO({success:!1,error:e})),IT=I_.pipe(ur(({action:e,hook:t})=>{if("callback"===t)return II;switch(e){case"upload":return IR;case"multipart-complete":return IA;case"failure":return IF}}),ug(e=>({success:!0,...e}))),IE=(e,t)=>s=>IT.pipe(b1(I_,Iw(s,e,t)),bZ({InvalidJson:e=>new nN({code:"INTERNAL_SERVER_ERROR",message:"An error occured while parsing input/output",cause:e}),BadRequestError:e=>new nN({code:"INTERNAL_SERVER_ERROR",message:e.getMessage(),cause:e,data:e.json}),FetchError:e=>new nN({code:"INTERNAL_SERVER_ERROR",message:"string"==typeof e.error?e.error:e.message,cause:e,data:e.error}),ParseError:e=>new nN({code:"INTERNAL_SERVER_ERROR",message:"An error occured while parsing input/output",cause:e})}),b5(e=>bH(e.message))),II=SK(function*(){let{req:e,uploadable:t,apiKey:s}=yield*I_,n=yield*b3({try:async()=>n$(await e.clone().text(),e.headers.get("x-uploadthing-signature"),s),catch:()=>new nN({code:"BAD_REQUEST",message:"Invalid signature"})});if(yield*bV("Signature verified:",n),!n)return yield*bH("Invalid signature"),yield*new nN({code:"BAD_REQUEST",message:"Invalid signature"});let i=yield*ui(nj(e),k2(Oq({status:Oc,file:E9,metadata:OJ(Oc,Or)})));yield*bV("Handling callback request with input:",i);let r=yield*b3({try:async()=>t.resolver({file:i.file,metadata:i.metadata}),catch:e=>new nN({code:"INTERNAL_SERVER_ERROR",message:"Failed to run onUploadComplete",cause:e})}).pipe(b5(e=>bH("Failed to run onUploadComplete. You probably shouldn't be throwing errors here.",e))),a={fileKey:i.file.key,callbackData:r??null};return yield*bV("'onUploadComplete' callback finished. Sending response to UploadThing:",a),yield*nA(nv("/v6/serverCallback"),{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).pipe(ur(nF),ur(k2(In))),{body:null}}),IN=e=>SK(function*(){let{uploadable:t,middlewareArgs:s}=yield*I_,{files:n,input:i}=e;yield*bV("Running middleware");let r=yield*b3({try:async()=>t._def.middleware({...s,input:i,files:n}),catch:e=>e instanceof nN?e:new nN({code:"INTERNAL_SERVER_ERROR",message:"Failed to run middleware",cause:e})}).pipe(b5(e=>bH("An error occured in your middleware function",e)));if(r[EY]&&r[EY].length!==n.length){let e=`Expected files override to have the same length as original files, got ${r[EY].length} but expected ${n.length}`;return yield*bH(e),yield*new nN({code:"BAD_REQUEST",message:"Files override must have the same length as files",cause:e})}let a=yield*vH(n,(e,t)=>SK(function*(){let s=r[EY]?.[t];return s&&s.size!==e.size&&(yield*bW("File size mismatch. Reverting to original size")),{name:s?.name??e.name,size:e.size,customId:s?.customId}}));return{metadata:r,filesWithCustomIds:a}}),IR=SK(function*(){let e;let t=yield*I_,{files:s,input:n}=yield*ui(nj(t.req),k2(Ii));yield*bV("Handling upload request with input:",{files:s,input:n}),yield*bV("Parsing user input");let i=t.uploadable._def.inputParser,r=yield*b3({try:async()=>(function(e){if("function"==typeof e.parse)return e.parse;throw Error("Invalid parser")})(i)(n),catch:e=>new nN({code:"BAD_REQUEST",message:"Invalid input",cause:e})}).pipe(b5(e=>bH("An error occured trying to parse input",e)));yield*bV("Input parsed successfully",r);let{metadata:a,filesWithCustomIds:o}=yield*IN({input:r,files:s});yield*bV("Parsing route config",t.uploadable._def.routerConfig);let l=yield*nx(t.uploadable._def.routerConfig).pipe(bB("InvalidRouteConfig",e=>new nN({code:"BAD_REQUEST",message:"Invalid config",cause:e})));yield*bV("Route config parsed successfully",l),yield*bV("Validating files meet the config requirements",s),yield*Iv(s,l).pipe(ux(e=>new nN({code:"BAD_REQUEST",message:`Invalid config: ${e._tag}`,cause:"reason"in e?e.reason:e.message})));let c=yield*IS.pipe(b5(e=>bH("Failed to resolve callback URL",e)),bB("InvalidURL",e=>new nN({code:"INTERNAL_SERVER_ERROR",message:e.message})));yield*bV("Retrieving presigned URLs from UploadThing. Callback URL is:",c.href);let u=yield*nA(nv("/v6/prepareUpload"),{method:"POST",body:JSON.stringify({files:o,routeConfig:l,metadata:a,callbackUrl:c.origin+c.pathname,callbackSlug:t.slug}),headers:{"Content-Type":"application/json"}}).pipe(ur(nF),ur(k2(Ie)));if(yield*bV("UploadThing responded with:",u),yield*bV("Sending presigned URLs to client"),t.isDev){let s=yield*nR;e=vH(u,e=>Il(e,t.apiKey).pipe(c9),{concurrency:10}).pipe(Sp(Ih),b0(nR,s),wY)}return{body:u,cleanup:e}}),IA=SK(function*(){let e=yield*I_,t=yield*ui(nj(e.req),k2(Ia));yield*bV("Handling multipart-complete request with input:",t),yield*bV("Notifying UploadThing that multipart upload is complete");let s=yield*If({key:t.fileKey,uploadId:t.uploadId},t.etags);return yield*bV("UploadThing responded with:",s),{body:null}}),IF=SK(function*(){let{req:e,uploadable:t}=yield*I_,{fileKey:s,uploadId:n}=yield*ui(nj(e),k2(Ir));yield*bV("Handling failure request with input:",{fileKey:s,uploadId:n}),yield*bV("Notifying UploadThing that upload failed");let i=yield*Ig({key:s,uploadId:n});return yield*bV("UploadThing responded with:",i),yield*bV("Running 'onUploadError' callback"),yield*bz({try:()=>{t._def.onUploadError({error:new nN({code:"UPLOAD_FAILED",message:`Upload failed for ${s}`}),fileKey:s})},catch:e=>new nN({code:"INTERNAL_SERVER_ERROR",message:"Failed to run onUploadError",cause:e})}).pipe(b5(e=>bH("Failed to run onUploadError. You probably shouldn't be throwing errors here.",e))),{body:null}}),Ij=e=>()=>nk(e.router).map(t=>{let s=wQ(nx(e.router[t]._def.routerConfig));return{slug:t,config:s}}),IC=(e,t)=>{!function(){let e,t;if(void 0===sW)return;let s=sW.versions?.node?.split(".");s&&([e,t]=s.map(e=>parseInt(e,10)));let n=sW.env?.NODE;if(!e&&n){let s=/v(\d+)\.(\d+)\.(\d+)/.exec(n)?.[0];s&&([e,t]=s.substring(1).split(".").map(e=>parseInt(e,10)))}e&&t&&!(e>18)&&(18===e&&t>=13||(wQ(bH(`YOU ARE USING A LEGACY (${e}.${t}) NODE VERSION WHICH ISN'T OFFICIALLY SUPPORTED. PLEASE UPGRADE TO NODE ^18.13.`)),sW.exit?.(1)))}();let s=IE(e,t),n=Ij(e);return{GET:e=>Response.json(n(),{headers:{"x-uploadthing-version":E2}}),POST:async t=>{let n=t instanceof Request?t:t.request,i=await Ik(s,{req:n,middlewareArgs:{req:n,event:void 0,res:void 0}},e.config);if(!1===i.success)return Response.json(function(e,t){return(t[Object.keys(t)[0]]?._def.errorFormatter??function(e){return{message:e.message}})(e)}(i.error,e.router),{status:nI[i.error.code]??500,headers:{"x-uploadthing-version":E2}});let r=Response.json(i.body,{headers:{"x-uploadthing-version":E2}});return r.cleanup=i.cleanup,r}}};function IM(e){return{message:e.message}}(function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let s of e)t[s]=s;return t},e.getValidEnumValues=t=>{let s=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(let e of s)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.push(s);return t},e.find=(e,t)=>{for(let s of e)if(t(s))return s},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t})(h||(h={})),(f||(f={})).mergeShapes=(e,t)=>({...e,...t});let IL=h.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),I$=e=>{switch(typeof e){case"undefined":return IL.undefined;case"string":return IL.string;case"number":return isNaN(e)?IL.nan:IL.number;case"boolean":return IL.boolean;case"function":return IL.function;case"bigint":return IL.bigint;case"symbol":return IL.symbol;case"object":if(Array.isArray(e))return IL.array;if(null===e)return IL.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return IL.promise;if("undefined"!=typeof Map&&e instanceof Map)return IL.map;if("undefined"!=typeof Set&&e instanceof Set)return IL.set;if("undefined"!=typeof Date&&e instanceof Date)return IL.date;return IL.object;default:return IL.unknown}},IP=h.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class IU extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},s={_errors:[]},n=e=>{for(let i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)s._errors.push(t(i));else{let e=s,n=0;for(;n<i.path.length;){let s=i.path[n];n===i.path.length-1?(e[s]=e[s]||{_errors:[]},e[s]._errors.push(t(i))):e[s]=e[s]||{_errors:[]},e=e[s],n++}}};return n(this),s}static assert(e){if(!(e instanceof IU))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,h.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},s=[];for(let n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}IU.create=e=>new IU(e);let ID=(e,t)=>{let s;switch(e.code){case IP.invalid_type:s=e.received===IL.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case IP.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(e.expected,h.jsonStringifyReplacer)}`;break;case IP.unrecognized_keys:s=`Unrecognized key(s) in object: ${h.joinValues(e.keys,", ")}`;break;case IP.invalid_union:s="Invalid input";break;case IP.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${h.joinValues(e.options)}`;break;case IP.invalid_enum_value:s=`Invalid enum value. Expected ${h.joinValues(e.options)}, received '${e.received}'`;break;case IP.invalid_arguments:s="Invalid function arguments";break;case IP.invalid_return_type:s="Invalid function return type";break;case IP.invalid_date:s="Invalid date";break;case IP.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(s=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(s=`${s} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?s=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?s=`Invalid input: must end with "${e.validation.endsWith}"`:h.assertNever(e.validation):s="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case IP.too_small:s="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case IP.too_big:s="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case IP.custom:s="Invalid input";break;case IP.invalid_intersection_types:s="Intersection results could not be merged";break;case IP.not_multiple_of:s=`Number must be a multiple of ${e.multipleOf}`;break;case IP.not_finite:s="Number must be finite";break;default:s=t.defaultError,h.assertNever(e)}return{message:s}},Iz=ID;function IB(){return Iz}let IZ=e=>{let{data:t,path:s,errorMaps:n,issueData:i}=e,r=[...s,...i.path||[]],a={...i,path:r};if(void 0!==i.message)return{...i,path:r,message:i.message};let o="";for(let e of n.filter(e=>!!e).slice().reverse())o=e(a,{data:t,defaultError:o}).message;return{...i,path:r,message:o}};function Iq(e,t){let s=IB(),n=IZ({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,s,s===ID?void 0:ID].filter(e=>!!e)});e.common.issues.push(n)}class IK{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let s=[];for(let n of t){if("aborted"===n.status)return IJ;"dirty"===n.status&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){let s=[];for(let e of t){let t=await e.key,n=await e.value;s.push({key:t,value:n})}return IK.mergeObjectSync(e,s)}static mergeObjectSync(e,t){let s={};for(let n of t){let{key:t,value:i}=n;if("aborted"===t.status||"aborted"===i.status)return IJ;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==i.value||n.alwaysSet)&&(s[t.value]=i.value)}return{status:e.value,value:s}}}let IJ=Object.freeze({status:"aborted"}),IV=e=>({status:"dirty",value:e}),IG=e=>({status:"valid",value:e}),IW=e=>"aborted"===e.status,IH=e=>"dirty"===e.status,IY=e=>"valid"===e.status,IQ=e=>"undefined"!=typeof Promise&&e instanceof Promise;function IX(e,t,s,n){if("a"===s&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)}function I0(e,t,s,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,s):i?i.value=s:t.set(e,s),s}"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(g||(g={}));class I1{constructor(e,t,s,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let I2=(e,t)=>{if(IY(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new IU(e.common.issues);return this._error=t,this._error}}};function I5(e){if(!e)return{};let{errorMap:t,invalid_type_error:s,required_error:n,description:i}=e;if(t&&(s||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{var r,a;let{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:i.defaultError}:void 0===i.data?{message:null!==(r=null!=o?o:n)&&void 0!==r?r:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!==(a=null!=o?o:s)&&void 0!==a?a:i.defaultError}},description:i}}class I3{get description(){return this._def.description}_getType(e){return I$(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:I$(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new IK,ctx:{common:e.parent.common,data:e.data,parsedType:I$(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(IQ(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){var s;let n={common:{issues:[],async:null!==(s=null==t?void 0:t.async)&&void 0!==s&&s,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:I$(e)},i=this._parseSync({data:e,path:n.path,parent:n});return I2(n,i)}"~validate"(e){var t,s;let n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:I$(e)};if(!this["~standard"].async)try{let t=this._parseSync({data:e,path:[],parent:n});return IY(t)?{value:t.value}:{issues:n.common.issues}}catch(e){(null===(s=null===(t=null==e?void 0:e.message)||void 0===t?void 0:t.toLowerCase())||void 0===s?void 0:s.includes("encountered"))&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(e=>IY(e)?{value:e.value}:{issues:n.common.issues})}async parseAsync(e,t){let s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){let s={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:I$(e)},n=this._parse({data:e,path:s.path,parent:s});return I2(s,await (IQ(n)?n:Promise.resolve(n)))}refine(e,t){let s=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let i=e(t),r=()=>n.addIssue({code:IP.custom,...s(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(r(),!1)):!!i||(r(),!1)})}refinement(e,t){return this._refinement((s,n)=>!!e(s)||(n.addIssue("function"==typeof t?t(s,n):t),!1))}_refinement(e){return new NB({schema:this,typeName:y.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return NZ.create(this,this._def)}nullable(){return Nq.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return NO.create(this)}promise(){return Nz.create(this,this._def)}or(e){return NE.create([this,e],this._def)}and(e){return NR.create(this,e,this._def)}transform(e){return new NB({...I5(this._def),schema:this,typeName:y.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new NK({...I5(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:y.ZodDefault})}brand(){return new NW({typeName:y.ZodBranded,type:this,...I5(this._def)})}catch(e){return new NJ({...I5(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:y.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return NH.create(this,e)}readonly(){return NY.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let I4=/^c[^\s-]{8,}$/i,I9=/^[0-9a-z]+$/,I6=/^[0-9A-HJKMNP-TV-Z]{26}$/i,I8=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,I7=/^[a-z0-9_-]{21}$/i,Ne=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Nt=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ns=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Nn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ni=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Nr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Na=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,No=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Nl=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Nc="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Nu=RegExp(`^${Nc}$`);function Np(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function Nd(e){let t=`${Nc}T${Np(e)}`,s=[];return s.push(e.local?"Z?":"Z"),e.offset&&s.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${s.join("|")})`,RegExp(`^${t}$`)}class Nm extends I3{_parse(e){var t,s,i,r;let a;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==IL.string){let t=this._getOrReturnCtx(e);return Iq(t,{code:IP.invalid_type,expected:IL.string,received:t.parsedType}),IJ}let o=new IK;for(let l of this._def.checks)if("min"===l.kind)e.data.length<l.value&&(Iq(a=this._getOrReturnCtx(e,a),{code:IP.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if("max"===l.kind)e.data.length>l.value&&(Iq(a=this._getOrReturnCtx(e,a),{code:IP.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if("length"===l.kind){let t=e.data.length>l.value,s=e.data.length<l.value;(t||s)&&(a=this._getOrReturnCtx(e,a),t?Iq(a,{code:IP.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):s&&Iq(a,{code:IP.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),o.dirty())}else if("email"===l.kind)Ns.test(e.data)||(Iq(a=this._getOrReturnCtx(e,a),{validation:"email",code:IP.invalid_string,message:l.message}),o.dirty());else if("emoji"===l.kind)n||(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n.test(e.data)||(Iq(a=this._getOrReturnCtx(e,a),{validation:"emoji",code:IP.invalid_string,message:l.message}),o.dirty());else if("uuid"===l.kind)I8.test(e.data)||(Iq(a=this._getOrReturnCtx(e,a),{validation:"uuid",code:IP.invalid_string,message:l.message}),o.dirty());else if("nanoid"===l.kind)I7.test(e.data)||(Iq(a=this._getOrReturnCtx(e,a),{validation:"nanoid",code:IP.invalid_string,message:l.message}),o.dirty());else if("cuid"===l.kind)I4.test(e.data)||(Iq(a=this._getOrReturnCtx(e,a),{validation:"cuid",code:IP.invalid_string,message:l.message}),o.dirty());else if("cuid2"===l.kind)I9.test(e.data)||(Iq(a=this._getOrReturnCtx(e,a),{validation:"cuid2",code:IP.invalid_string,message:l.message}),o.dirty());else if("ulid"===l.kind)I6.test(e.data)||(Iq(a=this._getOrReturnCtx(e,a),{validation:"ulid",code:IP.invalid_string,message:l.message}),o.dirty());else if("url"===l.kind)try{new URL(e.data)}catch(t){Iq(a=this._getOrReturnCtx(e,a),{validation:"url",code:IP.invalid_string,message:l.message}),o.dirty()}else"regex"===l.kind?(l.regex.lastIndex=0,l.regex.test(e.data)||(Iq(a=this._getOrReturnCtx(e,a),{validation:"regex",code:IP.invalid_string,message:l.message}),o.dirty())):"trim"===l.kind?e.data=e.data.trim():"includes"===l.kind?e.data.includes(l.value,l.position)||(Iq(a=this._getOrReturnCtx(e,a),{code:IP.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),o.dirty()):"toLowerCase"===l.kind?e.data=e.data.toLowerCase():"toUpperCase"===l.kind?e.data=e.data.toUpperCase():"startsWith"===l.kind?e.data.startsWith(l.value)||(Iq(a=this._getOrReturnCtx(e,a),{code:IP.invalid_string,validation:{startsWith:l.value},message:l.message}),o.dirty()):"endsWith"===l.kind?e.data.endsWith(l.value)||(Iq(a=this._getOrReturnCtx(e,a),{code:IP.invalid_string,validation:{endsWith:l.value},message:l.message}),o.dirty()):"datetime"===l.kind?Nd(l).test(e.data)||(Iq(a=this._getOrReturnCtx(e,a),{code:IP.invalid_string,validation:"datetime",message:l.message}),o.dirty()):"date"===l.kind?Nu.test(e.data)||(Iq(a=this._getOrReturnCtx(e,a),{code:IP.invalid_string,validation:"date",message:l.message}),o.dirty()):"time"===l.kind?RegExp(`^${Np(l)}$`).test(e.data)||(Iq(a=this._getOrReturnCtx(e,a),{code:IP.invalid_string,validation:"time",message:l.message}),o.dirty()):"duration"===l.kind?Nt.test(e.data)||(Iq(a=this._getOrReturnCtx(e,a),{validation:"duration",code:IP.invalid_string,message:l.message}),o.dirty()):"ip"===l.kind?(t=e.data,("v4"===(s=l.version)||!s)&&Nn.test(t)||("v6"===s||!s)&&Nr.test(t)||(Iq(a=this._getOrReturnCtx(e,a),{validation:"ip",code:IP.invalid_string,message:l.message}),o.dirty())):"jwt"===l.kind?!function(e,t){if(!Ne.test(e))return!1;try{let[s]=e.split("."),n=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),i=JSON.parse(atob(n));if("object"!=typeof i||null===i||!i.typ||!i.alg||t&&i.alg!==t)return!1;return!0}catch(e){return!1}}(e.data,l.alg)&&(Iq(a=this._getOrReturnCtx(e,a),{validation:"jwt",code:IP.invalid_string,message:l.message}),o.dirty()):"cidr"===l.kind?(i=e.data,("v4"===(r=l.version)||!r)&&Ni.test(i)||("v6"===r||!r)&&Na.test(i)||(Iq(a=this._getOrReturnCtx(e,a),{validation:"cidr",code:IP.invalid_string,message:l.message}),o.dirty())):"base64"===l.kind?No.test(e.data)||(Iq(a=this._getOrReturnCtx(e,a),{validation:"base64",code:IP.invalid_string,message:l.message}),o.dirty()):"base64url"===l.kind?Nl.test(e.data)||(Iq(a=this._getOrReturnCtx(e,a),{validation:"base64url",code:IP.invalid_string,message:l.message}),o.dirty()):h.assertNever(l);return{status:o.value,value:e.data}}_regex(e,t,s){return this.refinement(t=>e.test(t),{validation:t,code:IP.invalid_string,...g.errToObj(s)})}_addCheck(e){return new Nm({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...g.errToObj(e)})}url(e){return this._addCheck({kind:"url",...g.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...g.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...g.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...g.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...g.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...g.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...g.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...g.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...g.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...g.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...g.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...g.errToObj(e)})}datetime(e){var t,s;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(s=null==e?void 0:e.local)&&void 0!==s&&s,...g.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...g.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...g.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...g.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...g.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...g.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...g.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...g.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...g.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...g.errToObj(t)})}nonempty(e){return this.min(1,g.errToObj(e))}trim(){return new Nm({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Nm({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Nm({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Nm.create=e=>{var t;return new Nm({checks:[],typeName:y.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...I5(e)})};class Nh extends I3{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==IL.number){let t=this._getOrReturnCtx(e);return Iq(t,{code:IP.invalid_type,expected:IL.number,received:t.parsedType}),IJ}let s=new IK;for(let n of this._def.checks)"int"===n.kind?h.isInteger(e.data)||(Iq(t=this._getOrReturnCtx(e,t),{code:IP.invalid_type,expected:"integer",received:"float",message:n.message}),s.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(Iq(t=this._getOrReturnCtx(e,t),{code:IP.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(Iq(t=this._getOrReturnCtx(e,t),{code:IP.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty()):"multipleOf"===n.kind?0!==function(e,t){let s=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=s>n?s:n;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}(e.data,n.value)&&(Iq(t=this._getOrReturnCtx(e,t),{code:IP.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(Iq(t=this._getOrReturnCtx(e,t),{code:IP.not_finite,message:n.message}),s.dirty()):h.assertNever(n);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,g.toString(t))}gt(e,t){return this.setLimit("min",e,!1,g.toString(t))}lte(e,t){return this.setLimit("max",e,!0,g.toString(t))}lt(e,t){return this.setLimit("max",e,!1,g.toString(t))}setLimit(e,t,s,n){return new Nh({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:g.toString(n)}]})}_addCheck(e){return new Nh({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:g.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:g.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:g.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:g.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:g.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:g.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:g.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:g.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:g.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&h.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let s of this._def.checks){if("finite"===s.kind||"int"===s.kind||"multipleOf"===s.kind)return!0;"min"===s.kind?(null===t||s.value>t)&&(t=s.value):"max"===s.kind&&(null===e||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Nh.create=e=>new Nh({checks:[],typeName:y.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...I5(e)});class Nf extends I3{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==IL.bigint)return this._getInvalidInput(e);let s=new IK;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(Iq(t=this._getOrReturnCtx(e,t),{code:IP.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(Iq(t=this._getOrReturnCtx(e,t),{code:IP.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(Iq(t=this._getOrReturnCtx(e,t),{code:IP.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):h.assertNever(n);return{status:s.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return Iq(t,{code:IP.invalid_type,expected:IL.bigint,received:t.parsedType}),IJ}gte(e,t){return this.setLimit("min",e,!0,g.toString(t))}gt(e,t){return this.setLimit("min",e,!1,g.toString(t))}lte(e,t){return this.setLimit("max",e,!0,g.toString(t))}lt(e,t){return this.setLimit("max",e,!1,g.toString(t))}setLimit(e,t,s,n){return new Nf({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:g.toString(n)}]})}_addCheck(e){return new Nf({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:g.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:g.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:g.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:g.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:g.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Nf.create=e=>{var t;return new Nf({checks:[],typeName:y.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...I5(e)})};class Ng extends I3{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==IL.boolean){let t=this._getOrReturnCtx(e);return Iq(t,{code:IP.invalid_type,expected:IL.boolean,received:t.parsedType}),IJ}return IG(e.data)}}Ng.create=e=>new Ng({typeName:y.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...I5(e)});class Nb extends I3{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==IL.date){let t=this._getOrReturnCtx(e);return Iq(t,{code:IP.invalid_type,expected:IL.date,received:t.parsedType}),IJ}if(isNaN(e.data.getTime()))return Iq(this._getOrReturnCtx(e),{code:IP.invalid_date}),IJ;let s=new IK;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(Iq(t=this._getOrReturnCtx(e,t),{code:IP.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),s.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(Iq(t=this._getOrReturnCtx(e,t),{code:IP.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),s.dirty()):h.assertNever(n);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Nb({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:g.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:g.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Nb.create=e=>new Nb({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:y.ZodDate,...I5(e)});class Nx extends I3{_parse(e){if(this._getType(e)!==IL.symbol){let t=this._getOrReturnCtx(e);return Iq(t,{code:IP.invalid_type,expected:IL.symbol,received:t.parsedType}),IJ}return IG(e.data)}}Nx.create=e=>new Nx({typeName:y.ZodSymbol,...I5(e)});class Ny extends I3{_parse(e){if(this._getType(e)!==IL.undefined){let t=this._getOrReturnCtx(e);return Iq(t,{code:IP.invalid_type,expected:IL.undefined,received:t.parsedType}),IJ}return IG(e.data)}}Ny.create=e=>new Ny({typeName:y.ZodUndefined,...I5(e)});class Nv extends I3{_parse(e){if(this._getType(e)!==IL.null){let t=this._getOrReturnCtx(e);return Iq(t,{code:IP.invalid_type,expected:IL.null,received:t.parsedType}),IJ}return IG(e.data)}}Nv.create=e=>new Nv({typeName:y.ZodNull,...I5(e)});class N_ extends I3{constructor(){super(...arguments),this._any=!0}_parse(e){return IG(e.data)}}N_.create=e=>new N_({typeName:y.ZodAny,...I5(e)});class Nw extends I3{constructor(){super(...arguments),this._unknown=!0}_parse(e){return IG(e.data)}}Nw.create=e=>new Nw({typeName:y.ZodUnknown,...I5(e)});class NS extends I3{_parse(e){let t=this._getOrReturnCtx(e);return Iq(t,{code:IP.invalid_type,expected:IL.never,received:t.parsedType}),IJ}}NS.create=e=>new NS({typeName:y.ZodNever,...I5(e)});class Nk extends I3{_parse(e){if(this._getType(e)!==IL.undefined){let t=this._getOrReturnCtx(e);return Iq(t,{code:IP.invalid_type,expected:IL.void,received:t.parsedType}),IJ}return IG(e.data)}}Nk.create=e=>new Nk({typeName:y.ZodVoid,...I5(e)});class NO extends I3{_parse(e){let{ctx:t,status:s}=this._processInputParams(e),n=this._def;if(t.parsedType!==IL.array)return Iq(t,{code:IP.invalid_type,expected:IL.array,received:t.parsedType}),IJ;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(Iq(t,{code:e?IP.too_big:IP.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(Iq(t,{code:IP.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(Iq(t,{code:IP.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((e,s)=>n.type._parseAsync(new I1(t,e,t.path,s)))).then(e=>IK.mergeArray(s,e));let i=[...t.data].map((e,s)=>n.type._parseSync(new I1(t,e,t.path,s)));return IK.mergeArray(s,i)}get element(){return this._def.type}min(e,t){return new NO({...this._def,minLength:{value:e,message:g.toString(t)}})}max(e,t){return new NO({...this._def,maxLength:{value:e,message:g.toString(t)}})}length(e,t){return new NO({...this._def,exactLength:{value:e,message:g.toString(t)}})}nonempty(e){return this.min(1,e)}}NO.create=(e,t)=>new NO({type:e,minLength:null,maxLength:null,exactLength:null,typeName:y.ZodArray,...I5(t)});class NT extends I3{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=h.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==IL.object){let t=this._getOrReturnCtx(e);return Iq(t,{code:IP.invalid_type,expected:IL.object,received:t.parsedType}),IJ}let{status:t,ctx:s}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),r=[];if(!(this._def.catchall instanceof NS&&"strip"===this._def.unknownKeys))for(let e in s.data)i.includes(e)||r.push(e);let a=[];for(let e of i){let t=n[e],i=s.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new I1(s,i,s.path,e)),alwaysSet:e in s.data})}if(this._def.catchall instanceof NS){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of r)a.push({key:{status:"valid",value:e},value:{status:"valid",value:s.data[e]}});else if("strict"===e)r.length>0&&(Iq(s,{code:IP.unrecognized_keys,keys:r}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of r){let n=s.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new I1(s,n,s.path,t)),alwaysSet:t in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of a){let s=await t.key,n=await t.value;e.push({key:s,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>IK.mergeObjectSync(t,e)):IK.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return g.errToObj,new NT({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,s)=>{var n,i,r,a;let o=null!==(r=null===(i=(n=this._def).errorMap)||void 0===i?void 0:i.call(n,t,s).message)&&void 0!==r?r:s.defaultError;return"unrecognized_keys"===t.code?{message:null!==(a=g.errToObj(e).message)&&void 0!==a?a:o}:{message:o}}}:{}})}strip(){return new NT({...this._def,unknownKeys:"strip"})}passthrough(){return new NT({...this._def,unknownKeys:"passthrough"})}extend(e){return new NT({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new NT({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:y.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new NT({...this._def,catchall:e})}pick(e){let t={};return h.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(t[s]=this.shape[s])}),new NT({...this._def,shape:()=>t})}omit(e){let t={};return h.objectKeys(this.shape).forEach(s=>{e[s]||(t[s]=this.shape[s])}),new NT({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof NT){let s={};for(let n in t.shape){let i=t.shape[n];s[n]=NZ.create(e(i))}return new NT({...t._def,shape:()=>s})}return t instanceof NO?new NO({...t._def,type:e(t.element)}):t instanceof NZ?NZ.create(e(t.unwrap())):t instanceof Nq?Nq.create(e(t.unwrap())):t instanceof NA?NA.create(t.items.map(t=>e(t))):t}(this)}partial(e){let t={};return h.objectKeys(this.shape).forEach(s=>{let n=this.shape[s];e&&!e[s]?t[s]=n:t[s]=n.optional()}),new NT({...this._def,shape:()=>t})}required(e){let t={};return h.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])t[s]=this.shape[s];else{let e=this.shape[s];for(;e instanceof NZ;)e=e._def.innerType;t[s]=e}}),new NT({...this._def,shape:()=>t})}keyof(){return NP(h.objectKeys(this.shape))}}NT.create=(e,t)=>new NT({shape:()=>e,unknownKeys:"strip",catchall:NS.create(),typeName:y.ZodObject,...I5(t)}),NT.strictCreate=(e,t)=>new NT({shape:()=>e,unknownKeys:"strict",catchall:NS.create(),typeName:y.ZodObject,...I5(t)}),NT.lazycreate=(e,t)=>new NT({shape:e,unknownKeys:"strip",catchall:NS.create(),typeName:y.ZodObject,...I5(t)});class NE extends I3{_parse(e){let{ctx:t}=this._processInputParams(e),s=this._def.options;if(t.common.async)return Promise.all(s.map(async e=>{let s={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:s}),ctx:s}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let s of e)if("dirty"===s.result.status)return t.common.issues.push(...s.ctx.common.issues),s.result;let s=e.map(e=>new IU(e.ctx.common.issues));return Iq(t,{code:IP.invalid_union,unionErrors:s}),IJ});{let e;let n=[];for(let i of s){let s={...t,common:{...t.common,issues:[]},parent:null},r=i._parseSync({data:t.data,path:t.path,parent:s});if("valid"===r.status)return r;"dirty"!==r.status||e||(e={result:r,ctx:s}),s.common.issues.length&&n.push(s.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let i=n.map(e=>new IU(e));return Iq(t,{code:IP.invalid_union,unionErrors:i}),IJ}}get options(){return this._def.options}}NE.create=(e,t)=>new NE({options:e,typeName:y.ZodUnion,...I5(t)});let NI=e=>{if(e instanceof NL)return NI(e.schema);if(e instanceof NB)return NI(e.innerType());if(e instanceof N$)return[e.value];if(e instanceof NU)return e.options;if(e instanceof ND)return h.objectValues(e.enum);if(e instanceof NK)return NI(e._def.innerType);if(e instanceof Ny)return[void 0];else if(e instanceof Nv)return[null];else if(e instanceof NZ)return[void 0,...NI(e.unwrap())];else if(e instanceof Nq)return[null,...NI(e.unwrap())];else if(e instanceof NW)return NI(e.unwrap());else if(e instanceof NY)return NI(e.unwrap());else if(e instanceof NJ)return NI(e._def.innerType);else return[]};class NN extends I3{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==IL.object)return Iq(t,{code:IP.invalid_type,expected:IL.object,received:t.parsedType}),IJ;let s=this.discriminator,n=t.data[s],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(Iq(t,{code:IP.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),IJ)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){let n=new Map;for(let s of t){let t=NI(s.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of t){if(n.has(i))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,s)}}return new NN({typeName:y.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...I5(s)})}}class NR extends I3{_parse(e){let{status:t,ctx:s}=this._processInputParams(e),n=(e,n)=>{if(IW(e)||IW(n))return IJ;let i=function e(t,s){let n=I$(t),i=I$(s);if(t===s)return{valid:!0,data:t};if(n===IL.object&&i===IL.object){let n=h.objectKeys(s),i=h.objectKeys(t).filter(e=>-1!==n.indexOf(e)),r={...t,...s};for(let n of i){let i=e(t[n],s[n]);if(!i.valid)return{valid:!1};r[n]=i.data}return{valid:!0,data:r}}if(n===IL.array&&i===IL.array){if(t.length!==s.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let r=e(t[i],s[i]);if(!r.valid)return{valid:!1};n.push(r.data)}return{valid:!0,data:n}}return n===IL.date&&i===IL.date&&+t==+s?{valid:!0,data:t}:{valid:!1}}(e.value,n.value);return i.valid?((IH(e)||IH(n))&&t.dirty(),{status:t.value,value:i.data}):(Iq(s,{code:IP.invalid_intersection_types}),IJ)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}NR.create=(e,t,s)=>new NR({left:e,right:t,typeName:y.ZodIntersection,...I5(s)});class NA extends I3{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==IL.array)return Iq(s,{code:IP.invalid_type,expected:IL.array,received:s.parsedType}),IJ;if(s.data.length<this._def.items.length)return Iq(s,{code:IP.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),IJ;!this._def.rest&&s.data.length>this._def.items.length&&(Iq(s,{code:IP.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...s.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new I1(s,e,s.path,t)):null}).filter(e=>!!e);return s.common.async?Promise.all(n).then(e=>IK.mergeArray(t,e)):IK.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new NA({...this._def,rest:e})}}NA.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new NA({items:e,typeName:y.ZodTuple,rest:null,...I5(t)})};class NF extends I3{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==IL.object)return Iq(s,{code:IP.invalid_type,expected:IL.object,received:s.parsedType}),IJ;let n=[],i=this._def.keyType,r=this._def.valueType;for(let e in s.data)n.push({key:i._parse(new I1(s,e,s.path,e)),value:r._parse(new I1(s,s.data[e],s.path,e)),alwaysSet:e in s.data});return s.common.async?IK.mergeObjectAsync(t,n):IK.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,s){return new NF(t instanceof I3?{keyType:e,valueType:t,typeName:y.ZodRecord,...I5(s)}:{keyType:Nm.create(),valueType:e,typeName:y.ZodRecord,...I5(t)})}}class Nj extends I3{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==IL.map)return Iq(s,{code:IP.invalid_type,expected:IL.map,received:s.parsedType}),IJ;let n=this._def.keyType,i=this._def.valueType,r=[...s.data.entries()].map(([e,t],r)=>({key:n._parse(new I1(s,e,s.path,[r,"key"])),value:i._parse(new I1(s,t,s.path,[r,"value"]))}));if(s.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let s of r){let n=await s.key,i=await s.value;if("aborted"===n.status||"aborted"===i.status)return IJ;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}})}{let e=new Map;for(let s of r){let n=s.key,i=s.value;if("aborted"===n.status||"aborted"===i.status)return IJ;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}Nj.create=(e,t,s)=>new Nj({valueType:t,keyType:e,typeName:y.ZodMap,...I5(s)});class NC extends I3{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==IL.set)return Iq(s,{code:IP.invalid_type,expected:IL.set,received:s.parsedType}),IJ;let n=this._def;null!==n.minSize&&s.data.size<n.minSize.value&&(Iq(s,{code:IP.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&s.data.size>n.maxSize.value&&(Iq(s,{code:IP.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let i=this._def.valueType;function r(e){let s=new Set;for(let n of e){if("aborted"===n.status)return IJ;"dirty"===n.status&&t.dirty(),s.add(n.value)}return{status:t.value,value:s}}let a=[...s.data.values()].map((e,t)=>i._parse(new I1(s,e,s.path,t)));return s.common.async?Promise.all(a).then(e=>r(e)):r(a)}min(e,t){return new NC({...this._def,minSize:{value:e,message:g.toString(t)}})}max(e,t){return new NC({...this._def,maxSize:{value:e,message:g.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}NC.create=(e,t)=>new NC({valueType:e,minSize:null,maxSize:null,typeName:y.ZodSet,...I5(t)});class NM extends I3{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==IL.function)return Iq(t,{code:IP.invalid_type,expected:IL.function,received:t.parsedType}),IJ;function s(e,s){return IZ({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,IB(),ID].filter(e=>!!e),issueData:{code:IP.invalid_arguments,argumentsError:s}})}function n(e,s){return IZ({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,IB(),ID].filter(e=>!!e),issueData:{code:IP.invalid_return_type,returnTypeError:s}})}let i={errorMap:t.common.contextualErrorMap},r=t.data;if(this._def.returns instanceof Nz){let e=this;return IG(async function(...t){let a=new IU([]),o=await e._def.args.parseAsync(t,i).catch(e=>{throw a.addIssue(s(t,e)),a}),l=await Reflect.apply(r,this,o);return await e._def.returns._def.type.parseAsync(l,i).catch(e=>{throw a.addIssue(n(l,e)),a})})}{let e=this;return IG(function(...t){let a=e._def.args.safeParse(t,i);if(!a.success)throw new IU([s(t,a.error)]);let o=Reflect.apply(r,this,a.data),l=e._def.returns.safeParse(o,i);if(!l.success)throw new IU([n(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new NM({...this._def,args:NA.create(e).rest(Nw.create())})}returns(e){return new NM({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new NM({args:e||NA.create([]).rest(Nw.create()),returns:t||Nw.create(),typeName:y.ZodFunction,...I5(s)})}}class NL extends I3{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}NL.create=(e,t)=>new NL({getter:e,typeName:y.ZodLazy,...I5(t)});class N$ extends I3{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return Iq(t,{received:t.data,code:IP.invalid_literal,expected:this._def.value}),IJ}return{status:"valid",value:e.data}}get value(){return this._def.value}}function NP(e,t){return new NU({values:e,typeName:y.ZodEnum,...I5(t)})}N$.create=(e,t)=>new N$({value:e,typeName:y.ZodLiteral,...I5(t)});class NU extends I3{constructor(){super(...arguments),b.set(this,void 0)}_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),s=this._def.values;return Iq(t,{expected:h.joinValues(s),received:t.parsedType,code:IP.invalid_type}),IJ}if(IX(this,b,"f")||I0(this,b,new Set(this._def.values),"f"),!IX(this,b,"f").has(e.data)){let t=this._getOrReturnCtx(e),s=this._def.values;return Iq(t,{received:t.data,code:IP.invalid_enum_value,options:s}),IJ}return IG(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return NU.create(e,{...this._def,...t})}exclude(e,t=this._def){return NU.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}b=new WeakMap,NU.create=NP;class ND extends I3{constructor(){super(...arguments),x.set(this,void 0)}_parse(e){let t=h.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==IL.string&&s.parsedType!==IL.number){let e=h.objectValues(t);return Iq(s,{expected:h.joinValues(e),received:s.parsedType,code:IP.invalid_type}),IJ}if(IX(this,x,"f")||I0(this,x,new Set(h.getValidEnumValues(this._def.values)),"f"),!IX(this,x,"f").has(e.data)){let e=h.objectValues(t);return Iq(s,{received:s.data,code:IP.invalid_enum_value,options:e}),IJ}return IG(e.data)}get enum(){return this._def.values}}x=new WeakMap,ND.create=(e,t)=>new ND({values:e,typeName:y.ZodNativeEnum,...I5(t)});class Nz extends I3{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==IL.promise&&!1===t.common.async?(Iq(t,{code:IP.invalid_type,expected:IL.promise,received:t.parsedType}),IJ):IG((t.parsedType===IL.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Nz.create=(e,t)=>new Nz({type:e,typeName:y.ZodPromise,...I5(t)});class NB extends I3{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===y.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:s}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{Iq(s,e),e.fatal?t.abort():t.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){let e=n.transform(s.data,i);if(s.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return IJ;let n=await this._def.schema._parseAsync({data:e,path:s.path,parent:s});return"aborted"===n.status?IJ:"dirty"===n.status||"dirty"===t.value?IV(n.value):n});{if("aborted"===t.value)return IJ;let n=this._def.schema._parseSync({data:e,path:s.path,parent:s});return"aborted"===n.status?IJ:"dirty"===n.status||"dirty"===t.value?IV(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,i);if(s.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==s.common.async)return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(s=>"aborted"===s.status?IJ:("dirty"===s.status&&t.dirty(),e(s.value).then(()=>({status:t.value,value:s.value}))));{let n=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return"aborted"===n.status?IJ:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type){if(!1!==s.common.async)return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(e=>IY(e)?Promise.resolve(n.transform(e.value,i)).then(e=>({status:t.value,value:e})):e);{let e=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!IY(e))return e;let r=n.transform(e.value,i);if(r instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:r}}}h.assertNever(n)}}NB.create=(e,t,s)=>new NB({schema:e,typeName:y.ZodEffects,effect:t,...I5(s)}),NB.createWithPreprocess=(e,t,s)=>new NB({schema:t,effect:{type:"preprocess",transform:e},typeName:y.ZodEffects,...I5(s)});class NZ extends I3{_parse(e){return this._getType(e)===IL.undefined?IG(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}NZ.create=(e,t)=>new NZ({innerType:e,typeName:y.ZodOptional,...I5(t)});class Nq extends I3{_parse(e){return this._getType(e)===IL.null?IG(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Nq.create=(e,t)=>new Nq({innerType:e,typeName:y.ZodNullable,...I5(t)});class NK extends I3{_parse(e){let{ctx:t}=this._processInputParams(e),s=t.data;return t.parsedType===IL.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}NK.create=(e,t)=>new NK({innerType:e,typeName:y.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...I5(t)});class NJ extends I3{_parse(e){let{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return IQ(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new IU(s.common.issues)},input:s.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new IU(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}NJ.create=(e,t)=>new NJ({innerType:e,typeName:y.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...I5(t)});class NV extends I3{_parse(e){if(this._getType(e)!==IL.nan){let t=this._getOrReturnCtx(e);return Iq(t,{code:IP.invalid_type,expected:IL.nan,received:t.parsedType}),IJ}return{status:"valid",value:e.data}}}NV.create=e=>new NV({typeName:y.ZodNaN,...I5(e)});let NG=Symbol("zod_brand");class NW extends I3{_parse(e){let{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class NH extends I3{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return"aborted"===e.status?IJ:"dirty"===e.status?(t.dirty(),IV(e.value)):this._def.out._parseAsync({data:e.value,path:s.path,parent:s})})();{let e=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return"aborted"===e.status?IJ:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:s.path,parent:s})}}static create(e,t){return new NH({in:e,out:t,typeName:y.ZodPipeline})}}class NY extends I3{_parse(e){let t=this._def.innerType._parse(e),s=e=>(IY(e)&&(e.value=Object.freeze(e.value)),e);return IQ(t)?t.then(e=>s(e)):s(t)}unwrap(){return this._def.innerType}}function NQ(e,t){let s="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof s?{message:s}:s}function NX(e,t={},s){return e?N_.create().superRefine((n,i)=>{var r,a;let o=e(n);if(o instanceof Promise)return o.then(e=>{var r,a;if(!e){let e=NQ(t,n),o=null===(a=null!==(r=e.fatal)&&void 0!==r?r:s)||void 0===a||a;i.addIssue({code:"custom",...e,fatal:o})}});if(!o){let e=NQ(t,n),o=null===(a=null!==(r=e.fatal)&&void 0!==r?r:s)||void 0===a||a;i.addIssue({code:"custom",...e,fatal:o})}}):N_.create()}NY.create=(e,t)=>new NY({innerType:e,typeName:y.ZodReadonly,...I5(t)});let N0={object:NT.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(y||(y={}));let N1=Nm.create,N2=Nh.create,N5=NV.create,N3=Nf.create,N4=Ng.create,N9=Nb.create,N6=Nx.create,N8=Ny.create,N7=Nv.create,Re=N_.create,Rt=Nw.create,Rs=NS.create,Rn=Nk.create,Ri=NO.create,Rr=NT.create,Ra=NT.strictCreate,Ro=NE.create,Rl=NN.create,Rc=NR.create,Ru=NA.create,Rp=NF.create,Rd=Nj.create,Rm=NC.create,Rh=NM.create,Rf=NL.create,Rg=N$.create,Rb=NU.create,Rx=ND.create,Ry=Nz.create,Rv=NB.create,R_=NZ.create,Rw=Nq.create,RS=NB.createWithPreprocess,Rk=NH.create;var RO=Object.freeze({__proto__:null,defaultErrorMap:ID,setErrorMap:function(e){Iz=e},getErrorMap:IB,makeIssue:IZ,EMPTY_PATH:[],addIssueToContext:Iq,ParseStatus:IK,INVALID:IJ,DIRTY:IV,OK:IG,isAborted:IW,isDirty:IH,isValid:IY,isAsync:IQ,get util(){return h},get objectUtil(){return f},ZodParsedType:IL,getParsedType:I$,ZodType:I3,datetimeRegex:Nd,ZodString:Nm,ZodNumber:Nh,ZodBigInt:Nf,ZodBoolean:Ng,ZodDate:Nb,ZodSymbol:Nx,ZodUndefined:Ny,ZodNull:Nv,ZodAny:N_,ZodUnknown:Nw,ZodNever:NS,ZodVoid:Nk,ZodArray:NO,ZodObject:NT,ZodUnion:NE,ZodDiscriminatedUnion:NN,ZodIntersection:NR,ZodTuple:NA,ZodRecord:NF,ZodMap:Nj,ZodSet:NC,ZodFunction:NM,ZodLazy:NL,ZodLiteral:N$,ZodEnum:NU,ZodNativeEnum:ND,ZodPromise:Nz,ZodEffects:NB,ZodTransformer:NB,ZodOptional:NZ,ZodNullable:Nq,ZodDefault:NK,ZodCatch:NJ,ZodNaN:NV,BRAND:NG,ZodBranded:NW,ZodPipeline:NH,ZodReadonly:NY,custom:NX,Schema:I3,ZodSchema:I3,late:N0,get ZodFirstPartyTypeKind(){return y},coerce:{string:e=>Nm.create({...e,coerce:!0}),number:e=>Nh.create({...e,coerce:!0}),boolean:e=>Ng.create({...e,coerce:!0}),bigint:e=>Nf.create({...e,coerce:!0}),date:e=>Nb.create({...e,coerce:!0})},any:Re,array:Ri,bigint:N3,boolean:N4,date:N9,discriminatedUnion:Rl,effect:Rv,enum:Rb,function:Rh,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>NX(t=>t instanceof e,t),intersection:Rc,lazy:Rf,literal:Rg,map:Rd,nan:N5,nativeEnum:Rx,never:Rs,null:N7,nullable:Rw,number:N2,object:Rr,oboolean:()=>N4().optional(),onumber:()=>N2().optional(),optional:R_,ostring:()=>N1().optional(),pipeline:Rk,preprocess:RS,promise:Ry,record:Rp,set:Rm,strictObject:Ra,string:N1,symbol:N6,transformer:Rv,tuple:Ru,undefined:N8,union:Ro,unknown:Rt,void:Rn,NEVER:IJ,ZodIssueCode:IP,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:IU});let RT=require("sharp");var RE=s.n(RT),RI=s(469);let{GET:RN,POST:RR}=(e=>{let t=IC(e,"nextjs-app");return{POST:e=>t.POST(e),GET:e=>t.GET(e)}})({router:{imageUploader:(function e(t={}){let s={routerConfig:{image:{maxFileSize:"4MB"}},inputParser:{parse:()=>void 0,_input:void 0,_output:void 0},middleware:()=>({}),onUploadError:()=>({}),errorFormatter:t.errorFormatter??IM,...t};return{input:t=>e({...s,inputParser:t}),middleware:t=>e({...s,middleware:t}),onUploadComplete:e=>({_def:s,resolver:e}),onUploadError:t=>e({...s,onUploadError:t})}})({routerConfig:{image:{maxFileSize:"4MB"}},...m}).input(RO.object({configId:RO.string().optional()})).middleware(async({input:e})=>({input:e})).onUploadComplete(async({metadata:e,file:t})=>{let{configId:s}=e.input,n=await fetch(t.url),i=await n.arrayBuffer(),{width:r,height:a}=await RE()(i).metadata();return s?{configId:(await RI.db.configuration.update({where:{id:s},data:{croppedImageUrl:t.url}})).id}:{configId:(await RI.db.configuration.create({data:{imageUrl:t.url,height:a||500,width:r||500}})).id}})}}),RA=new _.AppRouteRouteModule({definition:{kind:w.x.APP_ROUTE,page:"/api/uploadthing/route",pathname:"/api/uploadthing",filename:"route",bundlePath:"app/api/uploadthing/route"},resolvedPagePath:"/Users/ramanakumar/casecobra/src/app/api/uploadthing/route.ts",nextConfigOutput:"",userland:v}),{requestAsyncStorage:RF,staticGenerationAsyncStorage:Rj,serverHooks:RC}=RA,RM="/api/uploadthing/route";function RL(){return(0,S.patchFetch)({serverHooks:RC,staticGenerationAsyncStorage:Rj})}},9303:(e,t,s)=>{e.exports=s(517)},469:(e,t,s)=>{s.d(t,{db:()=>n});let n=new(s(3524)).PrismaClient}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),n=t.X(0,[948],()=>s(1493));module.exports=n})();